(self.webpackChunkretest_plaugin=self.webpackChunkretest_plaugin||[]).push([[8484],{30998:(at,lt,k)=>{var O=k(41848),q=k(67206),U=k(40554),$=Math.max;function V(_,K,tt){var A=_==null?0:_.length;if(!A)return-1;var M=tt==null?0:U(tt);return M<0&&(M=$(A+M,0)),O(_,q(K,3),M)}at.exports=V},61305:(at,lt,k)=>{k.d(lt,{X:()=>W});const O=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,q=new Set,U=typeof process=="object"&&process?process:{},$=(l,t,e,i)=>{typeof U.emitWarning=="function"?U.emitWarning(l,t,e,i):console.error(`[${e}] ${t}: ${l}`)};let V=globalThis.AbortController,_=globalThis.AbortSignal;if(typeof V>"u"){_=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,s){this._onabort.push(s)}},V=class{constructor(){t()}signal=new _;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(const s of this.signal._onabort)s(i);this.signal.onabort?.(i)}}};let l=U.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const t=()=>{l&&(l=!1,$("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const K=l=>!q.has(l),tt=Symbol("type"),A=l=>l&&l===Math.floor(l)&&l>0&&isFinite(l),M=l=>A(l)?l<=Math.pow(2,8)?Uint8Array:l<=Math.pow(2,16)?Uint16Array:l<=Math.pow(2,32)?Uint32Array:l<=Number.MAX_SAFE_INTEGER?Z:null:null;class Z extends Array{constructor(t){super(t),this.fill(0)}}class G{heap;length;static#l=!1;static create(t){const e=M(t);if(!e)return[];G.#l=!0;const i=new G(t,e);return G.#l=!1,i}constructor(t,e){if(!G.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class et{#l;#u;#p;#m;#N;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#C;#s;#i;#t;#h;#f;#a;#r;#w;#o;#S;#v;#d;#b;#x;#c;static unsafeExposeInternals(t){return{starts:t.#v,ttls:t.#d,sizes:t.#S,keyMap:t.#s,keyList:t.#i,valList:t.#t,next:t.#h,prev:t.#f,get head(){return t.#a},get tail(){return t.#r},free:t.#w,isBackgroundFetch:e=>t.#e(e),backgroundFetch:(e,i,s,n)=>t.#O(e,i,s,n),moveToTail:e=>t.#T(e),indexes:e=>t.#F(e),rindexes:e=>t.#P(e),isStale:e=>t.#g(e)}}get max(){return this.#l}get maxSize(){return this.#u}get calculatedSize(){return this.#C}get size(){return this.#n}get fetchMethod(){return this.#N}get dispose(){return this.#p}get disposeAfter(){return this.#m}constructor(t){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:n,updateAgeOnGet:r,updateAgeOnHas:o,allowStale:a,dispose:h,disposeAfter:u,noDisposeOnSet:c,noUpdateTTL:d,maxSize:f=0,maxEntrySize:C=0,sizeCalculation:p,fetchMethod:w,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:N,allowStaleOnFetchAbort:v,ignoreFetchAbort:F}=t;if(e!==0&&!A(e))throw new TypeError("max option must be a nonnegative integer");const I=e?M(e):Array;if(!I)throw new Error("invalid max value: "+e);if(this.#l=e,this.#u=f,this.maxEntrySize=C||this.#u,this.sizeCalculation=p,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#N=w,this.#x=!!w,this.#s=new Map,this.#i=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#h=new I(e),this.#f=new I(e),this.#a=0,this.#r=0,this.#w=G.create(e),this.#n=0,this.#C=0,typeof h=="function"&&(this.#p=h),typeof u=="function"?(this.#m=u,this.#o=[]):(this.#m=void 0,this.#o=void 0),this.#b=!!this.#p,this.#c=!!this.#m,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!N,this.allowStaleOnFetchAbort=!!v,this.ignoreFetchAbort=!!F,this.maxEntrySize!==0){if(this.#u!==0&&!A(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!A(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#k()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!o,this.ttlResolution=A(s)||s===0?s:1,this.ttlAutopurge=!!n,this.ttl=i||0,this.ttl){if(!A(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#l===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#u){const b="LRU_CACHE_UNBOUNDED";K(b)&&(q.add(b),$("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",b,et))}}getRemainingTTL(t){return this.#s.has(t)?1/0:0}#I(){const t=new Z(this.#l),e=new Z(this.#l);this.#d=t,this.#v=e,this.#M=(n,r,o=O.now())=>{if(e[n]=r!==0?o:0,t[n]=r,r!==0&&this.ttlAutopurge){const a=setTimeout(()=>{this.#g(n)&&this.delete(this.#i[n])},r+1);a.unref&&a.unref()}},this.#E=n=>{e[n]=t[n]!==0?O.now():0},this.#y=(n,r)=>{if(t[r]){const o=t[r],a=e[r];if(!o||!a)return;n.ttl=o,n.start=a,n.now=i||s();const h=n.now-a;n.remainingTTL=o-h}};let i=0;const s=()=>{const n=O.now();if(this.ttlResolution>0){i=n;const r=setTimeout(()=>i=0,this.ttlResolution);r.unref&&r.unref()}return n};this.getRemainingTTL=n=>{const r=this.#s.get(n);if(r===void 0)return 0;const o=t[r],a=e[r];if(!o||!a)return 1/0;const h=(i||s())-a;return o-h},this.#g=n=>{const r=e[n],o=t[n];return!!o&&!!r&&(i||s())-r>o}}#E=()=>{};#y=()=>{};#M=()=>{};#g=()=>!1;#k(){const t=new Z(this.#l);this.#C=0,this.#S=t,this.#A=e=>{this.#C-=t[e],t[e]=0},this.#z=(e,i,s,n)=>{if(this.#e(i))return 0;if(!A(s))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(s=n(i,e),!A(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#R=(e,i,s)=>{if(t[e]=i,this.#u){const n=this.#u-t[e];for(;this.#C>n;)this.#D(!0)}this.#C+=t[e],s&&(s.entrySize=i,s.totalCalculatedSize=this.#C)}}#A=t=>{};#R=(t,e,i)=>{};#z=(t,e,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#F({allowStale:t=this.allowStale}={}){if(this.#n)for(let e=this.#r;!(!this.#W(e)||((t||!this.#g(e))&&(yield e),e===this.#a));)e=this.#f[e]}*#P({allowStale:t=this.allowStale}={}){if(this.#n)for(let e=this.#a;!(!this.#W(e)||((t||!this.#g(e))&&(yield e),e===this.#r));)e=this.#h[e]}#W(t){return t!==void 0&&this.#s.get(this.#i[t])===t}*entries(){for(const t of this.#F())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*rentries(){for(const t of this.#P())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*keys(){for(const t of this.#F()){const e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*rkeys(){for(const t of this.#P()){const e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*values(){for(const t of this.#F())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(const t of this.#P())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const i of this.#F()){const s=this.#t[i],n=this.#e(s)?s.__staleWhileFetching:s;if(n!==void 0&&t(n,this.#i[i],this))return this.get(this.#i[i],e)}}forEach(t,e=this){for(const i of this.#F()){const s=this.#t[i],n=this.#e(s)?s.__staleWhileFetching:s;n!==void 0&&t.call(e,n,this.#i[i],this)}}rforEach(t,e=this){for(const i of this.#P()){const s=this.#t[i],n=this.#e(s)?s.__staleWhileFetching:s;n!==void 0&&t.call(e,n,this.#i[i],this)}}purgeStale(){let t=!1;for(const e of this.#P({allowStale:!0}))this.#g(e)&&(this.delete(this.#i[e]),t=!0);return t}info(t){const e=this.#s.get(t);if(e===void 0)return;const i=this.#t[e],s=this.#e(i)?i.__staleWhileFetching:i;if(s===void 0)return;const n={value:s};if(this.#d&&this.#v){const r=this.#d[e],o=this.#v[e];if(r&&o){const a=r-(O.now()-o);n.ttl=a,n.start=Date.now()}}return this.#S&&(n.size=this.#S[e]),n}dump(){const t=[];for(const e of this.#F({allowStale:!0})){const i=this.#i[e],s=this.#t[e],n=this.#e(s)?s.__staleWhileFetching:s;if(n===void 0||i===void 0)continue;const r={value:n};if(this.#d&&this.#v){r.ttl=this.#d[e];const o=O.now()-this.#v[e];r.start=Math.floor(Date.now()-o)}this.#S&&(r.size=this.#S[e]),t.unshift([i,r])}return t}load(t){this.clear();for(const[e,i]of t){if(i.start){const s=Date.now()-i.start;i.start=O.now()-s}this.set(e,i.value,i)}}set(t,e,i={}){if(e===void 0)return this.delete(t),this;const{ttl:s=this.ttl,start:n,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=i;let{noUpdateTTL:h=this.noUpdateTTL}=i;const u=this.#z(t,e,i.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(t),this;let c=this.#n===0?void 0:this.#s.get(t);if(c===void 0)c=this.#n===0?this.#r:this.#w.length!==0?this.#w.pop():this.#n===this.#l?this.#D(!1):this.#n,this.#i[c]=t,this.#t[c]=e,this.#s.set(t,c),this.#h[this.#r]=c,this.#f[c]=this.#r,this.#r=c,this.#n++,this.#R(c,u,a),a&&(a.set="add"),h=!1;else{this.#T(c);const d=this.#t[c];if(e!==d){if(this.#x&&this.#e(d)){d.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:f}=d;f!==void 0&&!r&&(this.#b&&this.#p?.(f,t,"set"),this.#c&&this.#o?.push([f,t,"set"]))}else r||(this.#b&&this.#p?.(d,t,"set"),this.#c&&this.#o?.push([d,t,"set"]));if(this.#A(c),this.#R(c,u,a),this.#t[c]=e,a){a.set="replace";const f=d&&this.#e(d)?d.__staleWhileFetching:d;f!==void 0&&(a.oldValue=f)}}else a&&(a.set="update")}if(s!==0&&!this.#d&&this.#I(),this.#d&&(h||this.#M(c,s,n),a&&this.#y(a,c)),!r&&this.#c&&this.#o){const d=this.#o;let f;for(;f=d?.shift();)this.#m?.(...f)}return this}pop(){try{for(;this.#n;){const t=this.#t[this.#a];if(this.#D(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#c&&this.#o){const t=this.#o;let e;for(;e=t?.shift();)this.#m?.(...e)}}}#D(t){const e=this.#a,i=this.#i[e],s=this.#t[e];return this.#x&&this.#e(s)?s.__abortController.abort(new Error("evicted")):(this.#b||this.#c)&&(this.#b&&this.#p?.(s,i,"evict"),this.#c&&this.#o?.push([s,i,"evict"])),this.#A(e),t&&(this.#i[e]=void 0,this.#t[e]=void 0,this.#w.push(e)),this.#n===1?(this.#a=this.#r=0,this.#w.length=0):this.#a=this.#h[e],this.#s.delete(i),this.#n--,e}has(t,e={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=e,n=this.#s.get(t);if(n!==void 0){const r=this.#t[n];if(this.#e(r)&&r.__staleWhileFetching===void 0)return!1;if(this.#g(n))s&&(s.has="stale",this.#y(s,n));else return i&&this.#E(n),s&&(s.has="hit",this.#y(s,n)),!0}else s&&(s.has="miss");return!1}peek(t,e={}){const{allowStale:i=this.allowStale}=e,s=this.#s.get(t);if(s===void 0||!i&&this.#g(s))return;const n=this.#t[s];return this.#e(n)?n.__staleWhileFetching:n}#O(t,e,i,s){const n=e===void 0?void 0:this.#t[e];if(this.#e(n))return n;const r=new V,{signal:o}=i;o?.addEventListener("abort",()=>r.abort(o.reason),{signal:r.signal});const a={signal:r.signal,options:i,context:s},h=(p,w=!1)=>{const{aborted:g}=r.signal,S=i.ignoreFetchAbort&&p!==void 0;if(i.status&&(g&&!w?(i.status.fetchAborted=!0,i.status.fetchError=r.signal.reason,S&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),g&&!S&&!w)return c(r.signal.reason);const N=f;return this.#t[e]===f&&(p===void 0?N.__staleWhileFetching?this.#t[e]=N.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,p,a.options))),p},u=p=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=p),c(p)),c=p=>{const{aborted:w}=r.signal,g=w&&i.allowStaleOnFetchAbort,S=g||i.allowStaleOnFetchRejection,N=S||i.noDeleteOnFetchRejection,v=f;if(this.#t[e]===f&&(!N||v.__staleWhileFetching===void 0?this.delete(t):g||(this.#t[e]=v.__staleWhileFetching)),S)return i.status&&v.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),v.__staleWhileFetching;if(v.__returned===v)throw p},d=(p,w)=>{const g=this.#N?.(t,n,a);g&&g instanceof Promise&&g.then(S=>p(S===void 0?void 0:S),w),r.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(p(void 0),i.allowStaleOnFetchAbort&&(p=S=>h(S,!0)))})};i.status&&(i.status.fetchDispatched=!0);const f=new Promise(d).then(h,u),C=Object.assign(f,{__abortController:r,__staleWhileFetching:n,__returned:void 0});return e===void 0?(this.set(t,C,{...a.options,status:void 0}),e=this.#s.get(t)):this.#t[e]=C,C}#e(t){if(!this.#x)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof V}async fetch(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:C=this.allowStaleOnFetchAbort,context:p,forceRefresh:w=!1,status:g,signal:S}=e;if(!this.#x)return g&&(g.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:n,status:g});const N={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:n,ttl:r,noDisposeOnSet:o,size:a,sizeCalculation:h,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:C,ignoreFetchAbort:f,status:g,signal:S};let v=this.#s.get(t);if(v===void 0){g&&(g.fetch="miss");const F=this.#O(t,v,N,p);return F.__returned=F}else{const F=this.#t[v];if(this.#e(F)){const L=i&&F.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",L&&(g.returnedStale=!0)),L?F.__staleWhileFetching:F.__returned=F}const I=this.#g(v);if(!w&&!I)return g&&(g.fetch="hit"),this.#T(v),s&&this.#E(v),g&&this.#y(g,v),F;const b=this.#O(t,v,N,p),P=b.__staleWhileFetching!==void 0&&i;return g&&(g.fetch=I?"stale":"refresh",P&&I&&(g.returnedStale=!0)),P?b.__staleWhileFetching:b.__returned=b}}get(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:r}=e,o=this.#s.get(t);if(o!==void 0){const a=this.#t[o],h=this.#e(a);return r&&this.#y(r,o),this.#g(o)?(r&&(r.get="stale"),h?(r&&i&&a.__staleWhileFetching!==void 0&&(r.returnedStale=!0),i?a.__staleWhileFetching:void 0):(n||this.delete(t),r&&i&&(r.returnedStale=!0),i?a:void 0)):(r&&(r.get="hit"),h?a.__staleWhileFetching:(this.#T(o),s&&this.#E(o),a))}else r&&(r.get="miss")}#L(t,e){this.#f[e]=t,this.#h[t]=e}#T(t){t!==this.#r&&(t===this.#a?this.#a=this.#h[t]:this.#L(this.#f[t],this.#h[t]),this.#L(this.#r,t),this.#r=t)}delete(t){let e=!1;if(this.#n!==0){const i=this.#s.get(t);if(i!==void 0)if(e=!0,this.#n===1)this.clear();else{this.#A(i);const s=this.#t[i];if(this.#e(s)?s.__abortController.abort(new Error("deleted")):(this.#b||this.#c)&&(this.#b&&this.#p?.(s,t,"delete"),this.#c&&this.#o?.push([s,t,"delete"])),this.#s.delete(t),this.#i[i]=void 0,this.#t[i]=void 0,i===this.#r)this.#r=this.#f[i];else if(i===this.#a)this.#a=this.#h[i];else{const n=this.#f[i];this.#h[n]=this.#h[i];const r=this.#h[i];this.#f[r]=this.#f[i]}this.#n--,this.#w.push(i)}}if(this.#c&&this.#o?.length){const i=this.#o;let s;for(;s=i?.shift();)this.#m?.(...s)}return e}clear(){for(const t of this.#P({allowStale:!0})){const e=this.#t[t];if(this.#e(e))e.__abortController.abort(new Error("deleted"));else{const i=this.#i[t];this.#b&&this.#p?.(e,i,"delete"),this.#c&&this.#o?.push([e,i,"delete"])}}if(this.#s.clear(),this.#t.fill(void 0),this.#i.fill(void 0),this.#d&&this.#v&&(this.#d.fill(0),this.#v.fill(0)),this.#S&&this.#S.fill(0),this.#a=0,this.#r=0,this.#w.length=0,this.#C=0,this.#n=0,this.#c&&this.#o){const t=this.#o;let e;for(;e=t?.shift();)this.#m?.(...e)}}}var H=k(47591);const ht={black:"#000000",red:"#ff0000",green:"#00aa00",blue:"#0000ff",white:"#ffffff",cyan:"#0092d2",magenta:"#cb006b",yellow:"#fff10d",none:void 0},j="#,##0.00";class it{constructor(t=!0,e=!0,i,s,n,r,o){this.includeColors=!0,this.legacyCompatibility=!0,this.includeColors=t,this.legacyCompatibility=e,this.thousandsSeparator=i,this.decimalSeparator=s,this.nanString=n,this.positiveInfinity=r,this.negativeInfinity=o}}it.DefaultOptions=new it;class ct{constructor(t){if(t.customColor&&(this.color=t.customColor.startsWith("#")?t.customColor:"#"+t.customColor),t.color){const e=ht[t.color]?ht[t.color]:void 0;this.color=e}t.customBgColor&&(this.backgroundColor=t.customBgColor.startsWith("#")?t.customBgColor:"#"+t.customBgColor)}}class st{constructor(t,e,i){this.color=t,this.customColor=e,this.customBgColor=i}reset(){this.color=void 0,this.customColor=void 0,this.customBgColor=void 0}}class ut{constructor(t,e,i=!1){this.colors=t||new st,this.effectiveFormat=e,this.nullConditionFormatter=i}reset(){this.colors.reset(),this.effectiveFormat=void 0,this.nullConditionFormatter=!1}}class Y extends Error{constructor(t){super(t),this.name="InvalidArgumentError",Object.setPrototypeOf(this,new.target.prototype)}}const St=l=>l instanceof Y;class Q{constructor(t,e,i,s=e){this.str=t,this.pos=s,this.begin=e,this.end=i}hasNext(){return this.pos<this.end}hasPrevious(){return this.pos>this.begin}next(){if(this.hasNext()){const t=this.str.charAt(this.pos);return this.pos++,t}return""}previous(){return this.hasPrevious()?(this.pos--,this.str.charAt(this.pos)):""}getIndex(){return this.pos}}function ft(l,t,e,i){const s=new st,n=i.match(l);n&&(s.color=n[1].toLowerCase());const r=i.match(t);r&&(s.customColor=r[1].toLowerCase());const o=i.match(e);return o&&(s.customBgColor=o[1].toLowerCase()),s}function vt(l,t){const e=l.getColorMatcher(),i=l.getAnyCustomColorMatcher();return t.replace(new RegExp(e,"gi"),"").replace(new RegExp(i,"gi"),"")}class y{constructor(t){this.thousandsSeparator=t.thousandsSeparator||y.DefaultThousandSeparator,this.decimalSeparator=t.decimalSeparator||y.DefaultDecimalSeparator,this.nanString=t.nanString||y.DefaultNaNString,this.positiveInfinity=t.positiveInfinity||y.DefaultPositiveInfinity,this.negativeInfinity=t.negativeInfinity||y.DefaultNegativeInfinity}}y.DefaultThousandSeparator=",",y.DefaultDecimalSeparator=".",y.DefaultNaNString="NaN",y.DefaultPositiveInfinity="Infinity",y.DefaultNegativeInfinity="-Infinity";class nt{constructor(t,e,i=!1){this.options=t,this.constants=e,this.formatAbsoluteValue=i}toNestedFormatCtx(){return new nt(this.options,this.constants,!0)}}class X{constructor(t,e=!1){this.options=t,this.nestedFormatter=e}toNestedFormatCtx(){return new X(this.options,!0)}}class B{format(t,e,i){i&&i.reset();const s=new y(e),n=new nt(e,s);return this.doFormat(n,t,i)}resolve(t,e){const i=new X(e);return this.doResolve(i,t)}}class rt extends B{constructor(t,e,i){super(),this.literal=t,this.literalNoColors=e,this.colors=i}doFormat(t,e,i){return i&&(i.colors=this.colors,i.effectiveFormat=""),t.options.includeColors?(i&&(i.effectiveFormat=this.literal),this.literal):(i&&(i.effectiveFormat=this.literalNoColors),this.literalNoColors)}doResolve(t,e){return t.options.includeColors?this.literal:this.literalNoColors}static compile(t,e){let i="",s=!1;const n=t.getColorMatcher(),r=t.getCustomColorMatcher(),o=t.getCustomBgColorMatcher();for(const u of e)u==="\\"?s=!0:(s=!1,i+=u);s&&(i+="\\");const a=vt(t,i),h=ft(n,r,o,i);return new rt(i,a,h)}}class m{constructor(){this.nullConditionPattern=m.createRegexPattern(m.NullConditionRegex,"i"),this.conditionPattern=m.createRegexPattern(m.ConditionRegex,"i"),this.arithmeticPattern=m.createRegexPattern(m.ArithmeticRegex,"i"),this.colorPattern=m.createRegexPattern(m.ColorRegex,"i"),this.customColorPattern=m.createRegexPattern(m.CustomColorRegex,"i"),this.customBgColorPattern=m.createRegexPattern(m.CustomBackgroundColorRegex,"i"),this.anyCustomColorPattern=m.createRegexPattern(m.AnyCustomColorRegex,"i"),this.excelFormatSuffixPattern=m.createRegexPattern(m.ExcelFormatSuffixRegex)}static createRegexPattern(t,e){return e?new RegExp(t.source,e):t}getNullConditionMatcher(){return this.nullConditionPattern}getConditionMatcher(){return this.conditionPattern}getArithmeticMatcher(){return new RegExp(this.arithmeticPattern,"g")}getColorMatcher(){return this.colorPattern}getCustomColorMatcher(){return this.customColorPattern}getCustomBgColorMatcher(){return this.customBgColorPattern}getAnyCustomColorMatcher(){return this.anyCustomColorPattern}getExcelFormatSuffixMatcher(){return this.excelFormatSuffixPattern}static group(t,e){if(t&&e>=0&&e<t.length){const i=t[e];if(i===void 0)return{value:i,startIndex:-1,endIndex:-1};const s=t.index+t[0].indexOf(i),n=s+i.length;return{value:i,startIndex:s,endIndex:n}}throw new Error(`Group ${e} not found in the regex match.`)}}m.NullConditionRegex=/\[=null\]/i,m.ConditionRegex=/\[(>=|<=|[=><])(-?[0-9.]+|null)\]/i,m.ArithmeticRegex=/\{\{\{([0-9]*(?:\.[0-9]*)?)\|([0-9]*)(\.)?\|(.*?)\}\}\}/,m.ColorRegex=/\[(black|blue|cyan|green|magenta|red|white|yellow|none)\]/i,m.CustomColorRegex=/\[color=#*([A-F0-9]+)\]/i,m.CustomBackgroundColorRegex=/\[backgroundColor=#*([A-F0-9]+)\]/i,m.AnyCustomColorRegex=/(\[(?:backgroundColor|color)=#*[A-Fa-f0-9]+\])+/,m.ExcelFormatSuffixRegex=/\[excel\]([\s\S])*$/i;class bt extends B{constructor(t,e,i,s){super(),this.divisor=i,this.modulo=s,this.trimFraction=e,this.formatter=t}doFormat(t,e,i){let s=e||0;return this.divisor!==void 0&&(s=s/this.divisor),this.modulo!==void 0&&(s=s%this.modulo),this.trimFraction&&(Number.isNaN(s)||!Number.isFinite(s)?s=0:s<0?(s=-1*Math.floor(-1*s),Object.is(s,-0)&&(s=0)):s=Math.floor(s)),this.formatter.doFormat(t,s,i)}doResolve(t,e){return null}}class x extends B{static doubleTostring(t){return Number.parseFloat(t)}constructor(t,e){super(),this.baseFormat=t,this.expressions=e}doFormat(t,e,i){const s=t.toNestedFormatCtx(),n=this.baseFormat.doFormat(s,e,i||void 0);let r="";const o=new Q(n,0,n.length);for(;o.hasNext();){const a=o.next(),h=a.charCodeAt(0);if(h>=x.ExpressionPlaceholderStart&&h<=x.ExpressionPlaceholderEnd){const u=h-x.ExpressionPlaceholderStart;if(u>=this.expressions.length)r+=a;else{const c=new ut;r+=this.expressions[u].doFormat(s,e,i!==void 0?c:void 0),i!==void 0&&(i.colors.color||(i.colors.color=c.colors.color),i.colors.customColor||(i.colors.customColor=c.colors.customColor),i.colors.customBgColor||(i.colors.customBgColor=c.colors.customBgColor))}}else r+=a}return i!==void 0&&(i.effectiveFormat=void 0),r}static compile(t,e,i){const s=t.getArithmeticMatcher();let n="";const r=[];let o=0,a;for(;(a=s.exec(i))!==null;){const h=a.index,u=s.lastIndex;n+=i.substring(o,h),o=u;const c=x.ExpressionPlaceholderStart+r.length;if(c>x.ExpressionPlaceholderEnd)throw new Y("Too many arithmetic expressions. You can specify at most 256 expressions.");const d=dt(m.group(a,1).value,x.doubleTostring),f=dt(m.group(a,2).value,x.doubleTostring),C=Ft(m.group(a,3).value),p=m.group(a,4).value;n+=String.fromCodePoint(c),r.push(new bt(e.compileFormatter(p),C,d,f))}return n+=i.substring(o),(0,H.kG)(r.length!==0,"No arithmetic expressions found in the format string."),new x(e.compileFormatter(n),r)}doResolve(t,e){return null}}x.ExpressionPlaceholderStart=57344,x.ExpressionPlaceholderEnd=57599;function dt(l,t){if(!l.length)return;const e=t(l);if(!Number.isNaN(e))return e}function Ft(l){return!l||l.length===0}class z{constructor(t,e,i){this.op=t,this.rhs=e,this.formatter=i,(0,H.kG)(e!==null||t==="Equal")}isNullAlternative(){return this.rhs===null}evaluate(t,e){if(t===null){if(this.rhs===null)return!0;if(!e)return!1;switch(this.op){case"Equal":return!1;case"WeakEqual":return this.rhs===0;case"LessThan":return this.rhs>0;case"LessThanOrEqual":return this.rhs>=0;case"GreaterThan":return this.rhs<0;case"GreaterThanOrEqual":return this.rhs<=0;default:return!1}}switch(this.op){case"Equal":case"WeakEqual":return this.rhs!==null&&t===this.rhs;case"GreaterThan":return this.rhs!==null&&t>this.rhs;case"GreaterThanOrEqual":return this.rhs!==null&&t>=this.rhs;case"LessThan":return this.rhs!==null&&t<this.rhs;case"LessThanOrEqual":return this.rhs!==null&&t<=this.rhs;default:return!1}}doFormat(t,e,i){return this.formatter.doFormat(t,e,i)}doResolve(t,e){return this.formatter.doResolve(t,e)}}class J extends B{constructor(t,e){super(),this.alternatives=t,this.catchall=e}static doubleToString(t){return parseFloat(t)}static compile(t,e,i){const s=t.getConditionMatcher();let n=j;const r=[],o=[];let a=0;for(const h of i){s.lastIndex=0;let u;if((u=s.exec(h))!==null){const c=m.group(u,0),d=c.startIndex,f=c.endIndex,C=m.group(u,1),p=Pt(C.value),w=m.group(u,2),g=yt(w.value,J.doubleToString);if(g.maybeValue===null&&p!=="Equal")continue;let S;d===0?S=h.substring(f):(S=h.substring(0,d),S+=h.substring(f)),p==="Equal"?g.maybeValue!==null?g.maybeValue===0&&g.inputHadDecimals?r.push(new z("WeakEqual",g.maybeValue,e.compileFormatter(S))):r.push(new z(p,g.maybeValue,e.compileFormatter(S))):r.push(new z(p,g.maybeValue,rt.compile(t,S))):o.push(new z(p,g.maybeValue,e.compileFormatter(S)))}else{switch(a){case 0:n=h,o.push(new z("GreaterThanOrEqual",0,e.compileFormatter(h)));break;case 1:o.push(new z("LessThan",0,e.compileFormatter(h)));break;case 2:r.push(new z("Equal",0,e.compileFormatter(h)));break;default:throw new Y("Too many semicolons in the format string.")}a++}}return new J(r.concat(o),e.compileFormatter(n))}doFormat(t,e,i){const s=t.toNestedFormatCtx();for(const n of this.alternatives)if(n.evaluate(e,s.options.legacyCompatibility))return i!==void 0&&n.isNullAlternative()&&(i.nullConditionFormatter=!0),n.doFormat(s,e,i);return this.catchall.doFormat(s,e,i)}doResolve(t,e){let i=null;const s=t.toNestedFormatCtx();let n=!1,r=!1;for(const o of this.alternatives)if(o.evaluate(e,t.options.legacyCompatibility)){n=!0,r=o.isNullAlternative(),i=o.doResolve(s,e);break}return n||(i=this.catchall.doResolve(s,e)),i===null?"":r||t.nestedFormatter?i:`${i};${i}`}}function Pt(l){if(l==="=")return"Equal";if(l===">")return"GreaterThan";if(l===">=")return"GreaterThanOrEqual";if(l==="<")return"LessThan";if(l==="<=")return"LessThanOrEqual";throw new Y("Unsupported operator.")}function yt(l,t){const e=t(l),i={maybeValue:null,inputHadDecimals:l.indexOf(".")>-1};return Number.isNaN(e)||(i.maybeValue=e),i}class R{constructor(t,e=!1){this.c=t,this.escaped=e}toString(){return this.c}isEscaped(){return this.escaped}isPlacement(){return!this.escaped&&(this.c==="0"||this.c==="#"||this.c==="?")}isZeroPlacement(){return!this.escaped&&this.c==="0"}isHashPlacement(){return!this.escaped&&this.c==="#"}isQPlacement(){return!this.escaped&&this.c==="?"}isDigit(){return this.c>="1"&&this.c<="9"}isComma(){return!this.escaped&&this.c===","}isDecimal(){return!this.escaped&&this.c==="."}isPercent(){return!this.escaped&&this.c==="%"}getColorPlaceholderIndex(){const t=this.c.codePointAt(0),e=R.ColorPlaceholderStart.codePointAt(0),i=R.ColorPlaceholderEnd.codePointAt(0);return t!==void 0&&e!==void 0&&i!==void 0&&t>=e&&t<=i?t-e:-1}}R.ColorPlaceholderStart="\uE200",R.ColorPlaceholderEnd="\uE2FF";class gt{constructor(){this.vec=[]}append(t){this.vec.push(t)}insert(t,e){this.vec.splice(t,0,e)}getVec(){return this.vec.slice()}length(){return this.vec.length}}class pt{constructor(t,e,i){this.formatString=t,this.digits=e,this.placements=i}getDigits(){return this.digits}getPlacements(){return this.placements}}class ot extends pt{format(t,e,i){const s=t.charAt(0)==="-",n=new Q(t,s?1:0,t.length,t.length),r=this.formatString.getVec().reverse();let o="",a=this.getPlacements(),h=this.getDigits(),u=0;const c=e.length>0,d=e.charAt(0)!=="-"?e:"0";for(;r.length>0&&(n.hasPrevious()||h)&&a;){const f=r.shift();if(f===void 0)break;const C=f.getColorPlaceholderIndex();if(C>=0){if(i==null||i.length<C)continue;o+=i[C];continue}if(!f.isPlacement()){o+=f;continue}if(c&&u===3)o+=d,u=0;else{let p;n.hasPrevious()?p=n.previous():p="0",o+=p,u++,h&&h--}a--}for(;n.hasPrevious()||h;)c&&u===3?(o+=d,u=0):n.hasPrevious()?(o+=n.previous(),u++,h&&h--):(o+="0",u++,h--);for(s&&(o+="-");r.length>0;){const f=r.shift();if(f===void 0)break;const C=f.getColorPlaceholderIndex();if(C>=0){if(i==null||i.length<C)continue;o+=i[C];continue}f.isHashPlacement()||(f.isQPlacement()?o+=" ":o+=f)}return o.split("").reverse().join("")}}ot.NoThousandsSeparators="";class xt{constructor(){this.placedDigits=0,this.placedLiteralDigits=0,this.placedEscapedCharacters=0}}class Et extends pt{format(t,e,i=null){if(!this.digits)return"";const s=this.formatString.getVec().slice(),n=new Q(t,0,t.length);let r=this.digits,o=0,a=0,h=0,u="",c="";for(;r;){const d=s.shift();(0,H.kG)(d.isPlacement());const f=n.hasNext()?n.next():"0";(0,H.kG)(!isNaN(Number(f)),"Fraction part should only include digits"),d.isHashPlacement()&&f==="0"?c+=f:(u+=c,o+=c.length,c="",u+=f,o++),r--}for(this.placements>this.digits&&(u+=c,o+=c.length,c="");s.length>0;){const d=s.shift(),f=d.getColorPlaceholderIndex();if(f>=0){if(i===null||i.length<=f)continue;u+=i[f]}else d.isHashPlacement()||(d.isQPlacement()?u+=" ":(h+=d.isEscaped()?1:0,a+=d.isDigit()?1:0,u+=d.toString()))}return e.placedDigits=o,e.placedLiteralDigits=a,e.placedEscapedCharacters=h,u}}class mt{constructor(){this.state="Null"}onCharacter(t){switch(this.state){case"Matched":break;case"Null":t.isPlacement()&&(this.state="HasPlacementChar");break;case"HasPlacementChar":t.isPlacement()?this.state="HasPlacementChar":t.isComma()?this.state="HasComma":this.state="Null";break;case"HasComma":t.isPlacement()?this.state="Matched":this.state="Null";break}}isMatched(){return this.state==="Matched"}}class Ct{constructor(t=!1){this.counter=0,this.state=t?"ExpectingAnyPlacement":"WaitingForZero"}onCharacter(t){switch(this.state){case"Done":break;case"ExpectingAnyPlacement":t.isPlacement()?(this.state="CountingDigits",this.counter++):this.state="Done";break;case"WaitingForZero":t.isZeroPlacement()&&(this.state="CountingDigits",this.counter++);break;case"CountingDigits":t.isPlacement()?this.counter++:this.state="Done";break}}count(){return this.counter}}class wt{constructor(t=!1){this.scalingValue=0;const e=t?"Null":"CommasExpected";this.initialState=e,this.state=e}onCharacter(t){switch(this.state){case"Null":t.isPlacement()&&(this.state="CommasExpected");break;case"CommasExpected":t.isComma()?(this.state="CollectScaling",this.scalingValue++):t.isPlacement()||(this.state=this.initialState,this.scalingValue=0);break;case"CollectScaling":t.isComma()?this.scalingValue++:t.isPlacement()?(this.scalingValue--,this.state=this.scalingValue?"Done":"CommasExpected"):this.state="Done";break;case"Done":break}}scaling(){return this.scalingValue}}class At{constructor(){this.visualPart="",this.bareFormatWithPlaceholders="",this.colorPlaceholderValues=[],this.colors=new st}}function Tt(l,t){const e=l.getColorMatcher(),i=l.getCustomColorMatcher(),s=l.getCustomBgColorMatcher(),n=l.getAnyCustomColorMatcher(),r=new At;let o=t;if(r.colors=ft(e,i,s,t),n.lastIndex=0,n.test(o)){const h=o.match(n);if(h){const u=o.search(n),c=u+h[0].length;r.visualPart=h[0],r.visualPart=r.visualPart.replace(/#/g,""),o=o.substring(0,u)+o.substring(c)}}r.bareFormatWithPlaceholders=o;const a=[e,i,s];for(const h of a)for(;h.lastIndex=0,!!h.test(r.bareFormatWithPlaceholders);){const u=R.ColorPlaceholderStart.codePointAt(0),c=R.ColorPlaceholderEnd.codePointAt(0);if(u===void 0||c===void 0)throw new Error("Unexpected format characters.");const d=u+r.colorPlaceholderValues.length;if(d>c)throw new Error("Too many visual tags. You can specify at most 256 tags.");const f=r.bareFormatWithPlaceholders.match(h);if(f){const C=r.bareFormatWithPlaceholders.search(h),p=C+f[0].length;let w=f[0];w=w.replace(/#/g,""),r.colorPlaceholderValues.push(w),r.bareFormatWithPlaceholders=r.bareFormatWithPlaceholders.substring(0,C)+String.fromCodePoint(d)+r.bareFormatWithPlaceholders.substring(p)}}return r}class T{constructor(t){this.thousandsSeparator=t.thousandsSeparator||T.DefaultThousandSeparator,this.decimalSeparator=t.decimalSeparator||T.DefaultDecimalSeparator,this.nanString=t.nanString||T.DefaultNaNString,this.positiveInfinity=t.positiveInfinity||T.DefaultPositiveInfinity,this.negativeInfinity=t.negativeInfinity||T.DefaultNegativeInfinity}}T.DefaultThousandSeparator=",",T.DefaultDecimalSeparator=".",T.DefaultNaNString="NaN",T.DefaultPositiveInfinity="Infinity",T.DefaultNegativeInfinity="-Infinity";class D extends B{constructor(t,e,i,s,n,r,o,a,h,u,c,d){super(),this.effectivelyEmpty=t,this.escapedFormat=e,this.visualPart=i,this.escapedFormatNoVisuals=s,this.wholePart=n,this.fractionPart=r,this.colorPlaceholderValues=o,this.colors=a,this.percent=h,this.scaling=u,this.thousandsSeparators=c,this.hasDecimal=d}static doubleToString(t,e){const i=Object.is(t,-0),s=t.toFixed(e);return i?"-"+s:s}static leftPad(t,e,i){return String(t).padStart(e,i)}static roundInternal(t,e){if(e>0){const i=Math.min(e+10,20),s=new RegExp("(-?\\d*)\\.(\\d{"+e+"})(\\d)\\d*$"),n=t.toFixed(i).match(s);if(n?.length){const r=n[1].charAt(0)==="-"?-1:1,o=D.leftPad(Math.round(n[2]+"."+n[3]),e,"0");return o.length>e?Number(n[1])+r:+(n[1]+"."+o)}}return t}static round(t,e){if(e===0){const i=t<0?-1:1;return Math.round(t*i)*i}else return D.roundInternal(t,e)}static numberHasValue(t){return t!=null}prepareValueToFormat(t){let e=t;this.percent&&(e*=100);for(let o=0;o<this.scaling;o++)e/=1e3;const i=Math.min(20,this.fractionPart.getDigits());e=D.round(e,i);const s=D.doubleToString(e,i);let n="",r="";if(s==="")return{valueToFormat:e,wholePart:n,fractionPart:r};if(this.fractionPart.getDigits()){const o=s.indexOf(".");(0,H.kG)(o!==-1,"Decimal separator not found in the numberString."),n=s.substring(0,o),r=s.substring(o+1)}else n=s,r="";return this.wholePart.getDigits()===0?n==="0"?n="":n==="-0"&&(this.hasDecimal?n="-":n=""):!this.hasDecimal&&n==="-0"&&(n="0"),{valueToFormat:e,wholePart:n,fractionPart:r}}isLiteral(){return this.wholePart.getPlacements()+this.fractionPart.getPlacements()===0}doFormat(t,e,i){let s="";if(e!==null)if(!this.effectivelyEmpty&&this.isLiteral())s=t.options.includeColors?this.escapedFormat:this.escapedFormatNoVisuals;else{let n=e;t.formatAbsoluteValue&&D.numberHasValue(e)&&(n=Math.abs(e));const r=this.prepareValueToFormat(n),o=this.thousandsSeparators?t.constants.thousandsSeparator:ot.NoThousandsSeparators,a=t.options.includeColors?this.colorPlaceholderValues:void 0,h=this.wholePart.format(r.wholePart,o,a),u=new xt,c=this.fractionPart.format(r.fractionPart,u,a);t.options.includeColors&&(s+=this.visualPart),s+=h,c.length&&((u.placedDigits>0||t.options.legacyCompatibility&&u.placedEscapedCharacters||t.options.legacyCompatibility&&u.placedLiteralDigits)&&(s+=t.constants.decimalSeparator),s+=c)}if(i!==void 0){i.colors.color=this.colors.color,i.colors.customColor=this.colors.customColor,i.colors.customBgColor=this.colors.customBgColor;const n=this.doResolve(new X(t.options,t.formatAbsoluteValue),e);n!==null?i.effectiveFormat=n:i.effectiveFormat=void 0}return s}doResolve(t,e){return e===null&&!t.nestedFormatter?"":t.options.includeColors?this.escapedFormat:this.escapedFormatNoVisuals}static compile(t,e){const i=Tt(t,e);let s="",n="",r=!1,o=!1,a=0;const h=[new gt,new gt],u=[0,0],c=[new Ct,new Ct(!0)],d=[0,0],f=[new mt,new mt],C=[new wt,new wt(!0)],p=[[],[]];let w=!1;for(let b=0;b<i.bareFormatWithPlaceholders.length;b++){const E=i.bareFormatWithPlaceholders[b];if(!w&&E==="\\"){w=!0;continue}if(E==="\r"||E===`
`)continue;const P=new R(E,w),L=P.getColorPlaceholderIndex();if(w=!1,L>=0?(s+=i.colorPlaceholderValues[L],a===0&&(i.colorPlaceholderValues[L]=i.colorPlaceholderValues[L].split("").reverse().join(""))):(s+=E,n+=E),P.isDecimal()){a===0&&a++,o=!0;continue}P.isPercent()&&(r=!0),P.isComma()?p[a].push(h[a].length()):(h[a].append(P),u[a]++),f[a].onCharacter(P),C[a].onCharacter(P),P.isPlacement()&&d[a]++,(!P.isComma()||a===1&&!u[1])&&c[a].onCharacter(P)}w&&(h[a].append(new R("\\")),s+="\\",n+="\\");const g=i.visualPart+s,S=f[0].isMatched()||f[1].isMatched(),N=C[0].scaling()+C[1].scaling();for(let b=0;b<2;b++)if(!(S||C[b].scaling()!==0))for(let E=p[b].length-1;E>=0;--E)h[b].insert(p[b][E],new R(","));const v=new ot(h[0],c[0].count(),d[0]),F=new Et(h[1],c[1].count(),d[1]);return new D(s.length===0,g,i.visualPart,n,v,F,i.colorPlaceholderValues,i.colors,r,N,S,o)}}class Nt{constructor(t){this.matchers=t}splitAlternatives(t){let e="",i=!1;const s=[],n=new Q(t,0,t.length);for(;n.hasNext();){const r=n.next();if(r==="\\"){i=!0,e+=r;continue}if(r===";"&&!i){s.push(e),e="";continue}e+=r,i=!1}return s.push(e),s}truncatedStringLiteral(t){const e=t.search("\0");return e>=0?t.substring(0,e):t}compileFormatter(t){let e=this.truncatedStringLiteral(t);e=e.replace(new RegExp(this.matchers.getExcelFormatSuffixMatcher(),"gi"),"");let i;try{if(this.matchers.getArithmeticMatcher().test(e))i=x.compile(this.matchers,this,e);else{const s=this.splitAlternatives(e);s.length===1&&!this.matchers.getConditionMatcher().test(e)?i=D.compile(this.matchers,e):i=J.compile(this.matchers,this,s)}}catch(s){if(St(s))i=D.compile(this.matchers,j);else throw console.error(s),s}return new Rt(i)}}class Rt extends B{constructor(t){super(),this.decorated=t}doFormat(t,e,i){return e===null?this.decorated.doFormat(t,e,i):Number.isNaN(e)?t.constants.nanString:Number.isFinite(e)?this.decorated.doFormat(t,e,i):e<0?t.constants.negativeInfinity:t.constants.positiveInfinity}doResolve(t,e){return Number.isNaN(e)?"":this.decorated.doResolve(t,e)}}class Dt{constructor(){this.matchers=new m,this.factory=new Nt(this.matchers)}compileFormatter(t){return this.factory.compileFormatter(t)}}const Ot=200;class W{static convertValue(t){return t===null?null:t===void 0?NaN:typeof t=="number"?t:parseFloat(t)}static formatValue(t,e=j,i){const s=new Dt,n=new it;n.decimalSeparator=i?.decimal,n.thousandsSeparator=i?.thousand,n.includeColors=!1;const r=new ut;try{let o=W.cache.get(e);o||(o=s.compileFormatter(e),W.cache.set(e,o));const a=o.format(t,n,r);return{colors:new ct(r.colors),formattedValue:a,nullConditionFormatter:r.nullConditionFormatter,effectiveFormat:r.effectiveFormat,resolvedFormat:o.resolve(t,n)}}catch{r.reset();let a=W.cache.get(j);a||(a=s.compileFormatter(e),W.cache.set(j,a));const h=a.format(t,n,r);return{colors:new ct(r.colors),formattedValue:h,nullConditionFormatter:r.nullConditionFormatter,effectiveFormat:r.effectiveFormat,resolvedFormat:a.resolve(t,n)}}}}W.cache=new et({max:Ot})}}]);
