(self.webpackChunkretest_plaugin=self.webpackChunkretest_plaugin||[]).push([[6149],{49029:le=>{var de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function D(Q){return Q.match(de)||[]}le.exports=D},18674:le=>{function de(D){return function(Q){return D?.[Q]}}le.exports=de},36128:(le,de,D)=>{var Q=D(20731),J=D(21078),se=D(45652);function me(X,ae,ge){var ce=X.length;if(ce<2)return ce?se(X[0]):[];for(var he=-1,Le=Array(ce);++he<ce;)for(var Pe=X[he],F=-1;++F<ce;)F!=he&&(Le[he]=Q(Le[he]||Pe,X[F],ae,ge));return se(J(Le,1),ae,ge)}le.exports=me},35393:(le,de,D)=>{var Q=D(62663),J=D(53816),se=D(58748),me="['\u2019]",X=RegExp(me,"g");function ae(ge){return function(ce){return Q(se(J(ce).replace(X,"")),ge,"")}}le.exports=ae},69389:(le,de,D)=>{var Q=D(18674),J={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},se=Q(J);le.exports=se},93157:le=>{var de=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function D(Q){return de.test(Q)}le.exports=D},2757:le=>{var de="\\ud800-\\udfff",D="\\u0300-\\u036f",Q="\\ufe20-\\ufe2f",J="\\u20d0-\\u20ff",se=D+Q+J,me="\\u2700-\\u27bf",X="a-z\\xdf-\\xf6\\xf8-\\xff",ae="\\xac\\xb1\\xd7\\xf7",ge="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ce="\\u2000-\\u206f",he=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",F=ae+ge+ce+he,it="['\u2019]",wt="["+F+"]",Ft="["+se+"]",Oe="\\d+",jt="["+me+"]",ne="["+X+"]",Ye="[^"+de+F+Oe+me+X+Le+"]",Yt="\\ud83c[\\udffb-\\udfff]",Qt="(?:"+Ft+"|"+Yt+")",At="[^"+de+"]",Qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Xe="[\\ud800-\\udbff][\\udc00-\\udfff]",ee="["+Le+"]",Je="\\u200d",ot="(?:"+ne+"|"+Ye+")",Dt="(?:"+ee+"|"+Ye+")",kt="(?:"+it+"(?:d|ll|m|re|s|t|ve))?",Pt="(?:"+it+"(?:D|LL|M|RE|S|T|VE))?",Tt=Qt+"?",Ot="["+Pe+"]?",lt="(?:"+Je+"(?:"+[At,Qe,Xe].join("|")+")"+Ot+Tt+")*",st="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Rt=Ot+Tt+lt,at="(?:"+[jt,Qe,Xe].join("|")+")"+Rt,Mt=RegExp([ee+"?"+ne+"+"+kt+"(?="+[wt,ee,"$"].join("|")+")",Dt+"+"+Pt+"(?="+[wt,ee+ot,"$"].join("|")+")",ee+"?"+ot+"+"+kt,ee+"+"+Pt,Xt,st,Oe,at].join("|"),"g");function Jt(en){return en.match(Mt)||[]}le.exports=Jt},68929:(le,de,D)=>{var Q=D(48403),J=D(35393),se=J(function(me,X,ae){return X=X.toLowerCase(),me+(ae?Q(X):X)});le.exports=se},53816:(le,de,D)=>{var Q=D(69389),J=D(79833),se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,me="\\u0300-\\u036f",X="\\ufe20-\\ufe2f",ae="\\u20d0-\\u20ff",ge=me+X+ae,ce="["+ge+"]",he=RegExp(ce,"g");function Le(Pe){return Pe=J(Pe),Pe&&Pe.replace(se,Q).replace(he,"")}le.exports=Le},21804:(le,de,D)=>{var Q=D(35393),J=Q(function(se,me,X){return se+(X?"-":"")+me.toLowerCase()});le.exports=J},58748:(le,de,D)=>{var Q=D(49029),J=D(93157),se=D(79833),me=D(2757);function X(ae,ge,ce){return ae=se(ae),ge=ce?void 0:ge,ge===void 0?J(ae)?me(ae):Q(ae):ae.match(ge)||[]}le.exports=X},72905:(le,de,D)=>{var Q=D(34963),J=D(5976),se=D(36128),me=D(29246),X=D(10928),ae=J(function(ge){var ce=X(ge);return ce=typeof ce=="function"?ce:void 0,se(Q(ge,me),void 0,ce)});le.exports=ae},56149:(le,de,D)=>{D.r(de),D.d(de,{AttributeDatasetInfo:()=>Gd,AttributeDisplayFormSelect:()=>Zd,AttributeFilter:()=>Rd,AttributeFilterAllValuesFilteredResult:()=>yo,AttributeFilterButton:()=>Md,AttributeFilterButtonToolip:()=>so,AttributeFilterConfigurationButton:()=>Ud,AttributeFilterDeleteButton:()=>_d,AttributeFilterDependencyTooltip:()=>Xd,AttributeFilterDropdownActions:()=>mo,AttributeFilterDropdownBody:()=>uo,AttributeFilterDropdownButton:()=>qt,AttributeFilterElementsActions:()=>Ao,AttributeFilterElementsSearchBar:()=>go,AttributeFilterElementsSelect:()=>fo,AttributeFilterElementsSelectError:()=>bo,AttributeFilterElementsSelectItem:()=>ho,AttributeFilterElementsSelectLoading:()=>vo,AttributeFilterEmptyAttributeResult:()=>Eo,AttributeFilterEmptyResult:()=>Io,AttributeFilterEmptySearchResult:()=>ir,AttributeFilterError:()=>co,AttributeFilterFilteredStatus:()=>or,AttributeFilterLoading:()=>ao,AttributeFilterSelectionStatus:()=>lr,AttributeFilterSimpleDropdownButton:()=>To,AttributeFilterSimpleDropdownButtonWithSelection:()=>Oo,AttributeFilterStatusBar:()=>Fo,DateFilter:()=>_e,DateFilterHelpers:()=>Ko,EmptyElementsSearchBar:()=>qd,MeasureValueFilter:()=>ja,MeasureValueFilterDropdown:()=>Ei,RankingFilter:()=>Di,RankingFilterDropdown:()=>Ai,SingleSelectionAttributeFilterElementsSelectItem:()=>Do,SingleSelectionAttributeFilterStatusBar:()=>ko,defaultDateFilterOptions:()=>Pe,filterVisibleDateFilterOptions:()=>at,getLocalizedIcuDateFormatPattern:()=>dl,isAbsoluteDateFilterOption:()=>ot,isRelativeDateFilterOption:()=>Dt,isUiRelativeDateFilterForm:()=>Je,isWarningMessage:()=>vi,newAttributeFilterHandler:()=>to,useAttributeFilterContext:()=>It,useAttributeFilterController:()=>lo,useAttributeFilterHandler:()=>ro,useAttributeFilterSearch:()=>Qd,useAutoOpenAttributeFilterDropdownButton:()=>jd,useOnCloseAttributeFilterDropdownButton:()=>Yd});const Q={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var J=D(30381);const se="YYYY-MM-DD",me="YYYY-MM-DD HH:mm",X="HH:mm",ae=", HH:mm",ge="00:00",ce="23:59",he="MM/dd/yyyy",Le=he+ae,Pe={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:J().subtract(1,"month").startOf("day").format(se),to:J().startOf("day").format(se),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}};var F=D(53244),it=D(47037),wt=D(47960);const Ft=(t,e=se)=>wt(t)?J(t).local().format(e):t,Oe=t=>it(t)?new Date(J(t,me).format()):t;var jt=D(50049);const ne=(0,jt.vU)({minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},incorrectFormat:{id:"filters.staticPeriod.incorrectFormat"},endDateBeforeStartDate:{id:"filters.staticPeriod.endDateBeforeStartDate"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"}}),Ye=t=>{const e={};return t.visible||(e[t.type]={}),e},Yt=t=>{const e=Ye(t);if(["from","to"].forEach(r=>{t[r]||(e.absoluteForm=e.absoluteForm||{},t[r]===void 0&&(e.absoluteForm[r]=ne.incorrectFormat.id))}),!e.absoluteForm){const r=Oe(t.from),o=Oe(t.to);r>o&&(e.absoluteForm={to:ne.endDateBeforeStartDate.id})}return e.absoluteForm?e:{}},Qt=t=>{const e=Ye(t);return["from","to"].forEach(r=>{t[r]===void 0&&(e.relativeForm=e.relativeForm||{})}),e.relativeForm?e:{}},At=t=>(0,F.isAbsoluteDateFilterForm)(t)?Yt(t):(0,F.isRelativeDateFilterForm)(t)?Qt(t):Ye(t),Qe=(t,e)=>{if(!t||!e||(0,F.isAllTimeDateFilterOption)(t)||(0,F.isAbsoluteDateFilterForm)(t)||(0,F.isAbsoluteDateFilterPreset)(t)||(0,F.isRelativeDateFilterForm)(t))return t;if((0,F.isRelativeDateFilterPreset)(t)){const{from:n,to:r}=t,o=r===0&&n<r;return{...t,from:o?t.from-1:t.from,to:o?-1:r}}else throw new Error("Unknown date filter value type")},Xe=t=>t.visible&&(0,F.isRelativeDateFilterPreset)(t)?t.to===0&&t.from<t.to:!1;var ee=D(41609);const Je=t=>!ee(t)&&t.type==="relativeForm",ot=t=>(0,F.isAbsoluteDateFilterForm)(t)||(0,F.isAbsoluteDateFilterPreset)(t),Dt=t=>(0,F.isRelativeDateFilterForm)(t)||(0,F.isRelativeDateFilterPreset)(t),kt=(t,e)=>({absoluteDateFilter:{dataSet:e,from:t.from,to:t.to}}),Pt=(t,e)=>({relativeDateFilter:{dataSet:e,from:t.from,to:t.to,granularity:t.granularity}}),Tt=(t,e,n)=>{const r=Qe(t,n);if((0,F.isAllTimeDateFilterOption)(r))return null;if(ot(r))return kt(r,e);if(Dt(r))return Pt(r,e);throw new Error("Unknown date filter value provided")};function Ot(t){return Je(t)||(0,F.isRelativeDateFilterPreset)(t)?t.granularity:void 0}function lt(t){return t?.visible}function st(t){return lt(t)?t:void 0}function Xt(t){return Object.keys(t).reduce((e,n)=>{const o=t[n].filter(lt);return o.length&&(e[n]=o),e},{})}function Rt(t){const{absoluteForm:e,absolutePreset:n,allTime:r,relativeForm:o,relativePreset:i}=t;return{...r&&{allTime:r},...e&&{absoluteForm:e},...!ee(n)&&{absolutePreset:n},...o&&{relativeForm:o},...!ee(i)&&{relativePreset:i}}}function at(t){const e=st(t.allTime),n=st(t.absoluteForm),r=st(t.relativeForm),o=t.absolutePreset?.filter(lt),i=t.relativePreset&&Xt(t.relativePreset);return Rt({allTime:e,absoluteForm:n,absolutePreset:o,relativeForm:r,relativePreset:i})}function Mt(t){return t.from>t.to?{...t,from:t.to,to:t.from}:t}function Jt(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return e[n]=r.map(Mt),e},{})}function en(t){const e=t.absolutePreset?.map(Mt),n=t.relativePreset&&Jt(t.relativePreset);return Rt({...t,absolutePreset:e,relativePreset:n})}var We=D(15616),$e=D(48403),ie=D(2525);const Mo=(t,e)=>{const n=We(t,X),r=We(e,X);return n===r?n:`${n} \u2013 ${r}`},No=(t,e)=>t.getHours()===0&&t.getMinutes()===0&&e.getHours()===23&&e.getMinutes()===59,ar=(t,e,n=ge)=>it(t)&&e&&t.split(" ").length===1?`${t} ${n}`:t,tn=(t,e,n)=>{const r=n.includes(X),o=n.replace(ae,""),i=ar(t,r,ge),s=ar(e,r,ce),a=Oe(i),c=Oe(s),m=No(a,c);if(J(a).isSame(c,"day"))return r&&!m?`${We(a,o)}, ${Mo(a,c)}`:We(a,o);const g=m?o:n,p=We(a,g),E=We(c,g);return`${p} \u2013 ${E}`},Lo=[{predicate:(t,e)=>t===0&&e===0,formatter:(t,e,n,r)=>r.formatMessage(ne[`this${$e(n)}`])},{predicate:(t,e)=>t===1&&e===1,formatter:(t,e,n,r)=>r.formatMessage(ne[`next${$e(n)}`])},{predicate:(t,e)=>t===-1&&e===-1,formatter:(t,e,n,r)=>r.formatMessage(ne[`last${$e(n)}`])},{predicate:t=>t===0,formatter:(t,e,n,r)=>r.formatMessage(ne[`nextN${$e(n)}s`],{n:Math.abs(e)+1})},{predicate:(t,e)=>e===0,formatter:(t,e,n,r)=>r.formatMessage(ne[`lastN${$e(n)}s`],{n:Math.abs(t)+1})},{predicate:(t,e)=>t<0&&t===e,formatter:(t,e,n,r)=>r.formatMessage(ne[`${n}s.past.sameValue`],{value:Math.abs(t)})},{predicate:(t,e)=>t>0&&t===e,formatter:(t,e,n,r)=>r.formatMessage(ne[`${n}s.future.sameValue`],{value:Math.abs(t)})},{predicate:(t,e)=>t<0&&e<0,formatter:(t,e,n,r)=>r.formatMessage(ne[`${n}s.past`],{from:Math.abs(t),to:Math.abs(e)})},{predicate:(t,e)=>t>0&&e>0,formatter:(t,e,n,r)=>r.formatMessage(ne[`${n}s.future`],{from:Math.abs(t),to:Math.abs(e)})},{predicate:()=>!0,formatter:(t,e,n,r)=>r.formatMessage(ne[`${n}s.mixed`],{from:Math.abs(t),to:Math.abs(e)})}],nn=(t,e,n,r)=>{const o=Q[n],{formatter:i}=Lo.find(s=>s.predicate(t,e));return i(t,e,o,r)},Bo=t=>t.formatMessage({id:"filters.allTime.title"}),Ho=(t,e)=>t.from&&t.to?tn(t.from,t.to,e):"",Wo=(t,e)=>tn(t.from,t.to,e),Vo=(t,e)=>typeof t.from=="number"&&typeof t.to=="number"?nn(t.from,t.to,t.granularity,e):"",zo=(t,e)=>nn(t.from,t.to,t.granularity,e),cr=(t,e,n)=>{if((0,F.isAbsoluteDateFilterForm)(t)||(0,F.isRelativeDateFilterForm)(t))return rn(t,e,n);if((0,F.isAllTimeDateFilterOption)(t)||(0,F.isAbsoluteDateFilterPreset)(t)||(0,F.isRelativeDateFilterPreset)(t))return t.name||rn(t,e,n);throw new Error("Unknown DateFilterOption type")},ur=(t,e,n=he)=>{const r=(0,ie.getIntl)(e);return cr(t,r,n)},Zo=(t,e,n=he)=>cr(t,e,n),rn=(t,e,n)=>{if((0,F.isAbsoluteDateFilterForm)(t))return Ho(t,n);if((0,F.isAbsoluteDateFilterPreset)(t))return Wo(t,n);if((0,F.isAllTimeDateFilterOption)(t))return Bo(e);if((0,F.isRelativeDateFilterForm)(t))return Vo(t,e);if((0,F.isRelativeDateFilterPreset)(t))return zo(t,e);throw new Error("Unknown DateFilterOption type")},Ko={validateFilterOption:At,getDateFilterTitle:ur,getDateFilterTitleUsingTranslator:Zo,getDateFilterRepresentation:(t,e,n=he)=>{const r=(0,ie.getIntl)(e);return rn(t,r,n)},granularityIntlCodes:Q,applyExcludeCurrentPeriod:Qe,defaultDateFilterOptions:Pe,canExcludeCurrentPeriod:Xe,mapOptionToAfm:Tt,formatAbsoluteDateRange:tn,formatRelativeDateRange:nn,filterVisibleDateFilterOptions:at};var l=D(59882),Re=D(18446),ct=D(14293),we=D(50308),dr=D(59242),mr=D(1852),Nt=D(25356),T=D(65165);const Uo="only screen",gr=(t=>`${Uo} and (min-width:${t.lower}px) and (max-width:${t.upper}px)`)({lower:0,upper:640});var U=D(44012),B=D(93967);const $o=[{align:"bc tl",offset:{x:0,y:5}}],fr=({customIcon:t,disabled:e})=>{if(!t)return null;const{icon:n,tooltip:r,bubbleClassNames:o,bubbleAlignPoints:i}=t,s=B(["gd-filter-button-custom-icon-wrapper","s-gd-filter-button-custom-icon-wrapper"],{"disabled s-disabled":e});return l.createElement("div",{className:s},l.createElement(T.BubbleHoverTrigger,null,l.createElement("i",{className:`gd-filter-button-custom-icon s-gd-filter-button-custom-icon ${n}`}),l.createElement(T.Bubble,{className:`bubble-primary ${o||""}`,alignPoints:i||$o},r)))},_o=({isOpen:t,isMobile:e,title:n,children:r,disabled:o,customIcon:i})=>l.createElement("div",{className:B("s-date-filter-button","gd-date-filter-button","dropdown-button",e&&"gd-date-filter-button-mobile",t&&"is-active",o&&"disabled")},l.createElement("div",{className:"button-content"},l.createElement("div",{className:"s-date-filter-title button-title"},n),l.createElement("div",{className:"button-subtitle"},r)),l.createElement(fr,{customIcon:i,disabled:o}));var be=D(74806);const Go=({dateFormat:t,filter:e,intl:n})=>l.createElement(l.Fragment,null,ur(e,(0,ie.resolveLocale)(n.locale),t)),on=(0,be.ZP)(Go),qo=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],jo=({dateFilterOption:t,dateFormat:e,isOpen:n=!1,isMobile:r=!0,customFilterName:o,disabled:i,customIcon:s})=>{const a=o?l.createElement(T.ShortenedText,{tooltipAlignPoints:qo},o):l.createElement(U.Z,{id:"dateFilterDropdown.title"});return l.createElement(_o,{title:a,isOpen:n,isMobile:r,disabled:i,customIcon:s},l.createElement("span",{className:"s-button-text"},l.createElement(on,{filter:t,dateFormat:e})))},Yo=(0,Nt.b)(mr),ut=({isSelected:t,className:e,children:n,...r})=>l.createElement(l.Fragment,null,l.createElement("button",{className:B("gd-list-item","gd-filter-list-item",{"is-selected":t,"gd-filter-list-item-selected":t},e),...r},n,t?l.createElement(Yo,{query:gr},l.createElement(T.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})):null)),Qo=t=>{const e=!t.disabled&&t.granularity?ne[`${Q[t.granularity]}Excluded`].id:ne.allTimeExcluded.id;return l.createElement(U.Z,{id:e},(...n)=>l.createElement("span",{className:"input-label-text"},n))},Xo=[{align:"tc bc"}],Jo=({value:t,onChange:e,disabled:n,granularity:r})=>l.createElement("div",{className:"gd-extended-date-filter-exclude-current"},l.createElement(T.BubbleHoverTrigger,null,l.createElement("label",{className:B("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!n,"s-exclude-current-perod-disabled":n})},l.createElement("input",{type:"checkbox",className:"input-checkbox",checked:t,onChange:o=>e(o.target.checked),disabled:n}),"\u2002",l.createElement(Qo,{granularity:r,disabled:n})),n?l.createElement(T.Bubble,{alignPoints:Xo},l.createElement(U.Z,{id:"filters.excludeCurrentPeriod.unavailable"})):null)),el=({className:t,children:e,...n})=>l.createElement("div",{className:B("gd-visible-scrollbar",t),...n},e),tl=({className:t,filterOption:e,selectedFilterOption:n,onSelectedFilterOptionChange:r})=>l.createElement(ut,{isSelected:e.localIdentifier===n.localIdentifier,onClick:()=>r(e),className:B("s-all-time",t)},e.name?e.name:l.createElement(U.Z,{id:"filters.allTime.title"})),pr=({children:t,isMobile:e,className:n,...r})=>l.createElement("div",{className:B(n,"gd-date-filter-form-wrapper",!e&&"gd-date-filter-form-wrapper-desktop"),...r},l.createElement("div",{className:"gd-date-filter-form-wrapper-inner"},t));var nl=D(12595);const rl=(t,e)=>t?{modifiers:{...t,...e}}:void 0,il=(t,e)=>({...t,...e,...rl(t.modifiers,e.modifiers)}),ol=(t,e)=>e?il(t,e):t,om=(t,e)=>t&&e?moment(t).isAfter(moment(e)):!1,ll=t=>J(t).format(se),sl=t=>J(t).format(X);var al=D(2498);const cl=t=>{const e=J().locale(al.Z(t));return(e?.localeData&&e.localeData())?._longDateFormat?.L},ul="en-US",hr={"en-US":"M/d/y","en-GB":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","ru-RU":"dd.MM.y"},dl=t=>hr[t]??hr[ul],ml=t=>{const{dateFormat:e,errorId:n,intl:r}=t;return l.createElement("div",{className:"gd-date-range-picker-error-message s-absolute-range-error"},l.createElement(U.Z,{id:n,values:{format:e||cl(r.locale)}}))},gl=(0,be.ZP)(ml);var fl=D(39989),pl=D(91884);class hl extends l.Component{inputRef=l.createRef();invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()};blur=()=>this.invokeInputMethod("blur");focus=()=>this.invokeInputMethod("focus");get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return l.createElement("span",{className:B(e)},l.createElement("span",{className:"gd-icon-calendar"}),l.createElement("input",{...this.props,ref:this.inputRef,className:"input-text s-date-range-picker-input-field"}))}}function ln(t,e){return We(t,e)}function bl(t,e){try{const n=pl(t,e,new Date);return fl(n)&&n.getFullYear()>=1e3&&t===ln(n,e)?n:void 0}catch{return}}const br=l.forwardRef((t,e)=>{const{placeholderDate:n,value:r,onChange:o,dateFormat:i,handleDayClick:s,isMobile:a,isTimeEnabled:c,onKeyDown:m,className:g,error:p=!1}=t,[E,y]=(0,l.useState)(sl(r)),[k,f]=(0,l.useState)(ln(r,i));(0,l.useEffect)(()=>{f(ln(r,i))},[r,i]);const I=v=>{if(c&&v){const u=r??J(E,X).toDate();v.setHours(u.getHours()),v.setMinutes(u.getMinutes())}return v},A=v=>{o(I(v))},d=v=>{f(v);const u=bl(v,i);A(u)},b=v=>{const u=r??new Date,C=J(v,X);C.isValid()&&(u.setHours(C.hours()),u.setMinutes(C.minutes()),y(v)),o(u)};return l.createElement("div",{className:B(g,c&&"gd-flex-row")},a?l.createElement(hl,{type:"date",className:B("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",p&&"gd-date-range-picker-input-error"),placeholder:n,onChange:v=>A(Oe(v.target.value)),value:ll(r)}):l.createElement("div",{className:B("gd-date-range-picker-input",p&&"gd-date-range-picker-input-error")},l.createElement("span",null,l.createElement("span",{className:"gd-icon-calendar"}),l.createElement("input",{onKeyDown:m,ref:e,placeholder:n,onChange:v=>d(v.target.value),onClick:s,onFocus:s,value:k,className:"input-text s-date-range-picker-input-field"}))),c?l.createElement("span",{className:B("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",p&&"gd-date-range-picker-input-error")},l.createElement("span",{className:"gd-icon-clock"}),l.createElement("input",{type:"time",className:"input-text",onChange:v=>b(v.target.value),value:E})):null)});br.displayName="DateTimePickerComponent";const sn=(0,be.ZP)(br,{forwardRef:!0});sn.displayName="DateTimePicker";var vl=D(82512),El=D(76119),Cl=D(19962),Sl=D(63126),yl=D(42180),Il=D(70390),xl=D(63086),wl=D(81333),Fl=D(24602),Al=D(66754);const Dl={"en-US":vl,"de-DE":El,"es-ES":Cl,"fr-FR":Sl,"ja-JP":yl,"nl-NL":Il,"pt-BR":wl,"pt-PT":xl,"zh-Hans":Fl,"ru-RU":Al},kl=[{align:"bl tl",offset:{x:0,y:1}}];function Pl(t){return Dl[t]}function Tl(t){switch(t){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${t}`)}}class Ol extends l.Component{dateRangePickerInputFrom=l.createRef();dateRangePickerInputTo=l.createRef();dateRangePickerContainer=l.createRef();constructor(e){super(e),this.state={isOpen:!1,inputFromValue:this.props.range.from,inputToValue:this.props.range.to,selectedRange:{from:this.props.range.from,to:this.props.range.to},monthDate:null,selectedInput:null},this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleRangeSelect=this.handleRangeSelect.bind(this),this.handleFromDayClick=this.handleFromDayClick.bind(this),this.handleToDayClick=this.handleToDayClick.bind(this),this.handleFromChange=this.handleFromChange.bind(this),this.handleToChange=this.handleToChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){const{dateFormat:e,range:{from:n,to:r},dayPickerProps:o,intl:i,isMobile:s,errors:{from:a,to:c}={from:void 0,to:void 0},isTimeEnabled:m,weekStart:g="Sunday",shouldOverlayDatePicker:p=!1}=this.props,E={mode:"range",showOutsideDays:!0,modifiers:{start:n,end:r},selected:{from:n,to:r},locale:Pl(i.locale)},y=ol(E,o),k={root:`gd-date-range-picker-picker s-date-range-calendar-${this.state.selectedInput}`},f=l.createElement("div",{className:"gd-date-range-picker-wrapper",ref:this.dateRangePickerContainer},l.createElement(nl._W,{...y,onSelect:this.handleRangeSelect,selected:this.state.selectedRange,month:this.state.monthDate,classNames:k,onMonthChange:this.handleMonthChanged,weekStartsOn:Tl(g)})),I=l.createElement(T.Overlay,{alignTo:`.gd-date-range-picker-${m?this.state.selectedInput:"from"}`,alignPoints:kl,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0},f),A=l.createElement(sn,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputFrom,placeholderDate:i.formatMessage({id:"filters.from"}),onChange:this.handleFromChange,value:this.state.inputFromValue,dateFormat:e,isMobile:s,handleDayClick:this.handleFromDayClick,isTimeEnabled:m,className:B("s-date-range-picker-from","gd-date-range-picker-from"),error:typeof a<"u"}),d=l.createElement(sn,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputTo,placeholderDate:i.formatMessage({id:"filters.to"}),onChange:this.handleToChange,value:this.state.inputToValue,dateFormat:e,isMobile:s,handleDayClick:this.handleToDayClick,isTimeEnabled:m,className:B("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:ce,error:typeof c<"u"}),b=p?I:f,v=this.state.selectedInput==="from"&&this.state.isOpen,u=this.state.selectedInput==="to"&&this.state.isOpen;return l.createElement(l.Fragment,null,m?l.createElement("div",{className:"gd-date-range-picker datetime s-date-range-picker"},l.createElement("label",null,i.formatMessage({id:"filters.from"})),A,v?b:null,l.createElement("label",null,i.formatMessage({id:"filters.to"})),d,u?b:null):l.createElement(l.Fragment,null,l.createElement("div",{className:"gd-date-range-picker gd-flex-row s-date-range-picker"},A,l.createElement("span",{className:"gd-date-range-picker-dash"},"\u2013"),d),this.state.isOpen?b:null),a||c?l.createElement(gl,{dateFormat:e,errorId:a||c}):null)}onKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&this.setState({isOpen:!1})}handleMonthChanged(e){this.setState({monthDate:e})}setTimeForDate(e,n){const r=new Date(e);return r.setHours(n.getHours()),r.setMinutes(n.getMinutes()),r}handleRangeSelect=(e,n)=>{let r,o;this.state.selectedInput=="from"?(r=this.setTimeForDate(n,this.state.inputFromValue),o=this.state.inputToValue):(r=this.state.inputFromValue,o=this.setTimeForDate(n,this.state.inputToValue)),this.setState({inputFromValue:r,inputToValue:o,selectedRange:{from:r,to:o},isOpen:!1},()=>{this.updateRange(r,o)})};handleClickOutside(e){this.dateRangePickerContainer.current&&!this.dateRangePickerContainer.current.contains(e.target)&&this.dateRangePickerInputFrom&&!this.dateRangePickerInputFrom.current.contains(e.target)&&this.dateRangePickerInputTo&&!this.dateRangePickerInputTo.current.contains(e.target)&&this.setState({isOpen:!1})}updateRange=(e,n)=>{this.props.onRangeChange({from:e,to:n})};handleFromDayClick=()=>{this.setState({selectedInput:"from",isOpen:!0,monthDate:this.props.range.from})};handleToDayClick=()=>{this.setState({selectedInput:"to",isOpen:!0,monthDate:this.props.range.to})};handleFromChange=e=>{e&&this.setState({inputFromValue:e}),this.setState({selectedRange:{from:e,to:this.state.selectedRange.to},monthDate:e},()=>{this.updateRange(e,this.state.selectedRange.to)})};handleToChange=e=>{e&&this.setState({inputToValue:e}),this.setState({selectedRange:{from:this.state.selectedRange.from,to:e},monthDate:e},()=>{this.updateRange(this.state.selectedRange.from,e)})}}const Rl=(0,be.ZP)(Ol),Ml=(t,e,n)=>{const r=n?me:se;return{from:Ft(t.from,r),to:Ft(t.to,r),localIdentifier:e,type:"absoluteForm",name:"",visible:!0}},Nl=(t,e=!1)=>{const n=t.from&&t.from.split(" ").length>1,r=t.to&&t.to.split(" ").length>1,o=t&&Oe(t.from),i=t&&Oe(t.to);return o&&!n&&e&&(o.setHours(0),o.setMinutes(0)),i&&!r&&e&&(i.setHours(23),i.setMinutes(59)),{from:o,to:i}},Ll={mode:"range",weekStartsOn:0};class Bl extends l.Component{render(){const{dateFormat:e,isMobile:n,selectedFilterOption:r,errors:o,isTimeEnabled:i,weekStart:s,shouldOverlayDatePicker:a}=this.props;return l.createElement(Rl,{dateFormat:e,onRangeChange:this.handleRangeChange,range:Nl(r,i),errors:o,isMobile:n,dayPickerProps:Ll,isTimeEnabled:i,weekStart:s,shouldOverlayDatePicker:a})}handleRangeChange=e=>{const{selectedFilterOption:n,isTimeEnabled:r}=this.props;this.props.onSelectedFilterOptionChange(Ml(e,n.localIdentifier,r))}}const Hl=({children:t,className:e,bubbleAlignPoints:n,...r})=>l.createElement("span",{className:B("gd-list-item-tooltip",e),...r},l.createElement(T.BubbleHoverTrigger,null,l.createElement("span",{className:"gd-icon-circle-question gd-list-item-tooltip-icon"}),l.createElement(T.Bubble,{alignPoints:n},t)));var Wl=D(89734);const Vl=({className:t,children:e,...n})=>l.createElement("div",{className:B("gd-tabs small is-condensed",t),...n},e),zl=({selected:t,className:e,children:n,...r})=>l.createElement("div",{className:B(t&&"is-active","gd-tab",e),...r},n),Zl={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6},Kl=t=>Wl(t,e=>Zl[e]),Ul=({availableGranularities:t,onSelectedGranularityChange:e,selectedGranularity:n})=>l.createElement(Vl,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs"},Kl(t).map(r=>{const o=Q[r];return l.createElement(zl,{key:r,selected:r===n,onClick:()=>e(r),className:`s-granularity-${o}`},l.createElement(U.Z,{id:ne[o].id}))}));var Ve=D(63366),te=D(87462),et=D(97326),an=D(94578),$l=D(45697),j=D.n($l),fe=D(9155),lm=D(59864);function vr(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function Er(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function cn(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var n=getComputedStyle(t,null);return Er(n.overflowY,e)||Er(n.overflowX,e)||function(r){var o=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}}(r);return!!o&&(o.clientHeight<r.scrollHeight||o.clientWidth<r.scrollWidth)}(t)}return!1}function Lt(t,e,n,r,o,i,s,a){return i<t&&s>e||i>t&&s<e?0:i<=t&&a<=n||s>=e&&a>=n?i-t-r:s>e&&a<n||i<t&&a>n?s-e+o:0}var _l=function(t,e){var n=window,r=e.scrollMode,o=e.block,i=e.inline,s=e.boundary,a=e.skipOverflowHiddenElements,c=typeof s=="function"?s:function(Ne){return Ne!==s};if(!vr(t))throw new TypeError("Invalid target");for(var m,g,p=document.scrollingElement||document.documentElement,E=[],y=t;vr(y)&&c(y);){if((y=(g=(m=y).parentElement)==null?m.getRootNode().host||null:g)===p){E.push(y);break}y!=null&&y===document.body&&cn(y)&&!cn(document.documentElement)||y!=null&&cn(y,a)&&E.push(y)}for(var k=n.visualViewport?n.visualViewport.width:innerWidth,f=n.visualViewport?n.visualViewport.height:innerHeight,I=window.scrollX||pageXOffset,A=window.scrollY||pageYOffset,d=t.getBoundingClientRect(),b=d.height,v=d.width,u=d.top,C=d.right,S=d.bottom,P=d.left,x=o==="start"||o==="nearest"?u:o==="end"?S:u+b/2,O=i==="center"?P+v/2:i==="end"?C:P,R=[],M=0;M<E.length;M++){var N=E[M],H=N.getBoundingClientRect(),z=H.height,W=H.width,K=H.top,re=H.right,oe=H.bottom,$=H.left;if(r==="if-needed"&&u>=0&&P>=0&&S<=f&&C<=k&&u>=K&&S<=oe&&P>=$&&C<=re)return R;var ue=getComputedStyle(N),pe=parseInt(ue.borderLeftWidth,10),V=parseInt(ue.borderTopWidth,10),L=parseInt(ue.borderRightWidth,10),G=parseInt(ue.borderBottomWidth,10),q=0,Se=0,Ae="offsetWidth"in N?N.offsetWidth-N.clientWidth-pe-L:0,Ie="offsetHeight"in N?N.offsetHeight-N.clientHeight-V-G:0,De="offsetWidth"in N?N.offsetWidth===0?0:W/N.offsetWidth:0,xe="offsetHeight"in N?N.offsetHeight===0?0:z/N.offsetHeight:0;if(p===N)q=o==="start"?x:o==="end"?x-f:o==="nearest"?Lt(A,A+f,f,V,G,A+x,A+x+b,b):x-f/2,Se=i==="start"?O:i==="center"?O-k/2:i==="end"?O-k:Lt(I,I+k,k,pe,L,I+O,I+O+v,v),q=Math.max(0,q+A),Se=Math.max(0,Se+I);else{q=o==="start"?x-K-V:o==="end"?x-oe+G+Ie:o==="nearest"?Lt(K,oe,z,V,G+Ie,x,x+b,b):x-(K+z/2)+Ie/2,Se=i==="start"?O-$-pe:i==="center"?O-($+W/2)+Ae/2:i==="end"?O-re+L+Ae:Lt($,re,W,pe,L+Ae,O,O+v,v);var ye=N.scrollLeft,ke=N.scrollTop;x+=ke-(q=Math.max(0,Math.min(ke+q/xe,N.scrollHeight-z/xe+Ie))),O+=ye-(Se=Math.max(0,Math.min(ye+Se/De,N.scrollWidth-W/De+Ae)))}R.push({el:N,top:q,left:Se})}return R},Cr=0;function Sr(t){return typeof t=="function"?t:ze}function ze(){}function yr(t,e){if(t!==null){var n=_l(t,{boundary:e,block:"nearest",scrollMode:"if-needed"});n.forEach(function(r){var o=r.el,i=r.top,s=r.left;o.scrollTop=i,o.scrollLeft=s})}}function Ir(t,e){return t===e||t.contains&&t.contains(e)}function un(t,e){var n;function r(){n&&clearTimeout(n)}function o(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];r(),n=setTimeout(function(){n=null,t.apply(void 0,s)},e)}return o.cancel=r,o}function ve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[r].concat(i)),r.preventDownshiftDefault||r.hasOwnProperty("nativeEvent")&&r.nativeEvent.preventDownshiftDefault})}}function dt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){e.forEach(function(o){typeof o=="function"?o(r):o&&(o.current=r)})}}function Gl(){return String(Cr++)}function sm(){Cr=0}function ql(t){var e=t.isOpen,n=t.selectedItem,r=t.resultCount,o=t.previousResultCount,i=t.itemToString;return e?r?r!==o?r+" result"+(r===1?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":n?i(n):""}function xr(t,e){return t=Array.isArray(t)?t[0]:t,!t&&e?e:t}function wr(t){return typeof t.type=="string"}function Fr(t){return t.props}function am(t,e){console.error('The property "'+e+'" is required in "'+t+'"')}var jl=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function Bt(t){t===void 0&&(t={});var e={};return jl.forEach(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function Ht(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function cm(t){return Object.prototype.toString.call(t)==="[object Object]"}function dn(t,e,n){var r=n-1;(typeof e!="number"||e<0||e>=n)&&(e=t>0?-1:r+1);var o=e+t;return o<0?o=r:o>r&&(o=0),o}var Yl=un(function(){Ar().textContent=""},500);function mn(t,e){var n=Ar(e);t&&(n.textContent=t,Yl())}function Ar(t){t===void 0&&(t=document);var e=t.getElementById("a11y-status-message");return e||(e=t.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var Dr=0,kr=1,Pr=2,gn=3,mt=4,Tr=5,Or=6,Rr=7,Mr=8,Nr=9,Lr=10,Br=11,Hr=12,Wr=13,Vr=14,zr=15,Zr=16,Ql=Object.freeze({__proto__:null,unknown:Dr,mouseUp:kr,itemMouseEnter:Pr,keyDownArrowUp:gn,keyDownArrowDown:mt,keyDownEscape:Tr,keyDownEnter:Or,keyDownHome:Rr,keyDownEnd:Mr,clickItem:Nr,blurInput:Lr,changeInput:Br,keyDownSpaceButton:Hr,clickButton:Wr,blurButton:Vr,controlledPropUpdatedSelectedItem:zr,touchEnd:Zr}),Xl=function(){var t=function(e){(0,an.Z)(n,e);function n(o){var i=e.call(this,o)||this;i.id=i.props.id||"downshift-"+Gl(),i.menuId=i.props.menuId||i.id+"-menu",i.labelId=i.props.labelId||i.id+"-label",i.inputId=i.props.inputId||i.id+"-input",i.getItemId=i.props.getItemId||function(d){return i.id+"-item-"+d},i.input=null,i.items=[],i.itemCount=null,i.previousResultCount=0,i.timeoutIds=[],i.internalSetTimeout=function(d,b){var v=setTimeout(function(){i.timeoutIds=i.timeoutIds.filter(function(u){return u!==v}),d()},b);i.timeoutIds.push(v)},i.setItemCount=function(d){i.itemCount=d},i.unsetItemCount=function(){i.itemCount=null},i.setHighlightedIndex=function(d,b){d===void 0&&(d=i.props.defaultHighlightedIndex),b===void 0&&(b={}),b=Bt(b),i.internalSetState((0,te.Z)({highlightedIndex:d},b))},i.clearSelection=function(d){i.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:i.props.defaultHighlightedIndex,isOpen:i.props.defaultIsOpen},d)},i.selectItem=function(d,b,v){b=Bt(b),i.internalSetState((0,te.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,selectedItem:d,inputValue:i.props.itemToString(d)},b),v)},i.selectItemAtIndex=function(d,b,v){var u=i.items[d];u!=null&&i.selectItem(u,b,v)},i.selectHighlightedItem=function(d,b){return i.selectItemAtIndex(i.getState().highlightedIndex,d,b)},i.internalSetState=function(d,b){var v,u,C={},S=typeof d=="function";return!S&&d.hasOwnProperty("inputValue")&&i.props.onInputValueChange(d.inputValue,(0,te.Z)({},i.getStateAndHelpers(),{},d)),i.setState(function(P){P=i.getState(P);var x=S?d(P):d;x=i.props.stateReducer(P,x),v=x.hasOwnProperty("selectedItem");var O={},R={};return v&&x.selectedItem!==P.selectedItem&&(u=x.selectedItem),x.type=x.type||Dr,Object.keys(x).forEach(function(M){P[M]!==x[M]&&(C[M]=x[M]),M!=="type"&&(R[M]=x[M],i.isControlledProp(M)||(O[M]=x[M]))}),S&&x.hasOwnProperty("inputValue")&&i.props.onInputValueChange(x.inputValue,(0,te.Z)({},i.getStateAndHelpers(),{},x)),O},function(){Sr(b)();var P=Object.keys(C).length>1;P&&i.props.onStateChange(C,i.getStateAndHelpers()),v&&i.props.onSelect(d.selectedItem,i.getStateAndHelpers()),u!==void 0&&i.props.onChange(u,i.getStateAndHelpers()),i.props.onUserAction(C,i.getStateAndHelpers())})},i.rootRef=function(d){return i._rootNode=d},i.getRootProps=function(d,b){var v,u=d===void 0?{}:d,C=u.refKey,S=C===void 0?"ref":C,P=u.ref,x=(0,Ve.Z)(u,["refKey","ref"]),O=b===void 0?{}:b,R=O.suppressRefError,M=R===void 0?!1:R;i.getRootProps.called=!0,i.getRootProps.refKey=S,i.getRootProps.suppressRefError=M;var N=i.getState(),H=N.isOpen;return(0,te.Z)((v={},v[S]=dt(P,i.rootRef),v.role="combobox",v["aria-expanded"]=H,v["aria-haspopup"]="listbox",v["aria-owns"]=H?i.menuId:null,v["aria-labelledby"]=i.labelId,v),x)},i.keyDownHandlers={ArrowDown:function(b){var v=this;if(b.preventDefault(),this.getState().isOpen){var u=b.shiftKey?5:1;this.moveHighlightedIndex(u,{type:mt})}else this.internalSetState({isOpen:!0,type:mt},function(){var C=v.getItemCount();C>0&&v.setHighlightedIndex(dn(1,v.getState().highlightedIndex,C),{type:mt})})},ArrowUp:function(b){var v=this;if(b.preventDefault(),this.getState().isOpen){var u=b.shiftKey?-5:-1;this.moveHighlightedIndex(u,{type:gn})}else this.internalSetState({isOpen:!0,type:gn},function(){var C=v.getItemCount();C>0&&v.setHighlightedIndex(dn(-1,v.getState().highlightedIndex,C),{type:mt})})},Enter:function(b){var v=this.getState(),u=v.isOpen,C=v.highlightedIndex;if(u&&C!=null){b.preventDefault();var S=this.items[C],P=this.getItemNodeFromIndex(C);if(S==null||P&&P.hasAttribute("disabled"))return;this.selectHighlightedItem({type:Or})}},Escape:function(b){b.preventDefault(),this.reset({type:Tr,selectedItem:null,inputValue:""})}},i.buttonKeyDownHandlers=(0,te.Z)({},i.keyDownHandlers,{" ":function(b){b.preventDefault(),this.toggleMenu({type:Hr})}}),i.inputKeyDownHandlers=(0,te.Z)({},i.keyDownHandlers,{Home:function(b){this.highlightFirstOrLastIndex(b,!0,{type:Rr})},End:function(b){this.highlightFirstOrLastIndex(b,!1,{type:Mr})}}),i.getToggleButtonProps=function(d){var b=d===void 0?{}:d,v=b.onClick,u=b.onPress,C=b.onKeyDown,S=b.onKeyUp,P=b.onBlur,x=(0,Ve.Z)(b,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),O=i.getState(),R=O.isOpen,M={onClick:ve(v,i.buttonHandleClick),onKeyDown:ve(C,i.buttonHandleKeyDown),onKeyUp:ve(S,i.buttonHandleKeyUp),onBlur:ve(P,i.buttonHandleBlur)},N=x.disabled?{}:M;return(0,te.Z)({type:"button",role:"button","aria-label":R?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},N,{},x)},i.buttonHandleKeyUp=function(d){d.preventDefault()},i.buttonHandleKeyDown=function(d){var b=Ht(d);i.buttonKeyDownHandlers[b]&&i.buttonKeyDownHandlers[b].call((0,et.Z)(i),d)},i.buttonHandleClick=function(d){d.preventDefault(),i.props.environment.document.activeElement===i.props.environment.document.body&&d.target.focus(),i.internalSetTimeout(function(){return i.toggleMenu({type:Wr})})},i.buttonHandleBlur=function(d){var b=d.target;i.internalSetTimeout(function(){!i.isMouseDown&&(i.props.environment.document.activeElement==null||i.props.environment.document.activeElement.id!==i.inputId)&&i.props.environment.document.activeElement!==b&&i.reset({type:Vr})})},i.getLabelProps=function(d){return(0,te.Z)({htmlFor:i.inputId,id:i.labelId},d)},i.getInputProps=function(d){var b=d===void 0?{}:d,v=b.onKeyDown,u=b.onBlur,C=b.onChange,S=b.onInput,P=b.onChangeText,x=(0,Ve.Z)(b,["onKeyDown","onBlur","onChange","onInput","onChangeText"]),O,R={};O="onChange";var M=i.getState(),N=M.inputValue,H=M.isOpen,z=M.highlightedIndex;if(!x.disabled){var W;R=(W={},W[O]=ve(C,S,i.inputHandleChange),W.onKeyDown=ve(v,i.inputHandleKeyDown),W.onBlur=ve(u,i.inputHandleBlur),W)}return(0,te.Z)({"aria-autocomplete":"list","aria-activedescendant":H&&typeof z=="number"&&z>=0?i.getItemId(z):null,"aria-controls":H?i.menuId:null,"aria-labelledby":i.labelId,autoComplete:"off",value:N,id:i.inputId},R,{},x)},i.inputHandleKeyDown=function(d){var b=Ht(d);b&&i.inputKeyDownHandlers[b]&&i.inputKeyDownHandlers[b].call((0,et.Z)(i),d)},i.inputHandleChange=function(d){i.internalSetState({type:Br,isOpen:!0,inputValue:d.target.value,highlightedIndex:i.props.defaultHighlightedIndex})},i.inputHandleBlur=function(){i.internalSetTimeout(function(){var d=i.props.environment.document&&!!i.props.environment.document.activeElement&&!!i.props.environment.document.activeElement.dataset&&i.props.environment.document.activeElement.dataset.toggle&&i._rootNode&&i._rootNode.contains(i.props.environment.document.activeElement);!i.isMouseDown&&!d&&i.reset({type:Lr})})},i.menuRef=function(d){i._menuNode=d},i.getMenuProps=function(d,b){var v,u=d===void 0?{}:d,C=u.refKey,S=C===void 0?"ref":C,P=u.ref,x=(0,Ve.Z)(u,["refKey","ref"]),O=b===void 0?{}:b,R=O.suppressRefError,M=R===void 0?!1:R;return i.getMenuProps.called=!0,i.getMenuProps.refKey=S,i.getMenuProps.suppressRefError=M,(0,te.Z)((v={},v[S]=dt(P,i.menuRef),v.role="listbox",v["aria-labelledby"]=x&&x["aria-label"]?null:i.labelId,v.id=i.menuId,v),x)},i.getItemProps=function(d){var b,v=d===void 0?{}:d,u=v.onMouseMove,C=v.onMouseDown,S=v.onClick,P=v.onPress,x=v.index,O=v.item,R=O===void 0?void 0:O,M=(0,Ve.Z)(v,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);x===void 0?(i.items.push(R),x=i.items.indexOf(R)):i.items[x]=R;var N="onClick",H=S,z=(b={onMouseMove:ve(u,function(){x!==i.getState().highlightedIndex&&(i.setHighlightedIndex(x,{type:Pr}),i.avoidScrolling=!0,i.internalSetTimeout(function(){return i.avoidScrolling=!1},250))}),onMouseDown:ve(C,function(K){K.preventDefault()})},b[N]=ve(H,function(){i.selectItemAtIndex(x,{type:Nr})}),b),W=M.disabled?{onMouseDown:z.onMouseDown}:z;return(0,te.Z)({id:i.getItemId(x),role:"option","aria-selected":i.getState().highlightedIndex===x},W,{},M)},i.clearItems=function(){i.items=[]},i.reset=function(d,b){d===void 0&&(d={}),d=Bt(d),i.internalSetState(function(v){var u=v.selectedItem;return(0,te.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,inputValue:i.props.itemToString(u)},d)},b)},i.toggleMenu=function(d,b){d===void 0&&(d={}),d=Bt(d),i.internalSetState(function(v){var u=v.isOpen;return(0,te.Z)({isOpen:!u},u&&{highlightedIndex:i.props.defaultHighlightedIndex},{},d)},function(){var v=i.getState(),u=v.isOpen,C=v.highlightedIndex;u&&i.getItemCount()>0&&typeof C=="number"&&i.setHighlightedIndex(C,d),Sr(b)()})},i.openMenu=function(d){i.internalSetState({isOpen:!0},d)},i.closeMenu=function(d){i.internalSetState({isOpen:!1},d)},i.updateStatus=un(function(){var d=i.getState(),b=i.items[d.highlightedIndex],v=i.getItemCount(),u=i.props.getA11yStatusMessage((0,te.Z)({itemToString:i.props.itemToString,previousResultCount:i.previousResultCount,resultCount:v,highlightedItem:b},d));i.previousResultCount=v,mn(u,i.props.environment.document)},200);var s=i.props,a=s.defaultHighlightedIndex,c=s.initialHighlightedIndex,m=c===void 0?a:c,g=s.defaultIsOpen,p=s.initialIsOpen,E=p===void 0?g:p,y=s.initialInputValue,k=y===void 0?"":y,f=s.initialSelectedItem,I=f===void 0?null:f,A=i.getState({highlightedIndex:m,isOpen:E,inputValue:k,selectedItem:I});return A.selectedItem!=null&&i.props.initialInputValue===void 0&&(A.inputValue=i.props.itemToString(A.selectedItem)),i.state=A,i}var r=n.prototype;return r.internalClearTimeouts=function(){this.timeoutIds.forEach(function(i){clearTimeout(i)}),this.timeoutIds=[]},r.getState=function(i){var s=this;return i===void 0&&(i=this.state),Object.keys(i).reduce(function(a,c){return a[c]=s.isControlledProp(c)?s.props[c]:i[c],a},{})},r.isControlledProp=function(i){return this.props[i]!==void 0},r.getItemCount=function(){var i=this.items.length;return this.itemCount!=null?i=this.itemCount:this.props.itemCount!==void 0&&(i=this.props.itemCount),i},r.getItemNodeFromIndex=function(i){return this.props.environment.document.getElementById(this.getItemId(i))},r.scrollHighlightedItemIntoView=function(){{var i=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(i,this._menuNode)}},r.moveHighlightedIndex=function(i,s){var a=this.getItemCount();if(a>0){var c=dn(i,this.getState().highlightedIndex,a);this.setHighlightedIndex(c,s)}},r.highlightFirstOrLastIndex=function(i,s,a){var c=this.getItemCount()-1;c<0||!this.getState().isOpen||(i.preventDefault(),this.setHighlightedIndex(s?0:c,a))},r.getStateAndHelpers=function(){var i=this.getState(),s=i.highlightedIndex,a=i.inputValue,c=i.selectedItem,m=i.isOpen,g=this.props.itemToString,p=this.id,E=this.getRootProps,y=this.getToggleButtonProps,k=this.getLabelProps,f=this.getMenuProps,I=this.getInputProps,A=this.getItemProps,d=this.openMenu,b=this.closeMenu,v=this.toggleMenu,u=this.selectItem,C=this.selectItemAtIndex,S=this.selectHighlightedItem,P=this.setHighlightedIndex,x=this.clearSelection,O=this.clearItems,R=this.reset,M=this.setItemCount,N=this.unsetItemCount,H=this.internalSetState;return{getRootProps:E,getToggleButtonProps:y,getLabelProps:k,getMenuProps:f,getInputProps:I,getItemProps:A,reset:R,openMenu:d,closeMenu:b,toggleMenu:v,selectItem:u,selectItemAtIndex:C,selectHighlightedItem:S,setHighlightedIndex:P,clearSelection:x,clearItems:O,setItemCount:M,unsetItemCount:N,setState:H,itemToString:g,id:p,highlightedIndex:s,inputValue:a,isOpen:m,selectedItem:c}},r.componentDidMount=function(){var i=this;{var s=function(y,k){k===void 0&&(k=!0);var f=i.props.environment.document;return[i._rootNode,i._menuNode].some(function(I){return I&&(Ir(I,y)||k&&Ir(I,f.activeElement))})},a=function(){i.isMouseDown=!0},c=function(y){i.isMouseDown=!1;var k=s(y.target);!k&&i.getState().isOpen&&i.reset({type:kr},function(){return i.props.onOuterClick(i.getStateAndHelpers())})},m=function(){i.isTouchMove=!1},g=function(){i.isTouchMove=!0},p=function(y){var k=s(y.target,!1);!i.isTouchMove&&!k&&i.getState().isOpen&&i.reset({type:Zr},function(){return i.props.onOuterClick(i.getStateAndHelpers())})},E=this.props.environment;E.addEventListener("mousedown",a),E.addEventListener("mouseup",c),E.addEventListener("touchstart",m),E.addEventListener("touchmove",g),E.addEventListener("touchend",p),this.cleanup=function(){i.internalClearTimeouts(),i.updateStatus.cancel(),E.removeEventListener("mousedown",a),E.removeEventListener("mouseup",c),E.removeEventListener("touchstart",m),E.removeEventListener("touchmove",g),E.removeEventListener("touchend",p)}}},r.shouldScroll=function(i,s){var a=this.props.highlightedIndex===void 0?this.getState():this.props,c=a.highlightedIndex,m=s.highlightedIndex===void 0?i:s,g=m.highlightedIndex,p=c&&this.getState().isOpen&&!i.isOpen;return p||c!==g},r.componentDidUpdate=function(i,s){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(i.selectedItem,this.props.selectedItem)&&this.internalSetState({type:zr,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(s,i)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},r.componentWillUnmount=function(){this.cleanup()},r.render=function(){var i=xr(this.props.children,ze);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var s=xr(i(this.getStateAndHelpers()));if(!s)return null;if(this.getRootProps.called||this.props.suppressRefError)return s;if(wr(s))return(0,fe.cloneElement)(s,this.getRootProps(Fr(s)))},n}(fe.Component);return t.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:ql,itemToString:function(n){return n==null?"":String(n)},onStateChange:ze,onInputValueChange:ze,onUserAction:ze,onChange:ze,onSelect:ze,onOuterClick:ze,selectedItemChanged:function(n,r){return n!==r},environment:typeof window>"u"?{}:window,stateReducer:function(n,r){return r},suppressRefError:!1,scrollIntoView:yr},t.stateChangeTypes=Ql,t}();function um(t,e){var n=e.refKey;t||console.error('downshift: The ref prop "'+n+'" from getMenuProps was not applied correctly on your menu element.')}function dm(t,e){var n=e.refKey,r=n!=="ref",o=!wr(t);o&&!r&&!isForwardRef(t)?console.error("downshift: You returned a non-DOM element. You must specify a refKey in getRootProps"):!o&&r&&console.error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified "'+n+'"'),!isForwardRef(t)&&!Fr(t)[n]&&console.error('downshift: You must apply the ref prop "'+n+'" from getRootProps onto your root element.')}function mm(t,e){var n="This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props";["selectedItem","isOpen","inputValue","highlightedIndex"].forEach(function(r){t[r]!==void 0&&e[r]===void 0?console.error('downshift: A component has changed the controlled prop "'+r+'" to be uncontrolled. '+n):t[r]===void 0&&e[r]!==void 0&&console.error('downshift: A component has changed the uncontrolled prop "'+r+'" to be controlled. '+n)})}function Jl(t,e){var n=e===void 0?{}:e,r=n.id,o=n.labelId,i=n.menuId,s=n.getItemId,a=n.toggleButtonId,c=r===void 0?"downshift-"+t():r;return{labelId:o||c+"-label",menuId:i||c+"-menu",getItemId:s||function(m){return c+"-item-"+m},toggleButtonId:a||c+"-toggle-button"}}function fn(t,e,n,r){if(e===-1)return t>0?0:n-1;var o=e+t;return o<0?r?n-1:0:o>=n?r?0:n-1:o}function Kr(t,e,n,r){var o=-1,i=n.map(function(a){return r(a).toLowerCase()}),s=e+1;return o=i.slice(s).findIndex(function(a){return a.startsWith(t)}),o>-1?o+s:i.slice(0,s).findIndex(function(a){return a.startsWith(t)})}function Ur(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=r in e?e[r]:t[r],n},{})}function es(t,e,n){return t!==void 0?t:n.length===0?-1:n.indexOf(e)}function ts(t){return t?String(t):""}function gm(t,e){return function(n){n===void 0&&(n={}),Object.entries(e).forEach(function(r){var o=r[0];PropTypes.checkPropTypes(e,n,o,t.name)})}}function $r(t){return/^\S{1}$/.test(t)}function pn(t){return""+t.slice(0,1).toUpperCase()+t.slice(1)}function ns(t,e,n,r){var o="on"+pn(t)+"Change";e[o]&&r[t]!==void 0&&r[t]!==n[t]&&e[o](r)}function rs(t,e,n){Object.keys(e).forEach(function(r){ns(r,t,e,n)}),t.onStateChange&&n!==void 0&&t.onStateChange(n)}function is(t,e,n){var r=(0,fe.useCallback)(function(a,c){a=Ur(a,c.props);var m=c.props.stateReducer,g=t(a,c),p=m(a,(0,te.Z)({},c,{changes:g}));return rs(c.props,a,p),p},[t]),o=(0,fe.useReducer)(r,e),i=o[0],s=o[1];return[Ur(i,n),s]}var os=0,ls=function(){return++os};function ss(){var t=(0,fe.useState)(null),e=t[0],n=t[1];return(0,fe.useEffect)(function(){return n(ls())},[]),e}function as(t,e){return t.relatedTarget===e||t.nativeEvent&&(e===t.nativeEvent.explicitOriginalTarget||e.contains(t.nativeEvent.explicitOriginalTarget))}var cs={highlightedIndex:-1,isOpen:!1,selectedItem:null};function us(t){var e=t.isOpen,n=t.items;if(!n)return"";var r=n.length;return e?r===0?"No results are available":r+" result"+(r===1?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":""}function ds(t){var e=t.selectedItem,n=t.itemToString;return n(e)+" has been selected."}function Wt(t,e,n){var r=t.items,o=t.initialHighlightedIndex,i=t.defaultHighlightedIndex,s=e.selectedItem,a=e.highlightedIndex;return o!==void 0&&a>-1?o:i!==void 0?i:s?n===0?r.indexOf(s):fn(n,r.indexOf(s),r.length,!1):n===0?-1:n<0?r.length-1:0}function Ze(t,e){var n="default"+pn(e);return n in t?t[n]:cs[e]}function hn(t,e){if(e in t)return t[e];var n="initial"+pn(e);return n in t?t[n]:Ze(t,e)}function ms(t){var e=hn(t,"selectedItem"),n=hn(t,"highlightedIndex"),r=hn(t,"isOpen");return{highlightedIndex:n<0&&e?t.items.indexOf(e):n,isOpen:r,selectedItem:e,keysSoFar:""}}var fm={items:j().array.isRequired,itemToString:j().func,getA11yStatusMessage:j().func,getA11ySelectionMessage:j().func,circularNavigation:j().bool,highlightedIndex:j().number,defaultHighlightedIndex:j().number,initialHighlightedIndex:j().number,isOpen:j().bool,defaultIsOpen:j().bool,initialIsOpen:j().bool,selectedItem:j().any,initialSelectedItem:j().any,defaultSelectedItem:j().any,id:j().string,labelId:j().string,menuId:j().string,getItemId:j().func,toggleButtonId:j().string,stateReducer:j().func,onSelectedItemChange:j().func,onHighlightedIndexChange:j().func,onStateChange:j().func,onIsOpenChange:j().func,environment:j().shape({addEventListener:j().func,removeEventListener:j().func,document:j().shape({getElementById:j().func,activeElement:j().any,body:j().any})})},bn=0,vn=1,En=2,Cn=3,Sn=4,yn=5,In=6,Vt=7,xn=8,wn=9,Fn=10,An=11,Dn=12,kn=13,Pn=14,Tn=15,On=16,Rn=17,Mn=18,Nn=19,Ln=20,Bn=21,gs=Object.freeze({__proto__:null,MenuKeyDownArrowDown:bn,MenuKeyDownArrowUp:vn,MenuKeyDownEscape:En,MenuKeyDownHome:Cn,MenuKeyDownEnd:Sn,MenuKeyDownEnter:yn,MenuKeyDownCharacter:In,MenuBlur:Vt,MenuMouseLeave:xn,ItemMouseMove:wn,ItemClick:Fn,ToggleButtonKeyDownCharacter:An,ToggleButtonKeyDownArrowDown:Dn,ToggleButtonKeyDownArrowUp:kn,ToggleButtonClick:Pn,FunctionToggleMenu:Tn,FunctionOpenMenu:On,FunctionCloseMenu:Rn,FunctionSetHighlightedIndex:Mn,FunctionSelectItem:Nn,FunctionClearKeysSoFar:Ln,FunctionReset:Bn});function fs(t,e){var n=e.type,r=e.props,o=e.shiftKey,i;switch(n){case wn:i={highlightedIndex:e.index};break;case Fn:i={isOpen:Ze(r,"isOpen"),highlightedIndex:Ze(r,"highlightedIndex"),selectedItem:r.items[e.index]};break;case Vt:i={isOpen:!1,highlightedIndex:-1};break;case bn:i={highlightedIndex:fn(o?5:1,t.highlightedIndex,r.items.length,r.circularNavigation)};break;case vn:i={highlightedIndex:fn(o?-5:-1,t.highlightedIndex,r.items.length,r.circularNavigation)};break;case Cn:i={highlightedIndex:0};break;case Sn:i={highlightedIndex:r.items.length-1};break;case En:i={isOpen:!1,highlightedIndex:-1};break;case yn:i=(0,te.Z)({isOpen:Ze(r,"isOpen"),highlightedIndex:Ze(r,"highlightedIndex")},t.highlightedIndex>=0&&{selectedItem:r.items[t.highlightedIndex]});break;case In:{var s=e.key,a=""+t.keysSoFar+s,c=Kr(a,t.highlightedIndex,r.items,r.itemToString);i=(0,te.Z)({keysSoFar:a},c>=0&&{highlightedIndex:c})}break;case xn:i={highlightedIndex:-1};break;case An:{var m=e.key,g=""+t.keysSoFar+m,p=Kr(g,t.selectedItem?r.items.indexOf(t.selectedItem):-1,r.items,r.itemToString);i=(0,te.Z)({keysSoFar:g},p>=0&&{selectedItem:r.items[p]})}break;case Dn:{i={isOpen:!0,highlightedIndex:Wt(r,t,1)};break}case kn:i={isOpen:!0,highlightedIndex:Wt(r,t,-1)};break;case Pn:case Tn:i={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:Wt(r,t,0)};break;case On:i={isOpen:!0,highlightedIndex:Wt(r,t,0)};break;case Rn:i={isOpen:!1};break;case Mn:i={highlightedIndex:e.highlightedIndex};break;case Nn:i={selectedItem:e.selectedItem};break;case Ln:i={keysSoFar:""};break;case Bn:i={highlightedIndex:Ze(r,"highlightedIndex"),isOpen:Ze(r,"isOpen"),selectedItem:Ze(r,"selectedItem")};break;default:throw new Error("Reducer called without proper action type.")}return(0,te.Z)({},t,{},i)}var pm=null,ps={itemToString:ts,stateReducer:function(e,n){return n.changes},getA11yStatusMessage:us,getA11ySelectionMessage:ds,scrollIntoView:yr,environment:typeof window>"u"?{}:window};hs.stateChangeTypes=gs;function hs(t){t===void 0&&(t={});var e=(0,te.Z)({},ps,{},t),n=e.items,r=e.itemToString,o=e.getA11yStatusMessage,i=e.getA11ySelectionMessage,s=e.initialIsOpen,a=e.defaultIsOpen,c=e.scrollIntoView,m=e.environment,g=ms(e),p=is(fs,g,e),E=p[0],y=E.isOpen,k=E.highlightedIndex,f=E.selectedItem,I=E.keysSoFar,A=p[1],d=function(V){return A((0,te.Z)({props:e},V))},b=Jl(ss,e),v=b.labelId,u=b.getItemId,C=b.menuId,S=b.toggleButtonId,P=(0,fe.useRef)(null),x=(0,fe.useRef)(null),O=(0,fe.useRef)();O.current=[];var R=(0,fe.useRef)(!0),M=(0,fe.useRef)(!0),N=(0,fe.useRef)(null);(0,fe.useEffect)(function(){R.current||mn(o({isOpen:y,items:n,selectedItem:f,itemToString:r}),m.document)},[y]),(0,fe.useEffect)(function(){R.current||mn(i({isOpen:y,items:n,selectedItem:f,itemToString:r}),m.document)},[f]),(0,fe.useEffect)(function(){R.current&&(N.current=un(function(){d({type:Ln})},500)),I&&N.current()},[I]),(0,fe.useEffect)(function(){if(R.current){(s||a||y)&&x.current.focus();return}y?x.current.focus():m.document.activeElement===x.current&&P.current.focus()},[y]),(0,fe.useEffect)(function(){k<0||!y||!O.current.length||(M.current===!1?M.current=!0:c(O.current[k],x.current))},[k]),(0,fe.useEffect)(function(){R.current=!1},[]);var H={ArrowDown:function(L){L.preventDefault(),d({type:bn,shiftKey:L.shiftKey})},ArrowUp:function(L){L.preventDefault(),d({type:vn,shiftKey:L.shiftKey})},Home:function(L){L.preventDefault(),d({type:Cn})},End:function(L){L.preventDefault(),d({type:Sn})},Escape:function(){d({type:En})},Enter:function(L){L.preventDefault(),d({type:yn})},Tab:function(L){L.shiftKey&&d({type:Vt})}},z={ArrowDown:function(L){L.preventDefault(),d({type:Dn})},ArrowUp:function(L){L.preventDefault(),d({type:kn})}},W=function(V){var L=Ht(V);L&&H[L]?H[L](V):$r(L)&&d({type:In,key:L})},K=function(V){as(V,P.current)||d({type:Vt})},re=function(){d({type:xn})},oe=function(){d({type:Pn})},$=function(V){var L=Ht(V);L&&z[L]?z[L](V):$r(L)&&d({type:An,key:L})},ue=function(V){V!==k&&(M.current=!1,d({type:wn,index:V}))},pe=function(V){d({type:Fn,index:V})};return{getToggleButtonProps:function(L){var G,q=L===void 0?{}:L,Se=q.onClick,Ae=q.onKeyDown,Ie=q.refKey,De=Ie===void 0?"ref":Ie,xe=q.ref,ye=(0,Ve.Z)(q,["onClick","onKeyDown","refKey","ref"]),ke=(0,te.Z)((G={},G[De]=dt(xe,function(Ne){P.current=Ne}),G.id=S,G["aria-haspopup"]="listbox",G["aria-expanded"]=y,G["aria-labelledby"]=v+" "+S,G),ye);return ye.disabled||(ke.onClick=ve(Se,oe),ke.onKeyDown=ve(Ae,$)),ke},getLabelProps:function(L){return(0,te.Z)({id:v,htmlFor:S},L)},getMenuProps:function(L){var G,q=L===void 0?{}:L,Se=q.onKeyDown,Ae=q.onBlur,Ie=q.onMouseLeave,De=q.refKey,xe=De===void 0?"ref":De,ye=q.ref,ke=(0,Ve.Z)(q,["onKeyDown","onBlur","onMouseLeave","refKey","ref"]);return(0,te.Z)((G={},G[xe]=dt(ye,function(Ne){x.current=Ne}),G.id=C,G.role="listbox",G["aria-labelledby"]=v,G.tabIndex=-1,G),k>-1&&{"aria-activedescendant":u(k)},{onKeyDown:ve(Se,W),onBlur:ve(Ae,K),onMouseLeave:ve(Ie,re)},ke)},getItemProps:function(L){var G,q=L===void 0?{}:L,Se=q.item,Ae=q.index,Ie=q.refKey,De=Ie===void 0?"ref":Ie,xe=q.ref,ye=q.onMouseMove,ke=q.onClick,Ne=(0,Ve.Z)(q,["item","index","refKey","ref","onMouseMove","onClick"]),xt=es(Ae,Se,n);if(xt<0)throw new Error("Pass either item or item index in getItemProps!");var sr=(0,te.Z)((G={},G[De]=dt(xe,function(Ro){Ro&&O.current.push(Ro)}),G.role="option",G),xt===k&&{"aria-selected":!0},{id:u(xt)},Ne);return Ne.disabled||(sr.onMouseMove=ve(ye,function(){return ue(xt)}),sr.onClick=ve(ke,function(){return pe(xt)})),sr},toggleMenu:function(){d({type:Tn})},openMenu:function(){d({type:On})},closeMenu:function(){d({type:Rn})},setHighlightedIndex:function(L){d({type:Mn,highlightedIndex:L})},selectItem:function(L){d({type:Nn,selectedItem:L})},reset:function(){d({type:Bn})},highlightedIndex:k,isOpen:y,selectedItem:f}}const bs=Xl,_r=t=>t?.type==="option"&&t.label?t.label:"",Me=t=>t.filter(e=>e.type==="option");var Gr=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function vs(t,e){return!!(t===e||Gr(t)&&Gr(e))}function Es(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!vs(t[n],e[n]))return!1;return!0}function Cs(t,e){e===void 0&&(e=Es);var n,r=[],o,i=!1;function s(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return i&&n===this&&e(a,r)||(o=t.apply(this,a),i=!0,n=this,r=a),o}return s}const tt=Cs;var Ke=D(31049),Ss=typeof performance=="object"&&typeof performance.now=="function",qr=Ss?function(){return performance.now()}:function(){return Date.now()};function zt(t){cancelAnimationFrame(t.id)}function jr(t,e){var n=qr();function r(){qr()-n>=e?t.call(null):o.id=requestAnimationFrame(r)}var o={id:requestAnimationFrame(r)};return o}var Hn=-1;function Wn(t){if(t===void 0&&(t=!1),Hn===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),Hn=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Hn}var nt=null;function Zt(t){if(t===void 0&&(t=!1),nt===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),o=r.style;return o.width="100px",o.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?nt="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?nt="negative":nt="positive-ascending"),document.body.removeChild(e),nt}return nt}var ys=150,Is=function(e){var n=e.columnIndex,r=e.data,o=e.rowIndex;return o+":"+n},hm=null,bm=null,vm=null;function Yr(t){var e,n=t.getColumnOffset,r=t.getColumnStartIndexForOffset,o=t.getColumnStopIndexForStartIndex,i=t.getColumnWidth,s=t.getEstimatedTotalHeight,a=t.getEstimatedTotalWidth,c=t.getOffsetForColumnAndAlignment,m=t.getOffsetForRowAndAlignment,g=t.getRowHeight,p=t.getRowOffset,E=t.getRowStartIndexForOffset,y=t.getRowStopIndexForStartIndex,k=t.initInstanceProps,f=t.shouldResetStyleCacheOnItemSizeChange,I=t.validateProps;return e=function(A){(0,an.Z)(d,A);function d(v){var u;return u=A.call(this,v)||this,u._instanceProps=k(u.props,(0,et.Z)(u)),u._resetIsScrollingTimeoutId=null,u._outerRef=void 0,u.state={instance:(0,et.Z)(u),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof u.props.initialScrollLeft=="number"?u.props.initialScrollLeft:0,scrollTop:typeof u.props.initialScrollTop=="number"?u.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},u._callOnItemsRendered=void 0,u._callOnItemsRendered=tt(function(C,S,P,x,O,R,M,N){return u.props.onItemsRendered({overscanColumnStartIndex:C,overscanColumnStopIndex:S,overscanRowStartIndex:P,overscanRowStopIndex:x,visibleColumnStartIndex:O,visibleColumnStopIndex:R,visibleRowStartIndex:M,visibleRowStopIndex:N})}),u._callOnScroll=void 0,u._callOnScroll=tt(function(C,S,P,x,O){return u.props.onScroll({horizontalScrollDirection:P,scrollLeft:C,scrollTop:S,verticalScrollDirection:x,scrollUpdateWasRequested:O})}),u._getItemStyle=void 0,u._getItemStyle=function(C,S){var P=u.props,x=P.columnWidth,O=P.direction,R=P.rowHeight,M=u._getItemStyleCache(f&&x,f&&O,f&&R),N=C+":"+S,H;if(M.hasOwnProperty(N))H=M[N];else{var z=n(u.props,S,u._instanceProps),W=O==="rtl";M[N]=H={position:"absolute",left:W?void 0:z,right:W?z:void 0,top:p(u.props,C,u._instanceProps),height:g(u.props,C,u._instanceProps),width:i(u.props,S,u._instanceProps)}}return H},u._getItemStyleCache=void 0,u._getItemStyleCache=tt(function(C,S,P){return{}}),u._onScroll=function(C){var S=C.currentTarget,P=S.clientHeight,x=S.clientWidth,O=S.scrollLeft,R=S.scrollTop,M=S.scrollHeight,N=S.scrollWidth;u.setState(function(H){if(H.scrollLeft===O&&H.scrollTop===R)return null;var z=u.props.direction,W=O;if(z==="rtl")switch(Zt()){case"negative":W=-O;break;case"positive-descending":W=N-x-O;break}W=Math.max(0,Math.min(W,N-x));var K=Math.max(0,Math.min(R,M-P));return{isScrolling:!0,horizontalScrollDirection:H.scrollLeft<O?"forward":"backward",scrollLeft:W,scrollTop:K,verticalScrollDirection:H.scrollTop<R?"forward":"backward",scrollUpdateWasRequested:!1}},u._resetIsScrollingDebounced)},u._outerRefSetter=function(C){var S=u.props.outerRef;u._outerRef=C,typeof S=="function"?S(C):S!=null&&typeof S=="object"&&S.hasOwnProperty("current")&&(S.current=C)},u._resetIsScrollingDebounced=function(){u._resetIsScrollingTimeoutId!==null&&zt(u._resetIsScrollingTimeoutId),u._resetIsScrollingTimeoutId=jr(u._resetIsScrolling,ys)},u._resetIsScrolling=function(){u._resetIsScrollingTimeoutId=null,u.setState({isScrolling:!1},function(){u._getItemStyleCache(-1)})},u}d.getDerivedStateFromProps=function(u,C){return xs(u,C),I(u),null};var b=d.prototype;return b.scrollTo=function(u){var C=u.scrollLeft,S=u.scrollTop;C!==void 0&&(C=Math.max(0,C)),S!==void 0&&(S=Math.max(0,S)),this.setState(function(P){return C===void 0&&(C=P.scrollLeft),S===void 0&&(S=P.scrollTop),P.scrollLeft===C&&P.scrollTop===S?null:{horizontalScrollDirection:P.scrollLeft<C?"forward":"backward",scrollLeft:C,scrollTop:S,scrollUpdateWasRequested:!0,verticalScrollDirection:P.scrollTop<S?"forward":"backward"}},this._resetIsScrollingDebounced)},b.scrollToItem=function(u){var C=u.align,S=C===void 0?"auto":C,P=u.columnIndex,x=u.rowIndex,O=this.props,R=O.columnCount,M=O.height,N=O.rowCount,H=O.width,z=this.state,W=z.scrollLeft,K=z.scrollTop,re=Wn();P!==void 0&&(P=Math.max(0,Math.min(P,R-1))),x!==void 0&&(x=Math.max(0,Math.min(x,N-1)));var oe=s(this.props,this._instanceProps),$=a(this.props,this._instanceProps),ue=$>H?re:0,pe=oe>M?re:0;this.scrollTo({scrollLeft:P!==void 0?c(this.props,P,S,W,this._instanceProps,pe):W,scrollTop:x!==void 0?m(this.props,x,S,K,this._instanceProps,ue):K})},b.componentDidMount=function(){var u=this.props,C=u.initialScrollLeft,S=u.initialScrollTop;if(this._outerRef!=null){var P=this._outerRef;typeof C=="number"&&(P.scrollLeft=C),typeof S=="number"&&(P.scrollTop=S)}this._callPropsCallbacks()},b.componentDidUpdate=function(){var u=this.props.direction,C=this.state,S=C.scrollLeft,P=C.scrollTop,x=C.scrollUpdateWasRequested;if(x&&this._outerRef!=null){var O=this._outerRef;if(u==="rtl")switch(Zt()){case"negative":O.scrollLeft=-S;break;case"positive-ascending":O.scrollLeft=S;break;default:var R=O.clientWidth,M=O.scrollWidth;O.scrollLeft=M-R-S;break}else O.scrollLeft=Math.max(0,S);O.scrollTop=Math.max(0,P)}this._callPropsCallbacks()},b.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&zt(this._resetIsScrollingTimeoutId)},b.render=function(){var u=this.props,C=u.children,S=u.className,P=u.columnCount,x=u.direction,O=u.height,R=u.innerRef,M=u.innerElementType,N=u.innerTagName,H=u.itemData,z=u.itemKey,W=z===void 0?Is:z,K=u.outerElementType,re=u.outerTagName,oe=u.rowCount,$=u.style,ue=u.useIsScrolling,pe=u.width,V=this.state.isScrolling,L=this._getHorizontalRangeToRender(),G=L[0],q=L[1],Se=this._getVerticalRangeToRender(),Ae=Se[0],Ie=Se[1],De=[];if(P>0&&oe)for(var xe=Ae;xe<=Ie;xe++)for(var ye=G;ye<=q;ye++)De.push((0,Ke.createElement)(C,{columnIndex:ye,data:H,isScrolling:ue?V:void 0,key:W({columnIndex:ye,data:H,rowIndex:xe}),rowIndex:xe,style:this._getItemStyle(xe,ye)}));var ke=s(this.props,this._instanceProps),Ne=a(this.props,this._instanceProps);return(0,Ke.createElement)(K||re||"div",{className:S,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,te.Z)({position:"relative",height:O,width:pe,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:x},$)},(0,Ke.createElement)(M||N||"div",{children:De,ref:R,style:{height:ke,pointerEvents:V?"none":void 0,width:Ne}}))},b._callPropsCallbacks=function(){var u=this.props,C=u.columnCount,S=u.onItemsRendered,P=u.onScroll,x=u.rowCount;if(typeof S=="function"&&C>0&&x>0){var O=this._getHorizontalRangeToRender(),R=O[0],M=O[1],N=O[2],H=O[3],z=this._getVerticalRangeToRender(),W=z[0],K=z[1],re=z[2],oe=z[3];this._callOnItemsRendered(R,M,W,K,N,H,re,oe)}if(typeof P=="function"){var $=this.state,ue=$.horizontalScrollDirection,pe=$.scrollLeft,V=$.scrollTop,L=$.scrollUpdateWasRequested,G=$.verticalScrollDirection;this._callOnScroll(pe,V,ue,G,L)}},b._getHorizontalRangeToRender=function(){var u=this.props,C=u.columnCount,S=u.overscanColumnCount,P=u.overscanColumnsCount,x=u.overscanCount,O=u.rowCount,R=this.state,M=R.horizontalScrollDirection,N=R.isScrolling,H=R.scrollLeft,z=S||P||x||1;if(C===0||O===0)return[0,0,0,0];var W=r(this.props,H,this._instanceProps),K=o(this.props,W,H,this._instanceProps),re=!N||M==="backward"?Math.max(1,z):1,oe=!N||M==="forward"?Math.max(1,z):1;return[Math.max(0,W-re),Math.max(0,Math.min(C-1,K+oe)),W,K]},b._getVerticalRangeToRender=function(){var u=this.props,C=u.columnCount,S=u.overscanCount,P=u.overscanRowCount,x=u.overscanRowsCount,O=u.rowCount,R=this.state,M=R.isScrolling,N=R.verticalScrollDirection,H=R.scrollTop,z=P||x||S||1;if(C===0||O===0)return[0,0,0,0];var W=E(this.props,H,this._instanceProps),K=y(this.props,W,H,this._instanceProps),re=!M||N==="backward"?Math.max(1,z):1,oe=!M||N==="forward"?Math.max(1,z):1;return[Math.max(0,W-re),Math.max(0,Math.min(O-1,K+oe)),W,K]},d}(Ke.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var xs=function(e,n){var r=e.children,o=e.direction,i=e.height,s=e.innerTagName,a=e.outerTagName,c=e.overscanColumnsCount,m=e.overscanCount,g=e.overscanRowsCount,p=e.width,E=n.instance},Qr=50,Xr=function(e,n){var r=e.rowCount,o=n.rowMetadataMap,i=n.estimatedRowHeight,s=n.lastMeasuredRowIndex,a=0;if(s>=r&&(s=r-1),s>=0){var c=o[s];a=c.offset+c.size}var m=r-s-1,g=m*i;return a+g},Jr=function(e,n){var r=e.columnCount,o=n.columnMetadataMap,i=n.estimatedColumnWidth,s=n.lastMeasuredColumnIndex,a=0;if(s>=r&&(s=r-1),s>=0){var c=o[s];a=c.offset+c.size}var m=r-s-1,g=m*i;return a+g},Be=function(e,n,r,o){var i,s,a;if(e==="column"?(i=o.columnMetadataMap,s=n.columnWidth,a=o.lastMeasuredColumnIndex):(i=o.rowMetadataMap,s=n.rowHeight,a=o.lastMeasuredRowIndex),r>a){var c=0;if(a>=0){var m=i[a];c=m.offset+m.size}for(var g=a+1;g<=r;g++){var p=s(g);i[g]={offset:c,size:p},c+=p}e==="column"?o.lastMeasuredColumnIndex=r:o.lastMeasuredRowIndex=r}return i[r]},ei=function(e,n,r,o){var i,s;e==="column"?(i=r.columnMetadataMap,s=r.lastMeasuredColumnIndex):(i=r.rowMetadataMap,s=r.lastMeasuredRowIndex);var a=s>0?i[s].offset:0;return a>=o?ti(e,n,r,s,0,o):ws(e,n,r,Math.max(0,s),o)},ti=function(e,n,r,o,i,s){for(;i<=o;){var a=i+Math.floor((o-i)/2),c=Be(e,n,a,r).offset;if(c===s)return a;c<s?i=a+1:c>s&&(o=a-1)}return i>0?i-1:0},ws=function(e,n,r,o,i){for(var s=e==="column"?n.columnCount:n.rowCount,a=1;o<s&&Be(e,n,o,r).offset<i;)o+=a,a*=2;return ti(e,n,r,Math.min(o,s-1),Math.floor(o/2),i)},ni=function(e,n,r,o,i,s,a){var c=e==="column"?n.width:n.height,m=Be(e,n,r,s),g=e==="column"?Jr(n,s):Xr(n,s),p=Math.max(0,Math.min(g-c,m.offset)),E=Math.max(0,m.offset-c+a+m.size);switch(o==="smart"&&(i>=E-c&&i<=p+c?o="auto":o="center"),o){case"start":return p;case"end":return E;case"center":return Math.round(E+(p-E)/2);case"auto":default:return i>=E&&i<=p?i:E>p||i<E?E:p}},Em=Yr({getColumnOffset:function(e,n,r){return Be("column",e,n,r).offset},getColumnStartIndexForOffset:function(e,n,r){return ei("column",e,r,n)},getColumnStopIndexForStartIndex:function(e,n,r,o){for(var i=e.columnCount,s=e.width,a=Be("column",e,n,o),c=r+s,m=a.offset+a.size,g=n;g<i-1&&m<c;)g++,m+=Be("column",e,g,o).size;return g},getColumnWidth:function(e,n,r){return r.columnMetadataMap[n].size},getEstimatedTotalHeight:Xr,getEstimatedTotalWidth:Jr,getOffsetForColumnAndAlignment:function(e,n,r,o,i,s){return ni("column",e,n,r,o,i,s)},getOffsetForRowAndAlignment:function(e,n,r,o,i,s){return ni("row",e,n,r,o,i,s)},getRowOffset:function(e,n,r){return Be("row",e,n,r).offset},getRowHeight:function(e,n,r){return r.rowMetadataMap[n].size},getRowStartIndexForOffset:function(e,n,r){return ei("row",e,r,n)},getRowStopIndexForStartIndex:function(e,n,r,o){for(var i=e.rowCount,s=e.height,a=Be("row",e,n,o),c=r+s,m=a.offset+a.size,g=n;g<i-1&&m<c;)g++,m+=Be("row",e,g,o).size;return g},initInstanceProps:function(e,n){var r=e,o=r.estimatedColumnWidth,i=r.estimatedRowHeight,s={columnMetadataMap:{},estimatedColumnWidth:o||Qr,estimatedRowHeight:i||Qr,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return n.resetAfterColumnIndex=function(a,c){c===void 0&&(c=!0),n.resetAfterIndices({columnIndex:a,shouldForceUpdate:c})},n.resetAfterRowIndex=function(a,c){c===void 0&&(c=!0),n.resetAfterIndices({rowIndex:a,shouldForceUpdate:c})},n.resetAfterIndices=function(a){var c=a.columnIndex,m=a.rowIndex,g=a.shouldForceUpdate,p=g===void 0?!0:g;typeof c=="number"&&(s.lastMeasuredColumnIndex=Math.min(s.lastMeasuredColumnIndex,c-1)),typeof m=="number"&&(s.lastMeasuredRowIndex=Math.min(s.lastMeasuredRowIndex,m-1)),n._getItemStyleCache(-1),p&&n.forceUpdate()},s},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var n=e.columnWidth,r=e.rowHeight}}),Fs=150,As=function(e,n){return e},Cm=null,Sm=null;function ri(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,o=t.getItemSize,i=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,a=t.getStopIndexForStartIndex,c=t.initInstanceProps,m=t.shouldResetStyleCacheOnItemSizeChange,g=t.validateProps;return e=function(p){(0,an.Z)(E,p);function E(k){var f;return f=p.call(this,k)||this,f._instanceProps=c(f.props,(0,et.Z)(f)),f._outerRef=void 0,f._resetIsScrollingTimeoutId=null,f.state={instance:(0,et.Z)(f),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof f.props.initialScrollOffset=="number"?f.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},f._callOnItemsRendered=void 0,f._callOnItemsRendered=tt(function(I,A,d,b){return f.props.onItemsRendered({overscanStartIndex:I,overscanStopIndex:A,visibleStartIndex:d,visibleStopIndex:b})}),f._callOnScroll=void 0,f._callOnScroll=tt(function(I,A,d){return f.props.onScroll({scrollDirection:I,scrollOffset:A,scrollUpdateWasRequested:d})}),f._getItemStyle=void 0,f._getItemStyle=function(I){var A=f.props,d=A.direction,b=A.itemSize,v=A.layout,u=f._getItemStyleCache(m&&b,m&&v,m&&d),C;if(u.hasOwnProperty(I))C=u[I];else{var S=n(f.props,I,f._instanceProps),P=o(f.props,I,f._instanceProps),x=d==="horizontal"||v==="horizontal",O=d==="rtl",R=x?S:0;u[I]=C={position:"absolute",left:O?void 0:R,right:O?R:void 0,top:x?0:S,height:x?"100%":P,width:x?P:"100%"}}return C},f._getItemStyleCache=void 0,f._getItemStyleCache=tt(function(I,A,d){return{}}),f._onScrollHorizontal=function(I){var A=I.currentTarget,d=A.clientWidth,b=A.scrollLeft,v=A.scrollWidth;f.setState(function(u){if(u.scrollOffset===b)return null;var C=f.props.direction,S=b;if(C==="rtl")switch(Zt()){case"negative":S=-b;break;case"positive-descending":S=v-d-b;break}return S=Math.max(0,Math.min(S,v-d)),{isScrolling:!0,scrollDirection:u.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},f._resetIsScrollingDebounced)},f._onScrollVertical=function(I){var A=I.currentTarget,d=A.clientHeight,b=A.scrollHeight,v=A.scrollTop;f.setState(function(u){if(u.scrollOffset===v)return null;var C=Math.max(0,Math.min(v,b-d));return{isScrolling:!0,scrollDirection:u.scrollOffset<C?"forward":"backward",scrollOffset:C,scrollUpdateWasRequested:!1}},f._resetIsScrollingDebounced)},f._outerRefSetter=function(I){var A=f.props.outerRef;f._outerRef=I,typeof A=="function"?A(I):A!=null&&typeof A=="object"&&A.hasOwnProperty("current")&&(A.current=I)},f._resetIsScrollingDebounced=function(){f._resetIsScrollingTimeoutId!==null&&zt(f._resetIsScrollingTimeoutId),f._resetIsScrollingTimeoutId=jr(f._resetIsScrolling,Fs)},f._resetIsScrolling=function(){f._resetIsScrollingTimeoutId=null,f.setState({isScrolling:!1},function(){f._getItemStyleCache(-1,null)})},f}E.getDerivedStateFromProps=function(f,I){return Ds(f,I),g(f),null};var y=E.prototype;return y.scrollTo=function(f){f=Math.max(0,f),this.setState(function(I){return I.scrollOffset===f?null:{scrollDirection:I.scrollOffset<f?"forward":"backward",scrollOffset:f,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},y.scrollToItem=function(f,I){I===void 0&&(I="auto");var A=this.props,d=A.itemCount,b=A.layout,v=this.state.scrollOffset;f=Math.max(0,Math.min(f,d-1));var u=0;if(this._outerRef){var C=this._outerRef;b==="vertical"?u=C.scrollWidth>C.clientWidth?Wn():0:u=C.scrollHeight>C.clientHeight?Wn():0}this.scrollTo(i(this.props,f,I,v,this._instanceProps,u))},y.componentDidMount=function(){var f=this.props,I=f.direction,A=f.initialScrollOffset,d=f.layout;if(typeof A=="number"&&this._outerRef!=null){var b=this._outerRef;I==="horizontal"||d==="horizontal"?b.scrollLeft=A:b.scrollTop=A}this._callPropsCallbacks()},y.componentDidUpdate=function(){var f=this.props,I=f.direction,A=f.layout,d=this.state,b=d.scrollOffset,v=d.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var u=this._outerRef;if(I==="horizontal"||A==="horizontal")if(I==="rtl")switch(Zt()){case"negative":u.scrollLeft=-b;break;case"positive-ascending":u.scrollLeft=b;break;default:var C=u.clientWidth,S=u.scrollWidth;u.scrollLeft=S-C-b;break}else u.scrollLeft=b;else u.scrollTop=b}this._callPropsCallbacks()},y.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&zt(this._resetIsScrollingTimeoutId)},y.render=function(){var f=this.props,I=f.children,A=f.className,d=f.direction,b=f.height,v=f.innerRef,u=f.innerElementType,C=f.innerTagName,S=f.itemCount,P=f.itemData,x=f.itemKey,O=x===void 0?As:x,R=f.layout,M=f.outerElementType,N=f.outerTagName,H=f.style,z=f.useIsScrolling,W=f.width,K=this.state.isScrolling,re=d==="horizontal"||R==="horizontal",oe=re?this._onScrollHorizontal:this._onScrollVertical,$=this._getRangeToRender(),ue=$[0],pe=$[1],V=[];if(S>0)for(var L=ue;L<=pe;L++)V.push((0,Ke.createElement)(I,{data:P,key:O(L,P),index:L,isScrolling:z?K:void 0,style:this._getItemStyle(L)}));var G=r(this.props,this._instanceProps);return(0,Ke.createElement)(M||N||"div",{className:A,onScroll:oe,ref:this._outerRefSetter,style:(0,te.Z)({position:"relative",height:b,width:W,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:d},H)},(0,Ke.createElement)(u||C||"div",{children:V,ref:v,style:{height:re?"100%":G,pointerEvents:K?"none":void 0,width:re?G:"100%"}}))},y._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var f=this.props.itemCount;if(f>0){var I=this._getRangeToRender(),A=I[0],d=I[1],b=I[2],v=I[3];this._callOnItemsRendered(A,d,b,v)}}if(typeof this.props.onScroll=="function"){var u=this.state,C=u.scrollDirection,S=u.scrollOffset,P=u.scrollUpdateWasRequested;this._callOnScroll(C,S,P)}},y._getRangeToRender=function(){var f=this.props,I=f.itemCount,A=f.overscanCount,d=this.state,b=d.isScrolling,v=d.scrollDirection,u=d.scrollOffset;if(I===0)return[0,0,0,0];var C=s(this.props,u,this._instanceProps),S=a(this.props,C,u,this._instanceProps),P=!b||v==="backward"?Math.max(1,A):1,x=!b||v==="forward"?Math.max(1,A):1;return[Math.max(0,C-P),Math.max(0,Math.min(I-1,S+x)),C,S]},E}(Ke.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var Ds=function(e,n){var r=e.children,o=e.direction,i=e.height,s=e.layout,a=e.innerTagName,c=e.outerTagName,m=e.width,g=n.instance;if(0)var p},ks=50,rt=function(e,n,r){var o=e,i=o.itemSize,s=r.itemMetadataMap,a=r.lastMeasuredIndex;if(n>a){var c=0;if(a>=0){var m=s[a];c=m.offset+m.size}for(var g=a+1;g<=n;g++){var p=i(g);s[g]={offset:c,size:p},c+=p}r.lastMeasuredIndex=n}return s[n]},Ps=function(e,n,r){var o=n.itemMetadataMap,i=n.lastMeasuredIndex,s=i>0?o[i].offset:0;return s>=r?ii(e,n,i,0,r):Ts(e,n,Math.max(0,i),r)},ii=function(e,n,r,o,i){for(;o<=r;){var s=o+Math.floor((r-o)/2),a=rt(e,s,n).offset;if(a===i)return s;a<i?o=s+1:a>i&&(r=s-1)}return o>0?o-1:0},Ts=function(e,n,r,o){for(var i=e.itemCount,s=1;r<i&&rt(e,r,n).offset<o;)r+=s,s*=2;return ii(e,n,Math.min(r,i-1),Math.floor(r/2),o)},oi=function(e,n){var r=e.itemCount,o=n.itemMetadataMap,i=n.estimatedItemSize,s=n.lastMeasuredIndex,a=0;if(s>=r&&(s=r-1),s>=0){var c=o[s];a=c.offset+c.size}var m=r-s-1,g=m*i;return a+g},Os=ri({getItemOffset:function(e,n,r){return rt(e,n,r).offset},getItemSize:function(e,n,r){return r.itemMetadataMap[n].size},getEstimatedTotalSize:oi,getOffsetForIndexAndAlignment:function(e,n,r,o,i,s){var a=e.direction,c=e.height,m=e.layout,g=e.width,p=a==="horizontal"||m==="horizontal",E=p?g:c,y=rt(e,n,i),k=oi(e,i),f=Math.max(0,Math.min(k-E,y.offset)),I=Math.max(0,y.offset-E+y.size+s);switch(r==="smart"&&(o>=I-E&&o<=f+E?r="auto":r="center"),r){case"start":return f;case"end":return I;case"center":return Math.round(I+(f-I)/2);case"auto":default:return o>=I&&o<=f?o:o<I?I:f}},getStartIndexForOffset:function(e,n,r){return Ps(e,r,n)},getStopIndexForStartIndex:function(e,n,r,o){for(var i=e.direction,s=e.height,a=e.itemCount,c=e.layout,m=e.width,g=i==="horizontal"||c==="horizontal",p=g?m:s,E=rt(e,n,o),y=r+p,k=E.offset+E.size,f=n;f<a-1&&k<y;)f++,k+=rt(e,f,o).size;return f},initInstanceProps:function(e,n){var r=e,o=r.estimatedItemSize,i={itemMetadataMap:{},estimatedItemSize:o||ks,lastMeasuredIndex:-1};return n.resetAfterIndex=function(s,a){a===void 0&&(a=!0),i.lastMeasuredIndex=Math.min(i.lastMeasuredIndex,s-1),n._getItemStyleCache(-1),a&&n.forceUpdate()},i},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var n=e.itemSize}}),ym=Yr({getColumnOffset:function(e,n){var r=e.columnWidth;return n*r},getColumnWidth:function(e,n){var r=e.columnWidth;return r},getRowOffset:function(e,n){var r=e.rowHeight;return n*r},getRowHeight:function(e,n){var r=e.rowHeight;return r},getEstimatedTotalHeight:function(e){var n=e.rowCount,r=e.rowHeight;return r*n},getEstimatedTotalWidth:function(e){var n=e.columnCount,r=e.columnWidth;return r*n},getOffsetForColumnAndAlignment:function(e,n,r,o,i,s){var a=e.columnCount,c=e.columnWidth,m=e.width,g=Math.max(0,a*c-m),p=Math.min(g,n*c),E=Math.max(0,n*c-m+s+c);switch(r==="smart"&&(o>=E-m&&o<=p+m?r="auto":r="center"),r){case"start":return p;case"end":return E;case"center":var y=Math.round(E+(p-E)/2);return y<Math.ceil(m/2)?0:y>g+Math.floor(m/2)?g:y;case"auto":default:return o>=E&&o<=p?o:E>p||o<E?E:p}},getOffsetForRowAndAlignment:function(e,n,r,o,i,s){var a=e.rowHeight,c=e.height,m=e.rowCount,g=Math.max(0,m*a-c),p=Math.min(g,n*a),E=Math.max(0,n*a-c+s+a);switch(r==="smart"&&(o>=E-c&&o<=p+c?r="auto":r="center"),r){case"start":return p;case"end":return E;case"center":var y=Math.round(E+(p-E)/2);return y<Math.ceil(c/2)?0:y>g+Math.floor(c/2)?g:y;case"auto":default:return o>=E&&o<=p?o:E>p||o<E?E:p}},getColumnStartIndexForOffset:function(e,n){var r=e.columnWidth,o=e.columnCount;return Math.max(0,Math.min(o-1,Math.floor(n/r)))},getColumnStopIndexForStartIndex:function(e,n,r){var o=e.columnWidth,i=e.columnCount,s=e.width,a=n*o,c=Math.ceil((s+r-a)/o);return Math.max(0,Math.min(i-1,n+c-1))},getRowStartIndexForOffset:function(e,n){var r=e.rowHeight,o=e.rowCount;return Math.max(0,Math.min(o-1,Math.floor(n/r)))},getRowStopIndexForStartIndex:function(e,n,r){var o=e.rowHeight,i=e.rowCount,s=e.height,a=n*o,c=Math.ceil((s+r-a)/o);return Math.max(0,Math.min(i-1,n+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){var n=e.columnWidth,r=e.rowHeight}}),Im=ri({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,o,i,s){var a=e.direction,c=e.height,m=e.itemCount,g=e.itemSize,p=e.layout,E=e.width,y=a==="horizontal"||p==="horizontal",k=y?E:c,f=Math.max(0,m*g-k),I=Math.min(f,n*g),A=Math.max(0,n*g-k+g+s);switch(r==="smart"&&(o>=A-k&&o<=I+k?r="auto":r="center"),r){case"start":return I;case"end":return A;case"center":{var d=Math.round(A+(I-A)/2);return d<Math.ceil(k/2)?0:d>f+Math.floor(k/2)?f:d}case"auto":default:return o>=A&&o<=I?o:o<A?A:I}},getStartIndexForOffset:function(e,n){var r=e.itemCount,o=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/o)))},getStopIndexForStartIndex:function(e,n,r){var o=e.direction,i=e.height,s=e.itemCount,a=e.itemSize,c=e.layout,m=e.width,g=o==="horizontal"||c==="horizontal",p=n*a,E=g?m:i,y=Math.ceil((E+r-p)/a);return Math.max(0,Math.min(s-1,n+y-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){var n=e.itemSize}});function Vn(t,e){for(var n in t)if(!(n in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}var Rs=null,Ms=null;function Ns(t,e){var n=t.style,r=_objectWithoutPropertiesLoose(t,Rs),o=e.style,i=_objectWithoutPropertiesLoose(e,Ms);return!Vn(n,o)&&!Vn(r,i)}function xm(t,e){return!Ns(this.props,t)||Vn(this.state,e)}var zn=D(96026);const Ls=({isFocused:t,isSelected:e,className:n,children:r,...o})=>l.createElement("div",{className:B("gd-list-item","gd-select-option",e&&"gd-select-option-is-selected",t&&"gd-select-option-is-focused s-select-item-focused",n),...o},r),Bs=({children:t,className:e,...n})=>l.createElement("div",{className:B("gd-select-heading gd-list-item gd-list-item-header",e),...n},t),Hs=({className:t,...e})=>l.createElement("hr",{className:B("gd-separator-generic",t),...e}),Ws=({className:t,...e})=>l.createElement("div",{className:B("gd-select-separator",t),...e},l.createElement(Hs,null)),Zn=3,Vs=({items:t,selectedItem:e,highlightedIndex:n,getItemProps:r,optionClassName:o})=>function({index:s,style:a}){const c=Me(t),m=t[s];return m.type==="option"?l.createElement(Ls,{...r({key:`${m.type}-${m.value}`,item:m,index:c.indexOf(m),isSelected:e&&m?e.value===m.value:!1,className:o}),isFocused:c[n]&&m?c[n].value===m.value:!1,style:a},m.label):m.type==="heading"||m.type==="error"?l.createElement(Bs,{key:`${m.type}-${m.label}`,style:a},m.label):m.type==="separator"?l.createElement(Ws,{key:`${m.type}-${s}`,style:a}):null},li={option:32,heading:22,error:22,separator:1},si=t=>e=>{const n=t[e].type;return li[n]},gt=t=>Math.floor(t.length/2);class zs extends l.Component{static defaultProps={selectedItem:null,visibleItemsRange:Zn};listRef=l.createRef();render(){const{items:e,selectedItem:n,highlightedIndex:r,getItemProps:o,getMenuProps:i,className:s,optionClassName:a,visibleItemsRange:c}=this.props,m=Vs({items:e,selectedItem:n,highlightedIndex:r,getItemProps:o,optionClassName:a}),g=gt(Me(e)),E=zn(Math.max(g-c,0),Math.min(g+c+1,e.length)).reduce((y,k)=>y+si(e)(k),0);return l.createElement("div",{...i({className:B("gd-select-menu-wrapper",s)})},l.createElement("div",{className:"gd-select-menu s-select-menu"},l.createElement(Os,{className:"List",ref:this.listRef,itemCount:e.length,itemSize:si(e),height:E,width:"100%",overscanCount:10,estimatedItemSize:li.option,style:e.length===1?{overflow:"hidden"}:void 0},m)))}scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:n}=this.props,r=Me(n),o=e!==null?e:gt(Me(n)),i=r[o],s=n.indexOf(i);this.listRef.current.scrollToItem(s,"center")}};scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo(0)};componentDidUpdate=e=>{const{highlightedIndex:n,items:r,setHighlightedIndex:o,inputValue:i}=this.props,s=Me(e.items).length-1,a=Me(r).length-1,c=e.highlightedIndex===0,m=e.highlightedIndex===s,g=n===0,E=c&&n===a,y=m&&g,k=i.trim()==="",f=e.inputValue.trim()!==""&&k,I=e.inputValue.trim()!==i.trim(),A=gt(Me(r));f?o(A):I&&o(0);const d=this.props.items.length===1;f?this.scrollToIndex(A):E||y?this.scrollToIndex():d&&this.scrollToTop()};componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=gt(Me(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}const Zs="GDC.time.minute",Ks="GDC.time.hour",ai="GDC.time.date",Us="GDC.time.week_us",$s="GDC.time.month",_s="GDC.time.quarter",Gs="GDC.time.year",qs={inputCategory:"Empty"},js={inputCategory:"TooBig"},Ys={[Zs]:120,[Ks]:48,[ai]:365,[Us]:104,[$s]:60,[_s]:20,[Gs]:20},ci=99999,ui=t=>t?.trim(),Qs=t=>Math.abs(t)<=ci,Xs=t=>{if(!t)return qs;const e=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(t);if(e){const n=e[1],r=Number.parseInt(n,10);return Qs(r)?{offset:r,isOnlyNumber:n===t,inputCategory:"Numeric"}:js}return{inputCategory:"Textual",trimmedValue:t}},di=(t,e,n)=>{const r=Q[e],o=t<0?"history":t===0?"today":"future";return{type:"option",value:t,label:n.formatMessage(ne[`${r}_${o}`],{offset:t,n:Math.abs(t)})}},Kt=(t,e,n)=>t.map(r=>di(r,e,n)),Js=(t,e)=>{const n=Ys[t],r=Kt(zn(-n,0),t,e),o=Kt(zn(1,n+1),t,e);return[...r,{type:"separator"},di(0,t,e),{type:"separator"},...o]},ea=t=>[{type:"error",label:t.formatMessage({id:"filters.floatingRange.tooBig"},{limit:ci})}],ta=t=>[{type:"error",label:t.formatMessage({id:"filters.floatingRange.noMatch"})}],na=(t,e,n)=>{const r=t>0?[t,-t]:[t];return Kt(r,e,n)},ra=(t,e,n)=>{const r=[-1,0,1],o=Math.abs(t),i=t!==void 0&&o>1?[-o,...r,o]:r;return Kt(i,e,n)},mi=(t,e,n,r)=>{const o=t.toLowerCase(),i=ra(e,n,r).filter(s=>s.label.toLowerCase().includes(o));return i.length>0?i:ta(r)},wm=(t,e)=>{const n=ui(e);return getSelectableItems(t).find(r=>r.label===n)},Kn=(t,e)=>Me(t).find(n=>n.value===e);function ia(t="",e=ai,n){const r=ui(t),o=Xs(r);switch(o.inputCategory){case"Empty":return Js(e,n);case"TooBig":return ea(n);case"Textual":return mi(o.trimmedValue,void 0,e,n);case"Numeric":{const{offset:i,isOnlyNumber:s}=o;return s?na(i,e,n):mi(r,i,e,n)}}}const oa=(0,Nt.b)(bs);class Un extends l.Component{constructor(e){super(e);const n=e.value!==void 0?Kn(e.getItems(e.value.toString()),e.value):null;this.state={inputValue:n?_r(n):e.value?e.value.toString():""}}inputRef=l.createRef();static defaultProps={onChange:we,initialIsOpen:!1,visibleItemsRange:Zn};onChange=e=>{e&&this.props.onChange(e.value)};componentDidUpdate=e=>{if(e.value!==this.props.value){const n=this.props.getItems(this.props.value.toString()),r=Kn(n,this.props.value)?.label||this.props.value.toString();this.setState({inputValue:r})}};focus=()=>{this.inputRef.current&&this.inputRef.current.focus()};blur=()=>{this.inputRef.current&&this.inputRef.current.blur()};onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})};render(){const{initialIsOpen:e,placeholder:n,getItems:r,value:o=null,className:i,style:s,optionClassName:a,visibleItemsRange:c}=this.props,m=r(this.state.inputValue),g=o!==null?r(o.toString()):[],p=o!==null&&Kn(g,o)||null,E=Me(m),y=this.state.inputValue.trim()!=="";return l.createElement(oa,{onChange:this.onChange,itemToString:_r,initialIsOpen:e,selectedItem:p,itemCount:E.length,inputValue:this.state.inputValue,defaultHighlightedIndex:p||y?0:gt(E)},({getInputProps:k,getMenuProps:f,getItemProps:I,isOpen:A,openMenu:d,closeMenu:b,inputValue:v,highlightedIndex:u,setHighlightedIndex:C,selectItem:S})=>{const P=u>E.length-1?0:u,x={items:m,selectedItem:p,highlightedIndex:P,getItemProps:I,getMenuProps:f,className:"gd-dynamic-select-menu",optionClassName:a,inputValue:v,setHighlightedIndex:C,visibleItemsRange:c};return l.createElement("div",{className:B("gd-dynamic-select",i),style:s},l.createElement("div",{className:"gd-dynamic-select-input-wrapper"},l.createElement("input",{type:"text",className:"s-relative-range-input gd-input-field",...k({ref:this.inputRef,placeholder:p?p.label:n,value:v,onFocus:()=>{this.setState({inputValue:""}),d()},onChange:O=>this.onChangeHandler(O,S),onBlur:()=>this.onBlurHandler(p,S,b)})})),A&&m.length>0?l.createElement(zs,{...x}):null)})}onBlurHandler=(e,n,r)=>{const{customValueValidator:o,value:i}=this.props;o?(r(),this.onInputValueChanged(i?.toString())):(n(e),this.onInputValueChanged(e?e.label:""))};onChangeHandler=(e,n)=>{const{customValueValidator:r}=this.props,o=e.target.value;r?.(o)&&n({type:"option",value:Number(o),label:o}),this.onInputValueChanged(o)}}class la extends l.Component{toFieldRef=l.createRef();render(){const{handleFromChange:e,handleToChange:n}=this,{selectedFilterOption:r,intl:o,isMobile:i}=this.props,a={visibleItemsRange:i?5:Zn,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:c=>{const m=ia(c,r.granularity,o);return i?m.filter(g=>g.type!=="separator"):m}};return l.createElement("div",{className:"gd-relative-range-picker s-relative-range-picker"},l.createElement(Un,{value:r.from,onChange:e,placeholder:o.formatMessage({id:"filters.from"}),className:B("gd-relative-range-picker-picker","s-relative-range-picker-from",i&&"gd-relative-range-picker-picker-mobile"),...a}),l.createElement("span",{className:"gd-relative-range-picker-dash"},"\u2013"),l.createElement(Un,{value:r.to,onChange:n,placeholder:o.formatMessage({id:"filters.to"}),className:B("gd-relative-range-picker-picker","s-relative-range-picker-to",i&&"gd-relative-range-picker-picker-mobile"),...a,ref:this.toFieldRef}))}isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0;focusToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout(()=>{this.toFieldRef.current?.focus()},0):this.toFieldRef.current.focus())};blurToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout(()=>{this.toFieldRef.current?.blur()},0):this.toFieldRef.current.blur())};handleFromChange=e=>{this.props.onSelectedFilterOptionChange({...this.props.selectedFilterOption,from:e}),e!==void 0&&this.focusToField()};handleToChange=e=>{this.props.onSelectedFilterOptionChange({...this.props.selectedFilterOption,to:e}),this.blurToField()}}const sa=(0,be.ZP)(la),aa=({selectedFilterOption:t,availableGranularities:e,onSelectedFilterOptionChange:n,isMobile:r})=>l.createElement(l.Fragment,null,l.createElement(Ul,{availableGranularities:e,selectedGranularity:t.granularity,onSelectedGranularityChange:o=>n({...t,...t.granularity!==o&&{from:void 0,to:void 0},granularity:o})}),l.createElement(sa,{selectedFilterOption:t,onSelectedFilterOptionChange:n,key:t.granularity,isMobile:r}));var gi=D(21804);const ca=({children:t,className:e,...n})=>l.createElement("div",{className:B("gd-list-item gd-list-item-header gd-filter-list-heading",e),...n},t),ua=({granularity:t})=>{const e=ne[t]||null;return e?l.createElement(U.Z,{id:e.id}):null},da=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"],ma=({dateFormat:t,filterOption:e,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:o})=>{const i=da.filter(s=>e?.[s]?.length>0).map(s=>({granularity:s,items:e[s]}));return l.createElement(l.Fragment,null,i.map(s=>l.createElement(l.Fragment,{key:s.granularity},l.createElement(ca,{className:o},l.createElement(ua,{granularity:s.granularity})),s.items.map(a=>l.createElement(ut,{key:a.localIdentifier,isSelected:a.localIdentifier===n.localIdentifier,onClick:()=>r(a),className:B(`s-relative-preset-${gi(a.localIdentifier)}`,o)},l.createElement(on,{filter:a,dateFormat:t}))))))},ga=()=>l.createElement("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message"},l.createElement("div",{className:"gd-extended-date-filter-edit-mode-message-text"},l.createElement(U.Z,{id:"dateFilterDropdown.setDefault",values:{nbsp:l.createElement(l.Fragment,null,"\xA0")}})),l.createElement("hr",{className:"gd-separator-generic"})),fi=({children:t,changeRoute:e,...n})=>l.createElement("button",{className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:r=>{r.preventDefault(),e(null)},...n},l.createElement("span",{className:"gd-icon-navigateleft"}),"\u2003",t),fa=t=>l.createElement(T.Button,{type:"button",value:t.intl.formatMessage({id:t.messageId}),className:t.className,disabled:t.disabled,onClick:t.onClick}),pi=(0,be.ZP)(fa),pa=[{align:"bc tc",offset:{x:-1,y:5}}],ha=t=>{const{onConfiguration:e}=t;return l.createElement("div",{className:"gd-date-filter-configuration-button s-gd-date-filter-configuration-button"},l.createElement(T.BubbleHoverTrigger,null,l.createElement(T.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:e}),l.createElement(T.Bubble,{className:"bubble-primary",alignPoints:pa},l.createElement(U.Z,{id:"dateFilterDropdown.configuration"}))))},ba=({filterOptions:t,dateFormat:e,selectedFilterOption:n,onSelectedFilterOptionChange:r,className:o})=>l.createElement(l.Fragment,null,t.map(i=>l.createElement(ut,{key:i.localIdentifier,isSelected:i.localIdentifier===n.localIdentifier,onClick:()=>r(i),className:B(`s-absolute-preset-${gi(i.localIdentifier)}`,o)},l.createElement(on,{filter:i,dateFormat:e})))),va=53,Ea=30,Ca=8,Sa=414,ft="gd-date-filter-item-mobile";class ya extends l.Component{state={route:null};changeRoute=(e=null)=>{this.setState({route:e})};componentDidMount(){this.props.isMobile&&((0,F.isAbsoluteDateFilterForm)(this.props.selectedFilterOption)?this.changeRoute("absoluteForm"):(0,F.isRelativeDateFilterForm)(this.props.selectedFilterOption)&&this.changeRoute("relativeForm"))}render(){const{isExcludeCurrentPeriodEnabled:e,isMobile:n,onApplyClick:r,onCancelClick:o,closeDropdown:i,onConfigurationClick:s,dateFilterButton:a,errors:c,isConfigurationEnabled:m}=this.props,{route:g}=this.state,p=!n||e;return l.createElement("div",{className:"gd-extended-date-filter-container"},l.createElement("div",{className:B("gd-extended-date-filter-body","s-extended-date-filters-body",n&&"gd-extended-date-filter-body-mobile")},g===null&&n?l.createElement("div",{onClick:()=>{o(),i()}},a):null,this.renderDateFilterBody(),p?this.renderExcludeCurrent():null,l.createElement("div",{className:B("gd-extended-date-filter-actions")},l.createElement("div",{className:"gd-extended-date-filter-actions-left-content"},m?l.createElement(ha,{onConfiguration:s}):null),l.createElement("div",{className:"gd-extended-date-filter-actions-buttons"},l.createElement(pi,{messageId:"cancel",className:"gd-button-secondary gd-button-small s-date-filter-cancel",onClick:()=>{o(),i()}}),l.createElement(pi,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!ee(c),onClick:()=>{r(),i()}})))))}renderDateFilterBody=()=>{const{isExcludeCurrentPeriodEnabled:e,isMobile:n,isEditMode:r,selectedFilterOption:o,showHeaderMessage:i=!0}=this.props,s=!n||e,a=this.calculateHeight(s);let c={},m={};return a&&(c={display:"block",height:`${a}px`},m={minHeight:`${a}px`}),l.createElement(l.Fragment,null,l.createElement("div",{className:B("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,F.isRelativeDateFilterForm)(o)}),style:c},r&&!n&&i?l.createElement(ga,null):null,n?this.renderMobileContent():l.createElement(el,{className:"gd-extended-date-filter-body-scrollable",style:m},this.renderDefaultContent())))};renderAllTime=()=>{const{filterOptions:e,isMobile:n,selectedFilterOption:r,onSelectedFilterOptionChange:o}=this.props;return e.allTime?l.createElement(tl,{filterOption:e.allTime,selectedFilterOption:r,onSelectedFilterOptionChange:o,className:n?ft:void 0}):null};renderAbsoluteForm=()=>{const{dateFormat:e,filterOptions:n,selectedFilterOption:r,onSelectedFilterOptionChange:o,isTimeForAbsoluteRangeEnabled:i,isMobile:s,errors:a,weekStart:c}=this.props;if(!n.absoluteForm)return null;const{route:m}=this.state,g=n.absoluteForm.localIdentifier===r.localIdentifier,p=m==="absoluteForm";return l.createElement(l.Fragment,null,!s||!p?l.createElement(ut,{isSelected:g,onClick:()=>{this.changeRoute("absoluteForm"),(0,F.isAbsoluteDateFilterForm)(r)||o(n.absoluteForm)},className:B("s-absolute-form","s-do-not-close-dropdown-on-click",s&&ft)},n.absoluteForm.name?n.absoluteForm.name:l.createElement(U.Z,{id:"filters.staticPeriod"})):null,g&&(!s||p)?l.createElement(pr,{isMobile:s},l.createElement(Bl,{dateFormat:e,errors:a?.absoluteForm||void 0,onSelectedFilterOptionChange:o,selectedFilterOption:r,isMobile:s,isTimeEnabled:i,weekStart:c})):null)};renderRelativeForm=()=>{const{filterOptions:e,selectedFilterOption:n,onSelectedFilterOptionChange:r,availableGranularities:o,isMobile:i}=this.props;if(!e.relativeForm)return null;const{route:s}=this.state,a=e.relativeForm.localIdentifier===n.localIdentifier,c=s==="relativeForm";return l.createElement(l.Fragment,null,!i||!c?l.createElement(ut,{isSelected:a,onClick:()=>{this.changeRoute("relativeForm"),(0,F.isRelativeDateFilterForm)(n)||r(e.relativeForm)},className:B("s-relative-form","s-do-not-close-dropdown-on-click",i&&ft)},e.relativeForm.name?e.relativeForm.name:l.createElement(U.Z,{id:"filters.floatingRange"}),i?null:l.createElement(Hl,{bubbleAlignPoints:[{align:"cr cl"}]},l.createElement(U.Z,{id:"filters.floatingRange.tooltip"}))):null,a&&(!i||c)?l.createElement(pr,{isMobile:i},l.createElement(aa,{onSelectedFilterOptionChange:m=>{r(m)},selectedFilterOption:n,availableGranularities:o,isMobile:i})):null)};renderAbsolutePreset=()=>{const{dateFormat:e,filterOptions:n,selectedFilterOption:r,onSelectedFilterOptionChange:o,isMobile:i}=this.props;return n.absolutePreset&&n.absolutePreset.length>0?l.createElement(ba,{dateFormat:e,filterOptions:n.absolutePreset,selectedFilterOption:r,onSelectedFilterOptionChange:o,className:i?ft:void 0}):null};renderRelativePreset=()=>{const{dateFormat:e,filterOptions:n,selectedFilterOption:r,onSelectedFilterOptionChange:o,isMobile:i}=this.props;return n.relativePreset?l.createElement(ma,{dateFormat:e,filterOption:n.relativePreset,selectedFilterOption:r,onSelectedFilterOptionChange:o,className:i?ft:void 0}):null};renderExcludeCurrent=()=>{const{selectedFilterOption:e,onExcludeCurrentPeriodChange:n,excludeCurrentPeriod:r,isExcludeCurrentPeriodEnabled:o}=this.props;return l.createElement(Jo,{value:r,onChange:n,disabled:!o,granularity:Ot(e)})};renderMobileContent(){const{route:e}=this.state;return e==="absoluteForm"?l.createElement(l.Fragment,null,l.createElement(fi,{changeRoute:this.changeRoute},l.createElement(U.Z,{id:"filters.staticPeriod"})),this.renderAbsoluteForm()):e==="relativeForm"?ee(this.props.availableGranularities)?null:l.createElement(l.Fragment,null,l.createElement(fi,{changeRoute:this.changeRoute},l.createElement(U.Z,{id:"filters.floatingRange"})),this.renderRelativeForm()):this.renderDefaultContent()}renderDefaultContent(){return l.createElement(l.Fragment,null,this.renderAllTime(),this.renderAbsoluteForm(),ee(this.props.availableGranularities)?null:this.renderRelativeForm(),this.renderAbsolutePreset(),this.renderRelativePreset())}calculateHeight=e=>{if(window.innerHeight<=Sa){const n=e?Ea:0;return window.innerHeight-n-va-Ca}}}const Ia=(0,Nt.b)(mr),xa=t=>{try{return We(new Date,t),t}catch{return console.warn(`Unsupported date format ${t}, the default format ${he} is used instead.`),he}},wa=(t,e=!1)=>e?t+ae:t,Fa=({originalSelectedFilterOption:t,originalExcludeCurrentPeriod:e,onDropdownOpenChanged:n,customFilterName:r,dateFormat:o,disabled:i,openOnInit:s,locale:a,filterOptions:c,isTimeForAbsoluteRangeEnabled:m,weekStart:g,customIcon:p,FilterConfigurationComponent:E,onApplyClick:y,onCancelClick:k,showDropDownHeaderMessage:f,...I})=>{const[A,d]=(0,l.useState)(!1),b=xa(o),v=(0,l.useMemo)(()=>dr(at,en)(c),[c]),u=()=>{d(!1)},C=()=>{d(!0)},S=()=>{u(),k()},P=x=>{n(x),x||u()};return l.createElement(ie.IntlWrapper,{locale:a||"en-US"},l.createElement(Ia,{query:gr},x=>{const O=(R=!1)=>l.createElement(jo,{disabled:i,isMobile:x,isOpen:R,dateFilterOption:Qe(t,e),dateFormat:wa(b,m),customFilterName:r,customIcon:p});return l.createElement(T.Dropdown,{openOnInit:s,closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:P,renderButton:({isOpen:R,toggleDropdown:M})=>l.createElement("span",{onClick:i?we:M},O(R)),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:R})=>A?l.createElement(E,{onSaveButtonClick:u,onCancelButtonClick:S}):l.createElement(ya,{...I,showHeaderMessage:f,onApplyClick:y,onCancelClick:k,filterOptions:v,isMobile:x,closeDropdown:R,dateFilterButton:O(),dateFormat:b,isTimeForAbsoluteRangeEnabled:m,weekStart:g,isConfigurationEnabled:E!==void 0,onConfigurationClick:C})})}))};function Aa(t){return Je(t)&&t.from>t.to?{...t,from:t.to,to:t.from}:t}class _e extends l.PureComponent{static defaultProps={dateFormat:he,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:we,onOpen:we,onClose:we,weekStart:"Sunday"};static getDerivedStateFromProps(e,n){return!Re(e.selectedFilterOption,n.initSelectedFilterOption)||e.excludeCurrentPeriod!==n.initExcludeCurrentPeriod?_e.getStateFromProps(e):null}static getStateFromProps(e){const n=Xe(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:n?e.excludeCurrentPeriod:!1,isTimeForAbsoluteRangeEnabled:e.isTimeForAbsoluteRangeEnabled,isExcludeCurrentPeriodEnabled:n}}static getStateFromSelectedOption=(e,n)=>{const r=Xe(e);return{selectedFilterOption:e,excludeCurrentPeriod:r?n:!1,isExcludeCurrentPeriodEnabled:r}};static checkInitialFilterOption=e=>{(0,F.isAbsoluteDateFilterForm)(e)&&(ct(e.from)||ct(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),Je(e)&&(ct(e.from)||ct(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};constructor(e){super(e),this.state=_e.getStateFromProps(e)}componentDidMount(){_e.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:n,dateFormat:r,filterOptions:o,selectedFilterOption:i,excludeCurrentPeriod:s,availableGranularities:a,isEditMode:c,openOnInit:m,locale:g,isTimeForAbsoluteRangeEnabled:p,weekStart:E,customIcon:y,showDropDownHeaderMessage:k,FilterConfigurationComponent:f}=this.props,{excludeCurrentPeriod:I,selectedFilterOption:A,isExcludeCurrentPeriodEnabled:d}=this.state;return n==="hidden"?null:l.createElement(Fa,{availableGranularities:a,customFilterName:e,dateFormat:r,openOnInit:m,showDropDownHeaderMessage:k,disabled:n==="readonly",excludeCurrentPeriod:I,originalExcludeCurrentPeriod:s,isExcludeCurrentPeriodEnabled:d,isTimeForAbsoluteRangeEnabled:p,isEditMode:c,filterOptions:o,selectedFilterOption:A,originalSelectedFilterOption:i,locale:g,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:At(A),weekStart:E,customIcon:y,FilterConfigurationComponent:f})}handleApplyClick=()=>{const e=Aa(this.state.selectedFilterOption);this.props.onApply(e,this.state.excludeCurrentPeriod)};onChangesDiscarded=()=>{this.setState(()=>_e.getStateFromProps(this.props))};onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()};onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())};handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e})};handleSelectedFilterOptionChange=e=>{this.setState(n=>_e.getStateFromSelectedOption(e,n.excludeCurrentPeriod))}}var Ge=D(56541);const hi=t=>ne[t].id,bi=t=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"})[t];class Da extends l.PureComponent{static defaultProps={onClick:we,bubbleText:null};render(){const{intl:e,operator:n,selectedOperator:r,bubbleText:o}=this.props,i=B("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${Ge.gl(n)}`,{"is-selected":r===n}),s=e.formatMessage({id:hi(n)});return l.createElement("div",{className:i,onClick:this.handleOnClick},l.createElement("div",{className:`gd-icon-${bi(n)}`,title:s}),l.createElement("span",{title:s},$e(s)),o?this.renderBubble(o):null)}handleOnClick=e=>{const{operator:n,onClick:r}=this.props;r(n),e.preventDefault()};renderBubble(e){return l.createElement("div",{className:"tooltip-bubble"},l.createElement(T.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200},l.createElement("div",{className:"inlineBubbleHelp"}),l.createElement(T.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},e)))}}const He=(0,be.ZP)(Da);class ka extends l.PureComponent{render(){const{onSelect:e,onClose:n,selectedOperator:r,alignTo:o,intl:i}=this.props;return l.createElement(T.Overlay,{closeOnOutsideClick:!0,alignTo:o,alignPoints:[{align:"bl tl"}],onClose:n},l.createElement("div",{className:"gd-dropdown overlay"},l.createElement("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body"},l.createElement(He,{operator:"ALL",selectedOperator:r,onClick:e}),l.createElement(T.Separator,null),l.createElement(He,{operator:"GREATER_THAN",selectedOperator:r,onClick:e}),l.createElement(He,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:r,onClick:e}),l.createElement(T.Separator,null),l.createElement(He,{operator:"LESS_THAN",selectedOperator:r,onClick:e}),l.createElement(He,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:r,onClick:e}),l.createElement(T.Separator,null),l.createElement(He,{operator:"BETWEEN",selectedOperator:r,onClick:e,bubbleText:i.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),l.createElement(He,{operator:"NOT_BETWEEN",selectedOperator:r,onClick:e,bubbleText:i.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),l.createElement(T.Separator,null),l.createElement(He,{operator:"EQUAL_TO",selectedOperator:r,onClick:e}),l.createElement(He,{operator:"NOT_EQUAL_TO",selectedOperator:r,onClick:e}))))}}const Pa=(0,be.ZP)(ka);class Ta extends l.PureComponent{state={opened:!1};render(){return l.createElement(l.Fragment,null,this.renderDropdownButton(),this.state.opened?l.createElement(Pa,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:this.handleOperatorSelected,selectedOperator:this.props.operator,onClose:this.closeOperatorDropdown}):null)}renderDropdownButton(){const{intl:e,operator:n,isDisabled:r}=this.props,{opened:o}=this.state,i=$e(e.formatMessage({id:hi(n)})),s=B("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${Ge.gl(n)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":o,"is-active":o});return l.createElement(T.Button,{title:i,className:s,value:i,onClick:this.handleOperatorDropdownButtonClick,iconLeft:`gd-icon-${bi(n)}`,iconRight:o?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:r})}handleOperatorSelected=e=>{this.closeOperatorDropdown(),this.props.onSelect(e)};closeOperatorDropdown=()=>this.setState({opened:!1});handleOperatorDropdownButtonClick=()=>this.setState(e=>({...e,opened:!e.opened}))}const Oa=(0,be.ZP)(Ta),Ra=({from:t,to:e,usePercentage:n,disableAutofocus:r,onFromChange:o,onToChange:i,onEnterKeyPress:s,separators:a})=>l.createElement("div",{className:"gd-mvf-range-input"},l.createElement(T.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:t,onChange:o,onEnterKeyPress:s,isSmall:!0,autofocus:!r,suffix:n?"%":"",separators:a}),l.createElement(T.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:e,onChange:i,onEnterKeyPress:s,isSmall:!0,suffix:n?"%":"",separators:a})),Ma=({value:t,usePercentage:e,disableAutofocus:n,onValueChange:r,onEnterKeyPress:o,separators:i})=>l.createElement(T.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:t,onEnterKeyPress:o,onChange:r,isSmall:!0,autofocus:!n,suffix:e?"%":"",separators:i}),Na=({checked:t=!1,onChange:e,intl:n})=>{const r=o=>e(o.target.checked);return l.createElement("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero"},l.createElement("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:t,onChange:r}),l.createElement("span",{className:"input-label-text"},n.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),l.createElement(T.BubbleHoverTrigger,{showDelay:400,hideDelay:200},l.createElement("span",{className:"inlineBubbleHelp"}),l.createElement(T.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},n.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})))))};function vi(t){return!ee(t)&&!!t.severity}const La=t=>{if(typeof t=="string")return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(t.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}},Ba=({warningMessage:t,className:e})=>{const n=B("gd-mvf-warning-message",La(t),e,"s-mvf-warning-message");return l.createElement("div",{className:n},vi(t)?t.text:t)},Ha=6;class Wa extends l.PureComponent{constructor(e){super(e);const{operator:n,value:r,usePercentage:o,treatNullAsZeroValue:i}=e;this.state={operator:n||"ALL",value:(o?this.convertToPercentageValue(r,n):r)||{},enabledTreatNullValuesAsZero:i}}render(){const{onCancel:e,warningMessage:n,displayTreatNullAsZeroOption:r,enableOperatorSelection:o,intl:i}=this.props,{operator:s,enabledTreatNullValuesAsZero:a}=this.state;return l.createElement("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body"},l.createElement("div",{className:"gd-mvf-dropdown-content"},n?l.createElement("div",{className:"gd-mvf-dropdown-section"},l.createElement(Ba,{warningMessage:n})):null,l.createElement("div",{className:"gd-mvf-dropdown-section"},l.createElement(Oa,{onSelect:this.handleOperatorSelection,operator:s,isDisabled:!o})),s!=="ALL"?l.createElement("div",{className:"gd-mvf-dropdown-section"},this.renderInputSection()," ",r?l.createElement(Na,{onChange:this.handleTreatNullAsZeroClicked,checked:a,intl:i}):null):null),l.createElement("div",{className:"gd-mvf-dropdown-footer"},l.createElement(T.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:e,value:i.formatMessage({id:"cancel"})}),l.createElement(T.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:this.onApply,value:i.formatMessage({id:"apply"}),disabled:this.isApplyButtonDisabled()})))}renderInputSection=()=>{const{usePercentage:e,disableAutofocus:n,separators:r}=this.props,{operator:o,value:{value:i=null,from:s=null,to:a=null}}=this.state;return(0,F.isComparisonConditionOperator)(o)?l.createElement(Ma,{value:i,usePercentage:e,onValueChange:this.handleValueChange,onEnterKeyPress:this.onApply,disableAutofocus:n,separators:r}):(0,F.isRangeConditionOperator)(o)?l.createElement(Ra,{from:s,to:a,usePercentage:e,onFromChange:this.handleFromChange,onToChange:this.handleToChange,onEnterKeyPress:this.onApply,disableAutofocus:n,separators:r}):null};isApplyButtonDisabledForComparison(){const{value:e=null}=this.state.value;return e===null?!0:this.props.value===null||this.isChanged()?!1:this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.value:e===this.props.value.value}isApplyButtonDisabledForRange(){const{from:e=null,to:n=null}=this.state.value;return e===null||n===null?!0:this.props.value===null||this.isChanged()?!1:this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.from&&this.trimToPrecision(this.fromPercentToDecimal(n))===this.props.value.to:e===this.props.value.from&&n===this.props.value.to}isChanged=()=>this.state.operator!==this.props.operator||this.state.enabledTreatNullValuesAsZero!==this.props.treatNullAsZeroValue;isApplyButtonDisabledForAll(){return this.props.operator==="ALL"}isApplyButtonDisabled=()=>{const{operator:e}=this.state;return(0,F.isComparisonConditionOperator)(e)?this.isApplyButtonDisabledForComparison():(0,F.isRangeConditionOperator)(e)?this.isApplyButtonDisabledForRange():this.isApplyButtonDisabledForAll()};handleOperatorSelection=e=>this.setState({operator:e});handleValueChange=e=>{this.setState({value:{...this.state.value,value:e}})};handleFromChange=e=>{this.setState({value:{...this.state.value,from:e}})};handleToChange=e=>{this.setState({value:{...this.state.value,to:e}})};handleTreatNullAsZeroClicked=e=>{this.setState({enabledTreatNullValuesAsZero:e})};trimToPrecision=e=>{const{valuePrecision:n=Ha}=this.props;return e&&parseFloat(e.toFixed(n))};fromPercentToDecimal=e=>e&&e/100;fromDecimalToPercent=e=>e&&e*100;convertToRawValue=(e,n)=>e&&((0,F.isComparisonConditionOperator)(n)?{value:this.trimToPrecision(this.fromPercentToDecimal(e.value))}:{from:this.trimToPrecision(this.fromPercentToDecimal(e.from)),to:this.trimToPrecision(this.fromPercentToDecimal(e.to))});convertToPercentageValue=(e,n)=>e&&((0,F.isComparisonConditionOperator)(n)?{value:this.trimToPrecision(this.fromDecimalToPercent(e.value))}:{from:this.trimToPrecision(this.fromDecimalToPercent(e.from)),to:this.trimToPrecision(this.fromDecimalToPercent(e.to))});onApply=()=>{if(this.isApplyButtonDisabled())return;const{enabledTreatNullValuesAsZero:e,operator:n,value:r}=this.state,{usePercentage:o}=this.props,i=n==="ALL"?null:n,s=o?this.convertToRawValue(r,n):r;this.props.onApply(i,s,e)}}const Va=(0,be.ZP)(Wa);class za extends l.PureComponent{render(){return l.createElement(ie.IntlWrapper,{locale:this.props.locale},l.createElement(Va,{...this.props}))}}const Za=["bl tl","tl bl","br tr","tr br"].map(t=>({align:t,offset:{x:1,y:0}}));class Ka extends l.PureComponent{static defaultProps={value:{},operator:"ALL",displayTreatNullAsZeroOption:!1,treatNullAsZeroValue:!1};render(){const{operator:e,value:n,usePercentage:r,warningMessage:o,locale:i,onCancel:s,anchorEl:a,separators:c,displayTreatNullAsZeroOption:m,treatNullAsZeroValue:g,enableOperatorSelection:p}=this.props,E=e!==null?e:"ALL";return l.createElement(T.Overlay,{alignTo:a,alignPoints:Za,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:s},l.createElement(za,{operator:E,value:n,usePercentage:r,warningMessage:o,locale:i,onCancel:s,onApply:this.onApply,separators:c,displayTreatNullAsZeroOption:m,treatNullAsZeroValue:g,enableOperatorSelection:p}))}onApply=(e,n,r)=>{this.props.onApply(e,n,r)}}const Ua=(0,be.ZP)(Ka);class $a extends l.PureComponent{render(){return l.createElement(ie.IntlWrapper,{locale:this.props.locale},l.createElement(Ua,{...this.props}))}}const _a=t=>{if(!t)return{};const e=(0,F.measureValueFilterCondition)(t);return e?(0,F.isRangeCondition)(e)?{from:e.range.from,to:e.range.to}:{value:e.comparison.value}:{}},Ga=(t,e)=>{if(!t||!(0,F.measureValueFilterCondition)(t))return e!==void 0&&e;const n=(0,F.measureValueFilterCondition)(t);return(0,F.isComparisonCondition)(n)&&n.comparison.treatNullValuesAs!==void 0||(0,F.isRangeCondition)(n)&&n.range.treatNullValuesAs!==void 0||!1};class Ei extends l.PureComponent{static defaultProps={displayTreatNullAsZeroOption:!1,treatNullAsZeroDefaultValue:!1,enableOperatorSelection:!0};render(){const{filter:e,onCancel:n,usePercentage:r,warningMessage:o,locale:i,anchorEl:s,separators:a,displayTreatNullAsZeroOption:c,treatNullAsZeroDefaultValue:m,enableOperatorSelection:g}=this.props;return l.createElement($a,{onApply:this.onApply,onCancel:n,operator:e&&(0,F.measureValueFilterOperator)(e)||null,value:e&&_a(e)||null,usePercentage:r,warningMessage:o,locale:i,anchorEl:s,separators:a,displayTreatNullAsZeroOption:c,treatNullAsZeroValue:Ga(e,m),enableOperatorSelection:g})}onApply=(e,n,r)=>{const{filter:o,measureIdentifier:i,onApply:s}=this.props;e===null||e==="ALL"?s(null):(0,F.isRangeConditionOperator)(e)?s((0,F.newMeasureValueFilter)({localIdentifier:i},e,n.from??0,n.to??0,r?0:void 0)):s((0,F.newMeasureValueFilter)({localIdentifier:i},e,n.value??0,r?0:void 0))}}const qa=({isActive:t,buttonTitle:e,onClick:n})=>{const r=B("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":t,"gd-icon-navigatedown":!t});return l.createElement("button",{className:r,onClick:n},e)};class ja extends l.PureComponent{static defaultProps={onCancel:we};state={displayDropdown:!1};buttonRef=l.createRef();render(){const{displayDropdown:e}=this.state,{filter:n,measureIdentifier:r,buttonTitle:o,usePercentage:i,warningMessage:s,locale:a,separators:c,displayTreatNullAsZeroOption:m,treatNullAsZeroDefaultValue:g,enableOperatorSelection:p}=this.props;return l.createElement(l.Fragment,null,l.createElement("div",{ref:this.buttonRef},l.createElement(qa,{onClick:this.toggleDropdown,isActive:e,buttonTitle:o})),e?l.createElement(Ei,{onApply:this.onApply,onCancel:this.onCancel,filter:n,measureIdentifier:r,usePercentage:i,warningMessage:s,locale:a,separators:c,displayTreatNullAsZeroOption:m,treatNullAsZeroDefaultValue:g,enableOperatorSelection:p,anchorEl:this.buttonRef.current}):null)}onApply=e=>{this.closeDropdown(),this.props.onApply(e)};onCancel=()=>{this.closeDropdown(),this.props.onCancel()};closeDropdown=()=>{this.setState({displayDropdown:!1})};toggleDropdown=()=>{this.setState(e=>({...e,displayDropdown:!e.displayDropdown}))}}const Ya=({isActive:t,onClick:e,title:n,className:r})=>{const o=B("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":t,"gd-icon-navigatedown":!t},"s-rf-dropdown-button",r);return l.createElement("button",{className:o,onClick:e},n)},Qa=({title:t,value:e,isSelected:n,onSelect:r})=>{const o=B("gd-list-item","gd-list-item-shortened",{"is-selected":n},"gd-button-link",`s-rf-operator-${Ge.gl(t)}`);return l.createElement("button",{className:o,onClick:()=>r(e)},l.createElement("span",null,t))},Xa=({items:t,selectedValue:e,onSelect:n,onClose:r,intl:o})=>l.createElement(T.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:r},l.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body"},t.map(({value:i,translationId:s})=>{const a=o.formatMessage({id:s});return l.createElement(Qa,{key:i,title:a,value:i,isSelected:i===e,onSelect:n})}))),Ja=(0,be.ZP)(Xa),Ci=[{value:"TOP",translationId:ne.top.id},{value:"BOTTOM",translationId:ne.bottom.id}],ec=t=>Ci.find(({value:e})=>e===t).translationId,tc=({selectedValue:t,onSelect:e,intl:n})=>{const[r,o]=(0,l.useState)(!1),i=()=>{o(!r)},s=m=>{e(m),o(!1)},a=B("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":r,"gd-icon-navigatedown":!r},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),c=n.formatMessage({id:ec(t)});return l.createElement(l.Fragment,null,l.createElement(T.Button,{className:a,value:c,onClick:i}),r?l.createElement(Ja,{items:Ci,selectedValue:t,onSelect:s,onClose:()=>o(!1)}):null)},nc=(0,be.ZP)(tc),Si=99999,yi=[3,5,10,15,20,25,50,100].map(t=>({type:"option",value:t,label:`${t}`})),rc=t=>t?.trim(),Ii=t=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(t),ic=(t,e)=>t<1?[{type:"error",label:e.formatMessage({id:"rankingFilter.valueTooSmall"})}]:t>Si?[{type:"error",label:e.formatMessage({id:"rankingFilter.valueTooLarge"})}]:yi.filter(n=>n.label.toLowerCase().includes(t.toString())),oc=t=>t&&Ii(t)&&Number(t)>0&&Number(t)<=Si,lc=(t,e)=>{if(!t)return yi;const n=rc(t),r=Ii(n);if(r){const o=r[1],i=Number.parseInt(o,10);return ic(i,e)}return[{type:"error",label:e.formatMessage({id:"rankingFilter.valueTooSmall"})}]},sc=({selectedValue:t,onSelect:e,intl:n})=>{const r=o=>lc(o,n);return l.createElement(Un,{getItems:r,onChange:e,value:t,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:oc})},ac=(0,be.ZP)(sc),cc=({item:t,iconClass:e,isSelected:n,onSelect:r,onDropDownItemMouseOver:o,onDropDownItemMouseOut:i,customGranularitySelection:s})=>{const{title:a,ref:c}=t,m=s&&!s.enable,g=B("gd-list-item","gd-list-item-shortened",{"is-selected":n,"is-disabled":m},"gd-button-link",e,`s-rf-attribute-${Ge.gl(a)}`),p=()=>{o&&o(c)},E=()=>{i&&i()};return m?l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement(T.Button,{className:g,value:a,title:a,disabled:!0}),l.createElement(T.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},s.warningMessage)):l.createElement("button",{className:g,onClick:()=>r(c),onMouseOver:p,onMouseOut:E,title:a},l.createElement("span",null,a))},xi=16,uc=({isSelected:t,onSelect:e})=>{const n=B("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link","s-rf-attribute-all-records");return l.createElement("button",{className:n,onClick:()=>e()},l.createElement(U.Z,{id:"rankingFilter.allRecords"}),l.createElement("div",null,l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),l.createElement(T.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[xi,0],"cl cr":[-xi,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}]},l.createElement(U.Z,{id:"rankingFilter.allRecords.tooltip"})))))},dc=({items:t,selectedItemRef:e,onSelect:n,onClose:r,onDropDownItemMouseOver:o,onDropDownItemMouseOut:i,customGranularitySelection:s})=>l.createElement(T.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:r},l.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body"},t.map(a=>{const{type:c,ref:m}=a;return l.createElement(cc,{key:(0,F.objRefToString)(m),iconClass:c==="DATE"?"gd-icon-date":"gd-icon-attribute",item:a,isSelected:(0,F.areObjRefsEqual)(m,e),onSelect:n,onDropDownItemMouseOver:o,onDropDownItemMouseOut:i,customGranularitySelection:s})}),l.createElement("div",{className:"gd-rf-attribute-dropdown-separator"}),l.createElement(uc,{isSelected:!e,onSelect:n}))),mc=(t,e)=>t?t.title:e.formatMessage({id:"rankingFilter.allRecords"}),gc=t=>t?t.type==="DATE"?"gd-icon-date":"gd-icon-attribute":null,fc=({items:t,selectedItemRef:e,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:o,customGranularitySelection:i,intl:s})=>{const[a,c]=(0,l.useState)(!1),m=t.length===1,g=()=>{c(!a)},p=f=>{n(f),c(!1),o?.()},E=B("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),y=t.find(f=>(0,F.areObjRefsEqual)(f.ref,e)),k=mc(y,s);return m?l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement(T.Button,{className:E,value:k,disabled:!0}),l.createElement(T.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},l.createElement(U.Z,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"}))):l.createElement(l.Fragment,null,l.createElement(T.Button,{className:E,value:k,onClick:g,iconLeft:gc(y)}),a?l.createElement(dc,{items:t,selectedItemRef:e,onSelect:p,onClose:()=>c(!1),onDropDownItemMouseOver:r,onDropDownItemMouseOut:o,customGranularitySelection:i}):null)},pc=(0,be.ZP)(fc),hc=({item:t,isSelected:e,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:o,enableRenamingMeasureToMetric:i})=>{const{title:s,ref:a,sequenceNumber:c}=t,m=B("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link",i?"gd-icon-metric":"gd-icon-measure",`s-rf-measure-${Ge.gl(s)}`),g=()=>{r&&r(a)},p=()=>{o&&o()};return l.createElement("button",{className:m,onClick:()=>n(a),onMouseOver:g,onMouseOut:p,title:s},l.createElement("span",{className:"gd-rf-measure-title"},s),c?l.createElement("span",{className:"gd-rf-sequence-number"},c):null)},bc=({items:t,selectedItemRef:e,onSelect:n,onClose:r,onDropDownItemMouseOver:o,onDropDownItemMouseOut:i,enableRenamingMeasureToMetric:s})=>l.createElement(T.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:r},l.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body"},t.map(a=>{const{ref:c}=a;return l.createElement(hc,{key:(0,F.objRefToString)(c),item:a,isSelected:(0,F.areObjRefsEqual)(c,e),onSelect:n,onDropDownItemMouseOver:o,onDropDownItemMouseOut:i,enableRenamingMeasureToMetric:s})}))),vc=({items:t,selectedItemRef:e,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:o,enableRenamingMeasureToMetric:i})=>{const[s,a]=(0,l.useState)(!1),c=()=>{a(!s)},m=y=>{n(y),a(!1),o?.()},g=B("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":s,"gd-icon-navigatedown":!s},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),E=t.find(y=>(0,F.areObjRefsEqual)(y.ref,e))?.title;return l.createElement(l.Fragment,null,l.createElement(T.Button,{className:g,value:E,onClick:c,iconLeft:i?"gd-icon-metric":"gd-icon-measure"}),s?l.createElement(bc,{items:t,selectedItemRef:e,onSelect:m,onClose:()=>a(!1),onDropDownItemMouseOver:r,onDropDownItemMouseOut:o,enableRenamingMeasureToMetric:i}):null)};var Ec=D(72905);const Cc=(t,e)=>{switch(t){case"TOP":return e?ne.topWithAttr.id:ne.topWithoutAttr.id;case"BOTTOM":return e?ne.bottomWithAttr.id:ne.bottomWithoutAttr.id;default:throw new Error(`Operator '${t}' is not supported!`)}},Sc=({operator:t,value:e,measure:n,attribute:r})=>l.createElement("div",{className:"gd-rf-preview s-rf-preview"},l.createElement(U.Z,{id:Cc(t,r),tagName:"span",values:{measure:n.title,attribute:r?.title,operator:t,value:e,strong:o=>l.createElement("strong",null,o)}})),yc=(t,e)=>{const n=t.rankingFilter,r=e.rankingFilter,o=n.operator===r.operator,i=n.value===r.value,s=ee(Ec(n.attributes,r.attributes,Re)),a=Re(n.measure,r.measure);return o&&i&&s&&a},wi=({measureItems:t,attributeItems:e,filter:n,onApply:r,onCancel:o,onDropDownItemMouseOver:i,onDropDownItemMouseOut:s,customGranularitySelection:a,intl:c,enableRenamingMeasureToMetric:m})=>{const g=n.rankingFilter,[p,E]=(0,l.useState)(g.value),[y,k]=(0,l.useState)(g.operator),[f,I]=(0,l.useState)(g.measure),[A,d]=(0,l.useState)(g.attributes?.[0]),b=t.find(S=>(0,F.areObjRefsEqual)(S.ref,f)),v=e.find(S=>(0,F.areObjRefsEqual)(S.ref,A)),u=(0,l.useCallback)(()=>A?(0,F.newRankingFilter)(f,[A],y,p):(0,F.newRankingFilter)(f,y,p),[f,A,y,p]),C=()=>{const S=u();r(S)};return l.createElement("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body"},l.createElement("div",{className:"gd-rf-dropdown-header"},l.createElement(U.Z,{id:"rankingFilter.topBottom"})),l.createElement("div",{className:"gd-rf-dropdown-section"},l.createElement("div",{className:"gd-rf-value-section"},l.createElement(nc,{selectedValue:y,onSelect:k}),l.createElement(ac,{selectedValue:p,onSelect:E}),l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),l.createElement(T.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},l.createElement(U.Z,{id:"rankingFilter.valueTooltip"})))),l.createElement("div",{className:"gd-rf-dropdown-section-title"},l.createElement(U.Z,{id:"rankingFilter.outOf"})),l.createElement(pc,{items:e,selectedItemRef:A,onSelect:d,onDropDownItemMouseOver:i,onDropDownItemMouseOut:s,customGranularitySelection:a}),l.createElement("div",{className:"gd-rf-dropdown-section-title"},l.createElement(U.Z,{id:"rankingFilter.basedOn"})),l.createElement(vc,{items:t,selectedItemRef:f,onSelect:I,onDropDownItemMouseOver:i,onDropDownItemMouseOut:s,enableRenamingMeasureToMetric:m}),l.createElement("div",{className:"gd-rf-dropdown-section-title"},l.createElement(U.Z,{id:"rankingFilter.preview"})),l.createElement(Sc,{measure:b,attribute:v,operator:y,value:p})),l.createElement("div",{className:"gd-rf-dropdown-footer"},l.createElement(T.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>o(),value:c.formatMessage({id:"cancel"})}),l.createElement(T.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:C,value:c.formatMessage({id:"apply"}),disabled:yc(n,u())})))};wi.defaultProps={onCancel:we};const Ic=(0,be.ZP)(wi),xc=["bl tl","tl bl","br tr","tr br"].map(t=>({align:t,offset:{x:1,y:0}})),wc=t=>{const{measure:e,attributes:n,operator:r,value:o}=t.rankingFilter,i=n?.[0];return{rankingFilter:{operator:r,value:o,measure:e,...i?{attributes:[i]}:{}}}},Fi=({measureItems:t,attributeItems:e,filter:n,onApply:r,onCancel:o,anchorEl:i,onDropDownItemMouseOver:s,onDropDownItemMouseOut:a,customGranularitySelection:c,enableRenamingMeasureToMetric:m})=>{const[g,p]=(0,l.useState)(wc(n)),E=y=>{p(y),r(y)};return l.createElement(T.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:i,alignPoints:xc,onClose:o,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"]},l.createElement(Ic,{measureItems:t,attributeItems:e,filter:g,onApply:E,onCancel:o,onDropDownItemMouseOver:s,onDropDownItemMouseOut:a,customGranularitySelection:c,enableRenamingMeasureToMetric:m}))};Fi.defaultProps={onCancel:we};const Fc=(0,be.ZP)(Fi),Ai=t=>l.createElement(ie.IntlWrapper,{locale:t.locale},l.createElement(Fc,{...t})),Di=({measureItems:t,attributeItems:e,filter:n,onApply:r,onCancel:o,buttonTitle:i,onDropDownItemMouseOver:s,onDropDownItemMouseOut:a,customGranularitySelection:c,locale:m,enableRenamingMeasureToMetric:g})=>{const[p,E]=(0,l.useState)(!1),y=()=>{E(!p)},k=I=>{r(I),E(!1)},f=()=>{o(),E(!1)};return l.createElement(l.Fragment,null,l.createElement(Ya,{isActive:p,onClick:y,title:i,className:"gd-rf-dropdown-button"}),p?l.createElement(Ai,{measureItems:t,attributeItems:e,filter:n,onApply:k,onCancel:f,anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:s,onDropDownItemMouseOut:a,customGranularitySelection:c,locale:m,enableRenamingMeasureToMetric:g}):null)};Di.defaultProps={onCancel:we};var pt=D(44586),Ee=D(47591),ki=D(39693),Pi=D(24268),Ac=D(30797),Ce=D(6557);const Dc={init:Ce,initStart:t=>{t.initialization.status="loading"},initSuccess:t=>{t.initialization.status="success"},initError:(t,e)=>{t.initialization.status="error",t.initialization.error=e.payload.error},initCancel:t=>{t.initialization.status="canceled"}},kc={loadAttributeRequest:Ce,loadAttributeStart:t=>{t.attribute.status="loading",t.attribute.error=void 0,t.attribute.data=void 0},loadAttributeSuccess:(t,e)=>{t.attribute.status="success",t.attribute.data=e.payload.attribute},loadAttributeError:(t,e)=>{t.attribute.status="error",t.attribute.error=e.payload.error},loadAttributeCancelRequest:Ce,loadAttributeCancel:t=>{t.attribute.status="canceled"}},_=t=>t,ht=(t,e)=>t.elementsForm==="uris"?e.uri:e.title,bt=t=>t.elementsForm,Pc={loadCustomElementsRequest:Ce,loadCustomElementsStart:Ce,loadCustomElementsSuccess:(t,e)=>{e.payload.elements.forEach(n=>{const r=ht(t,n);t.elements.cache[r]||(t.elements.cache[r]=n)})},loadCustomElementsError:Ce,loadCustomElementsCancelRequest:Ce,loadCustomElementsCancel:Ce},Tc={loadInitialElementsPageRequest:Ce,loadInitialElementsPageStart:t=>{t.elements.initialPageLoad.status="loading",t.elements.initialPageLoad.error=void 0,t.elements.currentOptions.offset=0,t.elements.lastLoadedOptions.offset=0,t.elements.data=[]},loadInitialElementsPageSuccess:(t,e)=>{t.elements.initialPageLoad.status="success",t.elements.totalCountWithCurrentSettings=e.payload.totalCount,e.payload.elements.forEach(n=>{const r=ht(t,n);t.elements.cache[r]||(t.elements.cache[r]=n)}),t.elements.data=e.payload.elements.map(n=>ht(t,n)),t.elements.lastLoadedOptions=e.payload.options},loadInitialElementsPageError:(t,e)=>{t.elements.initialPageLoad.status="error",t.elements.initialPageLoad.error=e.payload.error},loadInitialElementsPageCancelRequest:Ce,loadInitialElementsPageCancel:t=>{t.attribute.status="canceled"}},Oc={loadNextElementsPageRequest:Ce,loadNextElementsPageStart:t=>{t.elements.nextPageLoad.status="loading",t.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(t,e)=>{t.elements.nextPageLoad.status="success",e.payload.elements.forEach(n=>{const r=ht(t,n);t.elements.cache[r]||(t.elements.cache[r]=n)}),t.elements.data=t.elements.data.concat(e.payload.elements.map(n=>ht(t,n))),t.elements.lastLoadedOptions=e.payload.options},loadNextElementsPageError:(t,e)=>{t.elements.nextPageLoad.status="error",t.elements.nextPageLoad.error=e.payload.error},loadNextElementsPageCancelRequest:Ce,loadNextElementsPageCancel:t=>{t.elements.nextPageLoad.status="canceled"}};var Z=D(20573);const vt=(0,Z.createSelector)(_,t=>t.selection.working.keys),Ut=(0,Z.createSelector)(_,t=>t.selection.working.isInverted),Ti=(0,Z.createSelector)(_,t=>t.selection.working.irrelevantKeys),qe=(0,Z.createSelector)(_,t=>t.selection.commited.keys),Et=(0,Z.createSelector)(_,t=>t.selection.commited.isInverted),Oi=(0,Z.createSelector)(_,t=>t.selection.commited.irrelevantKeys),Ri=(0,Z.createSelector)(vt,Ut,Ti,(t,e,n)=>({keys:t,isInverted:e,irrelevantKeys:n})),Mi=(0,Z.createSelector)(qe,Et,Oi,(t,e,n)=>({keys:t,isInverted:e,irrelevantKeys:n})),Rc=(0,Z.createSelector)(Ut,vt,Et,qe,(t,e,n,r)=>t!==n||!Re([...r].sort(),[...e].sort())),Ni=(0,Z.createSelector)(vt,ee),Mc={...Dc,...kc,...Tc,...Oc,...Pc,...{loadIrrelevantElementsRequest:Ce,loadIrrelevantElementsStart:t=>{t.selection.commited.irrelevantKeys=[],t.selection.working.irrelevantKeys=[]},loadIrrelevantElementsSuccess:(t,e)=>{t.selection.commited.irrelevantKeys=e.payload.elementTitles,t.selection.working.irrelevantKeys=e.payload.elementTitles},loadIrrelevantElementsError:Ce,loadIrrelevantElementsCancelRequest:Ce,loadIrrelevantElementsCancel:Ce},...{changeSelection:(t,e)=>{t.selection.working.keys=e.payload.selection,e.payload.irrelevantSelection&&(t.selection.working.irrelevantKeys=e.payload.irrelevantSelection),ct(e.payload.isInverted)||(t.selection.working.isInverted=e.payload.isInverted)},revertSelection:t=>{const e=qe(t),n=Et(t),r=Oi(t);t.selection.working.keys=e,t.selection.working.isInverted=n,t.selection.working.irrelevantKeys=r},commitSelection:t=>{const e=vt(t),n=Ut(t),r=Ti(t);t.selection.commited.keys=e,t.selection.commited.isInverted=n,t.selection.commited.irrelevantKeys=r},invertSelection:t=>{const e=Ut(t);t.selection.working.isInverted=!e},clearSelection:t=>{t.selection.working.keys=[]}},...{setElementsTotalCount:(t,e)=>{t.elements.totalCount=e.payload.totalCount},initTotalCount:Ce,initTotalCountStart:t=>{t.elements.totalCountInitialization.status="loading"},initTotalCountSuccess:t=>{t.elements.totalCountInitialization.status="success"},initTotalCountError:(t,e)=>{t.elements.totalCountInitialization.status="error",t.elements.totalCountInitialization.error=e.payload.error},initTotalCountCancel:t=>{t.elements.totalCountInitialization.status="canceled"},setElementsTotalCountWithCurrentSettings:(t,e)=>{t.elements.totalCountWithCurrentSettings=e.payload.totalCount},setOffset:(t,e)=>{t.elements.currentOptions.offset=e.payload.offset},setLimit:(t,e)=>{t.elements.currentOptions.limit=e.payload.limit},setSearch:(t,e)=>{t.elements.currentOptions.search=e.payload.search},setOrder:(t,e)=>{t.elements.currentOptions.order=e.payload.order},setLimitingAttributeFilters:(t,e)=>{t.elements.currentOptions.limitingAttributeFilters=e.payload.filters},setLimitingMeasures:(t,e)=>{t.elements.currentOptions.limitingMeasures=e.payload.filters},setLimitingDateFilters:(t,e)=>{t.elements.currentOptions.limitingDateFilters=e.payload.filters},setLimitingAttributeFiltersAttributes:(t,e)=>{t.elements.limitingAttributeFiltersAttributes=e.payload.attributes}}},Li={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{},totalCountInitialization:{status:"pending"}},config:{},selection:{commited:{},working:{}}},Bi=(0,Pi.oM)({name:"attributeFilterSlice",initialState:Li,reducers:Mc}),Nc=Bi.reducer,h=Bi.actions;var w=D(34857);function*Ue(){return yield(0,w.fw)("attributeFilterContext")}var $t=D(91966),Lc=D(93386);const $n=(0,Z.createSelector)(_,t=>t.elementsForm),_n=(0,Z.createSelector)(_,t=>t.config.hiddenElements??[]),Bc=(0,Z.createSelector)($n,_n,(t,e)=>t==="uris"?{uris:e}:{values:e}),Gn=(0,Z.createSelector)(_,t=>t.displayFormRef),Hc=(0,Z.createSelector)($n,qe,(t,e)=>t==="uris"?{uris:e}:{values:e}),Wc=(0,Z.createSelector)($n,qe,Et,_n,(t,e,n,r)=>{const o=n?Lc(e,r):$t(e,r);return t==="uris"?{uris:o}:{values:o}}),Vc=(0,Z.createSelector)(Gn,Et,Wc,(t,e,n)=>e?(0,F.newNegativeAttributeFilter)(t,n):(0,F.newPositiveAttributeFilter)(t,n));async function zc(t,e){return t.backend.workspace(t.workspace).attributes().getAttributeByDisplayForm(e).catch(n=>{throw(0,ie.convertError)(n)})}function*Zc(){yield(0,w.Fm)([h.loadAttributeRequest.match,h.loadAttributeCancelRequest.match],Hi)}function*Hi(t){if(h.loadAttributeCancelRequest.match(t))return;const{payload:{correlation:e}}=t;try{const n=yield(0,w.Ys)(Gn),r=yield(0,w.RE)(Ue);yield(0,w.gz)(h.loadAttributeStart({correlation:e}));const o=yield(0,w.RE)(zc,r,n);return yield(0,w.gz)(h.loadAttributeSuccess({attribute:o,correlation:e})),o}catch(n){yield(0,w.gz)(h.loadAttributeError({error:n,correlation:e}))}finally{(yield(0,w.By)())&&(yield(0,w.gz)(h.loadAttributeCancel({correlation:e})))}}var qn=D(57557);const Wi=(0,Z.createSelector)(_,t=>t.attribute.data),Kc=(0,Z.createSelector)(_,t=>t.attribute.status),Uc=(0,Z.createSelector)(_,t=>t.attribute.error),Vi=(t,e)=>ki(t.map(n=>e[n])),$c=(0,Z.createSelector)(_,t=>t.elements.data??[]),zi=(0,Z.createSelector)(_,t=>t.elements.cache),_c=(0,Z.createSelector)($c,zi,Vi),Gc=(0,Z.createSelector)(_,t=>t.elements.totalCount),qc=(0,Z.createSelector)(_,t=>t.elements.totalCountInitialization?.status),jc=(0,Z.createSelector)(_,t=>t.elements.totalCountInitialization?.error),Zi=(0,Z.createSelector)(_,t=>t.elements.totalCountWithCurrentSettings),Yc=(0,Z.createSelector)(_,t=>t.config.staticElements??[]),Ki=(0,Z.createSelector)(_,t=>t.elements.currentOptions.search),Ui=(0,Z.createSelector)(_,t=>t.elements.currentOptions.order),$i=(0,Z.createSelector)(_,t=>t.elements.currentOptions.limit),_i=(0,Z.createSelector)(_,t=>t.elements?.lastLoadedOptions?.offset??t.elements.currentOptions.offset),jn=(0,Z.createSelector)(_,t=>t.elements.currentOptions.limitingAttributeFilters),Gi=(0,Z.createSelector)(_,t=>t.elements.currentOptions.limitingMeasures),qi=(0,Z.createSelector)(_,t=>t.elements.currentOptions.limitingDateFilters),Yn=(0,Z.createSelector)(_i,$i,Ui,Ki,jn,Gi,qi,(t,e,n,r,o,i,s)=>({limit:e,limitingAttributeFilters:o,limitingDateFilters:s,limitingMeasures:i,offset:t,order:n,search:r})),Qn=(0,Z.createSelector)(_,t=>t.elements.lastLoadedOptions),Qc=(0,Z.createSelector)(_,t=>t.elements.limitingAttributeFiltersAttributes);var Ct=D(20434);class St{allItems;items;limit;offset;totalCount;constructor(e,n=50,r=0){this.allItems=e,(0,Ee.kG)(r>=0,`paging offset must be non-negative, got: ${r}`),(0,Ee.kG)(n>0,`limit must be a positive number, got: ${n}`),this.items=e.slice(r,r+n),this.offset=Math.min(r,e.length),this.limit=n,this.totalCount=e.length}async next(){return this.items.length===0?this:new St(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return this.items.length===0?this:new St(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const Xc=t=>e=>(0,F.attributeElementsIsEmpty)(t)?e:(0,F.isAttributeElementsByRef)(t)?e.filter(n=>!t.uris.includes(n.uri)):e.filter(n=>!t.values.includes(n.title)),Jc=t=>e=>{if(!t)return e;if((0,Ct.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(t))throw new Ct.NotImplemented("Elements by primary display form value are not supported yet");return(0,Ct.isElementsQueryOptionsElementsByValue)(t)?e.filter(n=>t.values.includes(n.title)):e.filter(n=>t.uris.includes(n.uri))},eu=t=>e=>t?e.filter(n=>n.title.toLowerCase().includes(t.toLowerCase())):e;async function tu(t,e,n){let r=dr(Xc(e.hiddenElements),Jc(t.elements),eu(t.search))(n);return t.order==="desc"&&(r=[...r].reverse()),new St(r,t.limit,t.offset)}async function nu(t,e,n,r,o){const i=r.values,s=[(0,F.newPositiveAttributeFilter)(n,i)];(0,F.attributeElementsIsEmpty)(o.hiddenElements)||s.push((0,F.newNegativeAttributeFilter)(n,o.hiddenElements));const c=await(await t.workspace(e).execution().forItems([(0,F.newAttribute)(n)],s).execute().catch(p=>{throw(0,ie.convertError)(p)})).readAll().catch(p=>{throw(0,ie.convertError)(p)}),m=ie.DataViewFacade.for(c),[g]=m.meta().attributeHeaders();return g.map(([p])=>({title:p.attributeHeaderItem.name,uri:p.attributeHeaderItem.uri}))}async function ru(t,e,n){const{backend:r,workspace:o}=t,{displayFormRef:i,elements:s,limit:a,limitingAttributeFilters:c,limitingDateFilters:m,limitingMeasures:g,offset:p,search:E,order:y,includeTotalCountWithoutFilters:k,excludePrimaryLabel:f=!0,signal:I}=e,A=ee(c)&&ee(m)&&ee(g)&&!E&&!f&&!y&&p===0;if(Xn(r)&&(0,Ct.isElementsQueryOptionsElementsByValue)(s)&&A){const u=await nu(r,o,i,s,n);return new St(u,a,p)}let d=r.workspace(o).attributes().elements().forDisplayForm(i);const b={};a&&(d=d.withLimit(a)),p&&(d=d.withOffset(p)),E&&(b.filter=E),f&&!Xn(r)&&(b.excludePrimaryLabel=!0),s&&(b.elements=!Xn(r)&&!(0,Ct.isValueBasedElementsQueryOptionsElements)(s)?{primaryValues:s.uris}:s),y&&(b.order=y),k&&(b.includeTotalCountWithoutFilters=k),ee(b)||(d=d.withOptions(b)),m?.length&&(d=d.withDateFilters(m));const v=iu(i,c,n.hiddenElements,n.attribute);return v.length&&(d=d.withAttributeFilters(v)),g?.length&&(d=d.withMeasures(g)),I&&d.withSignal(I),d.query().catch(u=>{throw(0,ie.convertError)(u)})}const Xn=t=>!!t.capabilities.supportsElementUris;function iu(t,e,n,r){return(0,F.attributeElementsIsEmpty)(n)?e??[]:[{attributeFilter:(0,F.newNegativeAttributeFilter)(t,n),overAttribute:r.ref},...e??[]]}async function ou(t,e,n,r){return r?.length?tu(e,n,r):ru(t,e,n)}function*_t(t){const e=yield(0,w.RE)(Ue),n=yield(0,w.Ys)(Bc),r=yield(0,w.Ys)(Wi),o=yield(0,w.Ys)(Gn),i=yield(0,w.Ys)(Yc),s=yield(0,w.RE)(ou,e,{displayFormRef:o,...t},{hiddenElements:n,attribute:r},i);return{elements:s.items,totalCount:s.totalCount,options:qn(t,"signal")}}async function lu(t,e){const n=e.map(r=>(0,F.filterObjRef)(r.attributeFilter));return Promise.all(n.map(r=>t.backend.workspace(t.workspace).attributes().getAttributeByDisplayForm(r))).catch(r=>{throw(0,ie.convertError)(r)})}function*su(){yield(0,w.Fm)([h.loadInitialElementsPageRequest.match,h.loadInitialElementsPageCancelRequest.match],ji)}function*ji(t){if(h.loadInitialElementsPageCancelRequest.match(t))return;const e=yield(0,w.RE)(Ue),n=new AbortController,{payload:{correlation:r}}=t;try{yield(0,w.gz)(h.loadInitialElementsPageStart({correlation:r}));const o=yield(0,w.Ys)(Yn),i=yield(0,w.Ys)(bt),s={...o,signal:n.signal,excludePrimaryLabel:!e.backend.capabilities.supportsElementUris&&i==="values"},a=yield(0,w.RE)(_t,s),c=yield(0,w.RE)(lu,e,o.limitingAttributeFilters??[]);yield(0,w.gz)(h.setLimitingAttributeFiltersAttributes({attributes:c})),yield(0,w.gz)(h.loadInitialElementsPageSuccess({...a,correlation:r}))}catch(o){yield(0,w.gz)(h.loadInitialElementsPageError({error:o,correlation:r}))}finally{(yield(0,w.By)())&&(n.abort(),yield(0,w.gz)(h.loadInitialElementsPageCancel({correlation:r})))}}const au=(0,Z.createSelector)(_,t=>t.elements.nextPageLoad.status),cu=(0,Z.createSelector)(_,t=>t.elements.nextPageLoad.error),uu=(0,Z.createSelector)(Qn,t=>({...t,offset:t.offset+t.limit})),du=(0,Z.createSelector)(Qn,Zi,(t,e)=>t.offset+t.limit<e),mu=(0,Z.createSelector)(Yn,Qn,(t,e)=>!Re(qn(t,"offset","excludePrimaryLabel"),qn(e,"offset","excludePrimaryLabel")));function*gu(){yield(0,w.Fm)([h.loadNextElementsPageRequest.match,h.loadNextElementsPageCancelRequest.match,h.loadInitialElementsPageRequest.match],fu)}function*fu(t){const e=yield(0,w.RE)(Ue);if(h.loadNextElementsPageCancelRequest.match(t)||h.loadInitialElementsPageRequest.match(t))return;const{payload:{correlation:n}}=t;if(yield(0,w.Ys)(du))try{yield(0,w.gz)(h.loadNextElementsPageStart({correlation:n}));const o=yield(0,w.Ys)(uu),i=yield(0,w.Ys)(bt),s={...o,excludePrimaryLabel:!e.backend.capabilities.supportsElementUris&&i==="values"},a=yield(0,w.RE)(_t,s);yield(0,w.gz)(h.loadNextElementsPageSuccess({...a,correlation:n}))}catch(o){yield(0,w.gz)(h.loadNextElementsPageError({error:o,correlation:n}))}finally{(yield(0,w.By)())&&(yield(0,w.gz)(h.loadNextElementsPageCancel({correlation:n})))}}function*pu(){yield(0,w.ib)([h.loadCustomElementsRequest.match],Jn)}function*Jn(t){const{payload:{correlation:e,options:n}}=t;try{yield(0,w.gz)(h.loadCustomElementsStart({correlation:e}));const{result:r,canceled:o,anotherRequest:i}=yield(0,w.S3)({result:(0,w.RE)(_t,n),anotherRequest:(0,w.qn)(s=>h.loadCustomElementsRequest.match(s)&&(e?s.payload.correlation===e:!0)),canceled:(0,w.qn)(s=>h.loadCustomElementsCancelRequest.match(s)&&(e?s.payload.correlation===e:!0))});if(r)return yield(0,w.gz)(h.loadCustomElementsSuccess({...r,correlation:e})),r;(o||i)&&(yield(0,w.gz)(h.loadCustomElementsCancel({correlation:e})))}catch(r){yield(0,w.gz)(h.loadCustomElementsError({error:r,correlation:e}))}finally{(yield(0,w.By)())&&(yield(0,w.gz)(h.loadCustomElementsCancel({correlation:e})))}}function*hu(){yield(0,w.Fm)([h.loadIrrelevantElementsRequest.match,h.loadIrrelevantElementsCancelRequest.match],Yi)}function*Yi(t){if(h.loadIrrelevantElementsCancelRequest.match(t))return;const e=yield(0,w.RE)(Ue),n=new AbortController,{payload:{correlation:r}}=t;try{yield(0,w.gz)(h.loadIrrelevantElementsStart({correlation:r}));const o=yield(0,w.Ys)(bt),i=yield(0,w.Ys)(Yn),s=yield(0,w.Ys)(qe),a=o==="values"?{values:s}:{uris:s},c={...i,signal:n.signal,excludePrimaryLabel:!e.backend.capabilities.supportsElementUris&&o==="values",search:"",elements:a},g=(yield(0,w.RE)(_t,c)).elements.map(E=>E.title),p=$t(s,g);yield(0,w.gz)(h.loadIrrelevantElementsSuccess({elementTitles:p,correlation:r}))}catch(o){yield(0,w.gz)(h.loadIrrelevantElementsError({error:o,correlation:r}))}finally{(yield(0,w.By)())&&(n.abort(),yield(0,w.gz)(h.loadIrrelevantElementsCancel({correlation:r})))}}function*Qi(t){yield(0,w.rM)(Hi,h.loadAttributeRequest({correlation:t}));const{error:e}=yield(0,w.S3)({success:(0,w.qn)(n=>h.loadAttributeSuccess.match(n)&&n.payload.correlation===t),error:(0,w.qn)(n=>h.loadAttributeError.match(n)&&n.payload.correlation===t),cancel:(0,w.qn)(n=>h.loadAttributeCancel.match(n)&&n.payload.correlation===t)});if(e)throw e.payload.error}function*bu(t){const e=yield(0,w.Ys)(Hc),n=yield(0,w.RE)(Ue),r=yield(0,w.Ys)(bt);if(((0,F.isAttributeElementsByRef)(e)?e.uris:e.values).length===0)return;const i=`initSelection_${t}`;yield(0,w.rM)(Jn,h.loadCustomElementsRequest({options:{elements:e,offset:0,limit:550,search:void 0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&r==="values"},correlation:i}));const{error:s}=yield(0,w.S3)({success:(0,w.qn)(a=>h.loadCustomElementsSuccess.match(a)&&a.payload.correlation===i),error:(0,w.qn)(a=>h.loadCustomElementsError.match(a)&&a.payload.correlation===i),cancel:(0,w.qn)(a=>h.loadCustomElementsCancel.match(a)&&a.payload.correlation===i)});if(s)throw s.payload.error}function*vu(t){yield(0,w.rM)(ji,h.loadInitialElementsPageRequest({correlation:t}));const{error:e}=yield(0,w.S3)({success:(0,w.qn)(n=>h.loadInitialElementsPageSuccess.match(n)&&n.payload.correlation===t),error:(0,w.qn)(n=>h.loadInitialElementsPageError.match(n)&&n.payload.correlation===t),cancel:(0,w.qn)(n=>h.loadInitialElementsPageCancel.match(n)&&n.payload.correlation===t)});if(e)throw e.payload.error}function*Xi(t){const e=`initTotalCount_${t}`,n=yield(0,w.RE)(Ue),r=yield(0,w.Ys)(bt);yield(0,w.rM)(Jn,h.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&r==="values"},correlation:e}));const{success:o,error:i}=yield(0,w.S3)({success:(0,w.qn)(s=>h.loadCustomElementsSuccess.match(s)&&s.payload.correlation===e),error:(0,w.qn)(s=>h.loadCustomElementsError.match(s)&&s.payload.correlation===e),cancel:(0,w.qn)(s=>h.loadCustomElementsCancel.match(s)&&s.payload.correlation===e)});if(i)throw i.payload.error;o&&(yield(0,w.gz)(h.setElementsTotalCount({totalCount:o.payload.totalCount})))}function Ji(t){return ee(t)||t.every(e=>(0,F.isNegativeAttributeFilter)(e.attributeFilter)?(0,F.attributeElementsIsEmpty)((0,F.filterAttributeElements)(e.attributeFilter)):!1)}function*Eu(t){yield(0,w.rM)(Yi,h.loadIrrelevantElementsRequest({correlation:t}));const{error:e}=yield(0,w.S3)({success:(0,w.qn)(n=>h.loadIrrelevantElementsSuccess.match(n)&&n.payload.correlation===t),error:(0,w.qn)(n=>h.loadIrrelevantElementsError.match(n)&&n.payload.correlation===t),cancel:(0,w.qn)(n=>h.loadIrrelevantElementsCancel.match(n)&&n.payload.correlation===t)});if(e)throw e.payload.error}function*Cu(){yield(0,w.Fm)(h.init.match,Su)}function*Su(t){const{payload:{correlation:e}}=t;try{yield(0,w.gz)(h.initStart({correlation:e}));const n=yield(0,w.RE)(Ue),r=yield(0,w.Ys)(_n),o=yield(0,w.Ys)(jn),i=yield(0,w.Ys)(Ni),s=n.backend.capabilities.supportsShowingFilteredElements,a=!Ji(o),c=[bu,vu];r?.length>0?yield(0,w.RE)(Qi,e):c.unshift(Qi),a&&c.push(Xi),a&&!i&&s&&c.push(Eu),yield(0,w.$6)(c.map(m=>(0,w.RE)(m,e))),yield(0,w.gz)(h.initSuccess({correlation:e}))}catch(n){yield(0,w.gz)(h.initError({error:n,correlation:e}))}finally{(yield(0,w.By)())&&(yield(0,w.$6)([(0,w.gz)(h.initCancel({correlation:e}))]))}}function*yu(){yield(0,w.Fm)(h.initTotalCount.match,Iu)}function*Iu(t){const{payload:{correlation:e}}=t;try{yield(0,w.gz)(h.initTotalCountStart({correlation:e})),yield(0,w.RE)(Xi,e),yield(0,w.gz)(h.initTotalCountSuccess({correlation:e}))}catch(n){yield(0,w.gz)(h.initTotalCountError({error:n,correlation:e}))}finally{(yield(0,w.By)())&&(yield(0,w.gz)(h.initTotalCountCancel({correlation:e})))}}function*xu(){try{yield(0,w.$6)([Zc,su,gu,pu,hu,Cu,yu].map(t=>(0,w.rM)(t)))}catch(t){console.error("Root saga failed",t)}}const wu=[h.loadAttributeError.type,h.loadInitialElementsPageError.type,h.loadNextElementsPageError.type,h.loadCustomElementsError.type,h.initError.type],Fu=(0,Nt.b)(Ac.ZP),Au=t=>e=>n=>r=>{const o=n(r);return t(o,i=>i(e.getState())),o};function Du(t){const e=Fu({context:{attributeFilterContext:t}}),n=(0,F.filterObjRef)(t.attributeFilter),r=(0,F.filterAttributeElements)(t.attributeFilter),o=(0,F.isAttributeElementsByValue)(r)?"values":"uris",i=(0,F.isAttributeElementsByValue)(r)?r.values:r.uris,s=(0,F.isNegativeAttributeFilter)(t.attributeFilter),a=(0,Pi.xC)({preloadedState:{...Li,displayFormRef:n,elementsForm:o,selection:{commited:{keys:i,isInverted:s,irrelevantKeys:[]},working:{keys:i,isInverted:s,irrelevantKeys:[]}},config:{hiddenElements:t.hiddenElements,staticElements:t.staticElements}},reducer:Nc,middleware:m=>m({thunk:!1,serializableCheck:{ignoredActions:wu,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([e,Au(t.eventListener)]),devTools:{name:"AttributeFilter state"}}),c=e.run(xu);return{context:t,cancelRootSaga:()=>{c.cancel()},dispatch:m=>{a.dispatch(m)},select:m=>m(a.getState())}}const ku=(0,Z.createSelector)(_,t=>t.initialization.status),Pu=(0,Z.createSelector)(_,t=>t.initialization.error),Tu=(0,Z.createSelector)(_,t=>t.elements.initialPageLoad.status),Ou=(0,Z.createSelector)(_,t=>t.elements.initialPageLoad.error),Ru=()=>({initStart:Y(),initSuccess:Y(),initError:Y(),initCancel:Y(),initTotalCountStart:Y(),initTotalCountSuccess:Y(),initTotalCountError:Y(),initTotalCountCancel:Y(),loadAttributeStart:Y(),loadAttributeSuccess:Y(),loadAttributeError:Y(),loadAttributeCancel:Y(),loadInitialElementsPageStart:Y(),loadInitialElementsPageSuccess:Y(),loadInitialElementsPageError:Y(),loadInitialElementsPageCancel:Y(),loadNextElementsPageStart:Y(),loadNextElementsPageSuccess:Y(),loadNextElementsPageError:Y(),loadNextElementsPageCancel:Y(),loadCustomElementsStart:Y(),loadCustomElementsSuccess:Y(),loadCustomElementsError:Y(),loadCustomElementsCancel:Y(),loadIrrelevantElementsStart:Y(),loadIrrelevantElementsSuccess:Y(),loadIrrelevantElementsError:Y(),loadIrrelevantElementsCancel:Y(),selectionChanged:Y(),selectionCommitted:Y(),update:Y()}),Mu=()=>{const t=[];return{registrations:Ru(),registerCallback:(o,i)=>{const s=i.subscribe(o);return t.push(s),s},unsubscribeAll:()=>{t.forEach(o=>{o()})}}};function je(t,e){const n=e.getCause(),r=n?`
Inner error: ${n}`:"";console.error(`Error while ${t}: ${e.getMessage()}${r}`)}const Nu=()=>{const{registerCallback:t,registrations:e,unsubscribeAll:n}=Mu();return{registrations:e,registerCallback:t,unsubscribeAll:n,eventListener:(o,i)=>{h.initStart.match(o)?e.initStart.invoke(o.payload):h.initSuccess.match(o)?e.initSuccess.invoke(o.payload):h.initError.match(o)?(je("initializing",o.payload.error),e.initError.invoke(o.payload)):h.initCancel.match(o)&&e.initCancel.invoke(o.payload),h.initTotalCountStart.match(o)?e.initTotalCountStart.invoke(o.payload):h.initTotalCountSuccess.match(o)?e.initTotalCountSuccess.invoke(o.payload):h.initTotalCountError.match(o)?(je("initializing total count",o.payload.error),e.initTotalCountError.invoke(o.payload)):h.initTotalCountCancel.match(o)&&e.initTotalCountCancel.invoke(o.payload),h.loadAttributeStart.match(o)?e.loadAttributeStart.invoke(o.payload):h.loadAttributeSuccess.match(o)?e.loadAttributeSuccess.invoke(o.payload):h.loadAttributeError.match(o)?(je("loading attribute",o.payload.error),e.loadAttributeError.invoke(o.payload)):h.loadAttributeCancel.match(o)&&e.loadAttributeCancel.invoke(o.payload),h.loadInitialElementsPageStart.match(o)?e.loadInitialElementsPageStart.invoke(o.payload):h.loadInitialElementsPageSuccess.match(o)?e.loadInitialElementsPageSuccess.invoke(o.payload):h.loadInitialElementsPageError.match(o)?(je("loading initial elements page",o.payload.error),e.loadInitialElementsPageError.invoke(o.payload)):h.loadInitialElementsPageCancel.match(o)&&e.loadInitialElementsPageCancel.invoke(o.payload),h.loadNextElementsPageStart.match(o)?e.loadNextElementsPageStart.invoke(o.payload):h.loadNextElementsPageSuccess.match(o)?e.loadNextElementsPageSuccess.invoke(o.payload):h.loadNextElementsPageError.match(o)?(je("loading next elements page",o.payload.error),e.loadNextElementsPageError.invoke(o.payload)):h.loadNextElementsPageCancel.match(o)&&e.loadNextElementsPageCancel.invoke(o.payload),h.loadCustomElementsStart.match(o)?e.loadCustomElementsStart.invoke(o.payload):h.loadCustomElementsSuccess.match(o)?e.loadCustomElementsSuccess.invoke(o.payload):h.loadCustomElementsError.match(o)?(je("loading custom elements",o.payload.error),e.loadCustomElementsError.invoke(o.payload)):h.loadCustomElementsCancel.match(o)&&e.loadCustomElementsCancel.invoke(o.payload),h.loadIrrelevantElementsStart.match(o)?e.loadIrrelevantElementsStart.invoke(o.payload):h.loadIrrelevantElementsSuccess.match(o)?e.loadIrrelevantElementsSuccess.invoke(o.payload):h.loadIrrelevantElementsError.match(o)?(je("loading irrelevant elements",o.payload.error),e.loadIrrelevantElementsError.invoke(o.payload)):h.loadIrrelevantElementsCancel.match(o)&&e.loadIrrelevantElementsCancel.invoke(o.payload),[h.changeSelection.match,h.revertSelection.match,h.invertSelection.match,h.clearSelection.match].some(s=>s(o))&&e.selectionChanged.invoke({selection:i(Ri)}),h.commitSelection.match(o)&&e.selectionCommitted.invoke({selection:i(Mi)}),[h.initStart.match,h.initSuccess.match,h.initError.match,h.initCancel.match,h.loadAttributeStart.match,h.loadAttributeSuccess.match,h.loadAttributeError.match,h.loadAttributeCancel.match,h.loadInitialElementsPageStart.match,h.loadInitialElementsPageSuccess.match,h.loadInitialElementsPageError.match,h.loadInitialElementsPageCancel.match,h.loadNextElementsPageStart.match,h.loadNextElementsPageSuccess.match,h.loadNextElementsPageError.match,h.loadNextElementsPageCancel.match,h.loadIrrelevantElementsStart.match,h.loadIrrelevantElementsSuccess.match,h.loadIrrelevantElementsError.match,h.loadIrrelevantElementsCancel.match,h.changeSelection.match,h.revertSelection.match,h.invertSelection.match,h.clearSelection.match,h.commitSelection.match,h.setLimit.match,h.setOrder.match,h.setSearch.match,h.setLimitingMeasures.match,h.setLimitingAttributeFilters.match,h.setLimitingDateFilters.match].some(s=>s(o))&&e.update.invoke()}}};function Y(){let t=[];return{invoke:r=>{t.forEach(o=>o(r))},subscribe:r=>(t.push(r),function(){t=t.filter(i=>i!=r)})}}class Lu{redux;config;callbacks;constructor(e){this.config=e,this.initializeBridge()}initializeBridge=()=>{this.callbacks=Nu(),this.redux=Du({...this.config,eventListener:(e,n)=>{this.callbacks.eventListener(e,n)}})};init=e=>{this.redux.dispatch(h.init({correlation:e}))};getInitStatus=()=>this.redux.select(ku);getInitError=()=>this.redux.select(Pu);onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart);onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess);onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError);onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel);initTotalCount=e=>{this.redux.dispatch(h.initTotalCount({correlation:e}))};getInitTotalCountStatus=()=>this.redux.select(qc);getInitTotalCountError=()=>this.redux.select(jc);onInitTotalCountStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountStart);onInitTotalCountSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountSuccess);onInitTotalCountError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountError);onInitTotalCountCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountCancel);loadAttribute=e=>{this.redux.dispatch(h.loadAttributeRequest({correlation:e}))};cancelAttributeLoad=()=>{this.redux.dispatch(h.loadAttributeCancelRequest())};getAttribute=()=>this.redux.select(Wi);getAttributeStatus=()=>this.redux.select(Kc);getAttributeError=()=>this.redux.select(Uc);onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart);onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess);onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError);onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel);loadInitialElementsPage=e=>{this.redux.dispatch(h.loadInitialElementsPageRequest({correlation:e}))};cancelInitialElementsPageLoad=()=>{this.redux.dispatch(h.loadInitialElementsPageCancelRequest())};getInitialElementsPageStatus=()=>this.redux.select(Tu);getInitialElementsPageError=()=>this.redux.select(Ou);onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart);onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess);onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError);onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel);loadNextElementsPage=e=>{this.redux.dispatch(h.loadNextElementsPageRequest({correlation:e}))};cancelNextElementsPageLoad(){this.redux.dispatch(h.loadNextElementsPageCancelRequest())}getNextElementsPageStatus=()=>this.redux.select(au);getNextElementsPageError=()=>this.redux.select(cu);onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart);onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess);onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError);onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel);loadCustomElements=(e,n)=>{this.redux.dispatch(h.loadCustomElementsRequest({options:e,correlation:n}))};cancelCustomElementsLoad(e){this.redux.dispatch(h.loadCustomElementsCancelRequest({correlation:e}))}onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart);onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess);onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError);onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel);loadIrrelevantElements=e=>{this.redux.dispatch(h.loadIrrelevantElementsRequest({correlation:e}))};cancelIrrelevantElementsLoad(e){this.redux.dispatch(h.loadIrrelevantElementsCancelRequest({correlation:e}))}onLoadIrrelevantElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsStart);onLoadIrrelevantElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsSuccess);onLoadIrrelevantElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsError);onLoadIrrelevantElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsCancel);getOffset=()=>this.redux.select(_i);setSearch=e=>{this.redux.dispatch(h.setSearch({search:e}))};getSearch=()=>this.redux.select(Ki);setLimit=e=>{this.redux.dispatch(h.setLimit({limit:e}))};getLimit=()=>this.redux.select($i);setOrder=e=>{this.redux.dispatch(h.setOrder({order:e}))};getOrder=()=>this.redux.select(Ui);setLimitingMeasures=e=>{this.redux.dispatch(h.setLimitingMeasures({filters:e}))};getLimitingMeasures=()=>this.redux.select(Gi);setLimitingAttributeFilters=e=>{this.redux.dispatch(h.setLimitingAttributeFilters({filters:e}))};getLimitingAttributeFilters=()=>this.redux.select(jn);setLimitingDateFilters=e=>{this.redux.dispatch(h.setLimitingDateFilters({filters:e}))};getLimitingDateFilters=()=>this.redux.select(qi);getAllElements=()=>this.redux.select(_c);getElementsByKey=e=>{const n=this.redux.select(zi);return Vi(e,n)};getTotalCount=()=>this.redux.select(Gc);getTotalCountWithCurrentSettings=()=>this.redux.select(Zi);getLimitingAttributeFiltersAttributes=()=>this.redux.select(Qc);changeMultiSelection=({keys:e,isInverted:n,irrelevantKeys:r})=>{this.redux.dispatch(h.changeSelection({selection:e,isInverted:n,irrelevantSelection:r}))};revertMultiSelection=()=>{this.redux.dispatch(h.revertSelection())};commitMultiSelection=()=>{this.redux.dispatch(h.commitSelection())};invertMultiSelection=()=>{this.redux.dispatch(h.invertSelection())};clearMultiSelection=()=>{this.redux.dispatch(h.clearSelection())};getWorkingMultiSelection=()=>this.redux.select(Ri);getCommittedMultiSelection=()=>this.redux.select(Mi);changeSingleSelection=e=>{this.redux.dispatch(h.changeSelection({isInverted:!1,selection:ki([e])}))};revertSingleSelection=()=>{this.redux.dispatch(h.revertSelection())};commitSingleSelection=()=>{this.redux.dispatch(h.commitSelection())};getWorkingSingleSelection=()=>{const[e,...n]=this.redux.select(vt);return(0,Ee.kG)(!n.length,"Trying to invoke single select method, but multiple elements are selected."),e};getCommittedSingleSelection=()=>{const[e,...n]=this.redux.select(qe);return(0,Ee.kG)(!n.length,"Trying to invoke single select method, but multiple elements are selected."),e};onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged);onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted);onSingleSelectionChanged=e=>this.callbacks.registerCallback(({selection:n})=>e({selection:n.keys[0]}),this.callbacks.registrations.selectionChanged);onSingleSelectionCommitted=e=>this.callbacks.registerCallback(({selection:n})=>e({selection:n.keys[0]}),this.callbacks.registrations.selectionCommitted);getIsWorkingSelectionEmpty=()=>this.redux.select(Ni);getIsWorkingSelectionChanged=()=>this.redux.select(Rc);getFilter=()=>this.redux.select(Vc);onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update);isLoadElementsOptionsChanged=()=>this.redux.select(mu)}class eo{bridge;config;constructor(e){this.config=e,this.bridge=new Lu(e)}validateStaticElementsLoad=()=>{(0,Ee.kG)(!(this.config.staticElements?.length&&this.getLimitingAttributeFilters()?.length),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,Ee.kG)(!(this.config.staticElements?.length&&this.getLimitingDateFilters()?.length),"Using limitingDateFilters is not supported when using static attribute elements"),(0,Ee.kG)(!(this.config.staticElements?.length&&this.getLimitingMeasures()?.length),"Using limitingMeasures is not supported when using static attribute elements")};init=(e=(0,pt.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)};onInitStart=e=>this.bridge.onInitStart(e);onInitSuccess=e=>this.bridge.onInitSuccess(e);onInitError=e=>this.bridge.onInitError(e);onInitCancel=e=>this.bridge.onInitCancel(e);getInitStatus=()=>this.bridge.getInitStatus();getInitError=()=>this.bridge.getInitError();initTotalCount=(e=(0,pt.Z)())=>{this.bridge.initTotalCount(e)};getInitTotalCountStatus=()=>this.bridge.getInitTotalCountStatus();getInitTotalCountError=()=>this.bridge.getInitTotalCountError();onInitTotalCountStart=e=>this.bridge.onInitTotalCountStart(e);onInitTotalCountSuccess=e=>this.bridge.onInitTotalCountSuccess(e);onInitTotalCountError=e=>this.bridge.onInitTotalCountError(e);onInitTotalCountCancel=e=>this.bridge.onInitTotalCountCancel(e);loadAttribute=(e=(0,pt.Z)())=>{this.bridge.loadAttribute(e)};cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()};getAttribute=()=>this.bridge.getAttribute();getAttributeError=()=>this.bridge.getAttributeError();getAttributeStatus=()=>this.bridge.getAttributeStatus();onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e);onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e);onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e);onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e);loadInitialElementsPage=(e=(0,pt.Z)())=>{(0,Ee.kG)(this.bridge.getInitStatus()==="success","Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e)};cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus();getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError();onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e);onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e);onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e);onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e);loadNextElementsPage=(e=(0,pt.Z)())=>{(0,Ee.kG)(this.bridge.getInitStatus()==="success","Cannot call loadNextElementsPage() before successful initialization."),(0,Ee.kG)(this.bridge.getInitialElementsPageStatus()==="success","Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,Ee.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)};cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus();getNextElementsPageError=()=>this.bridge.getNextElementsPageError();onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e);onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e);onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e);onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e);loadCustomElements=(e,n)=>{this.bridge.loadCustomElements(e,n)};cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e);onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e);onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e);onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e);loadIrrelevantElements=e=>{this.bridge.loadIrrelevantElements(e)};cancelIrrelevantElementsLoad(e){this.bridge.cancelIrrelevantElementsLoad(e)}onLoadIrrelevantElementsStart=e=>this.bridge.onLoadIrrelevantElementsStart(e);onLoadIrrelevantElementsSuccess=e=>this.bridge.onLoadIrrelevantElementsSuccess(e);onLoadIrrelevantElementsError=e=>this.bridge.onLoadIrrelevantElementsError(e);onLoadIrrelevantElementsCancel=e=>this.bridge.onLoadIrrelevantElementsCancel(e);getOffset=()=>this.bridge.getOffset();setSearch=e=>{this.bridge.setSearch(e)};getSearch=()=>this.bridge.getSearch();setLimit=e=>{this.bridge.setLimit(e)};getLimit=()=>this.bridge.getLimit();setOrder=e=>{this.bridge.setOrder(e)};getOrder=()=>this.bridge.getOrder();setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)};getLimitingMeasures=()=>this.bridge.getLimitingMeasures();setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)};getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters();setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)};getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters();getAllElements=()=>this.bridge.getAllElements();getElementsByKey=e=>this.bridge.getElementsByKey(e);getTotalElementsCount=()=>this.bridge.getTotalCount();getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings();getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes();getFilter=()=>this.bridge.getFilter();onUpdate=e=>this.bridge.onUpdate(e)}class Bu extends eo{constructor(e){super(e)}changeSelection=e=>{this.bridge.changeMultiSelection(e)};revertSelection=()=>{this.bridge.revertMultiSelection()};commitSelection=()=>{this.bridge.commitMultiSelection()};invertSelection=()=>{this.bridge.invertMultiSelection()};clearSelection=()=>{this.bridge.clearMultiSelection()};getWorkingSelection=()=>this.bridge.getWorkingMultiSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedMultiSelection();onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}class er extends eo{static sanitizeConfig(e){const n=(0,F.filterAttributeElements)(e.attributeFilter),o=((0,F.isAttributeElementsByRef)(n)?n.uris:n.values)[0],i=(0,F.isAttributeElementsByRef)(n)?{uris:[o]}:{values:[o]};return{...e,attributeFilter:(0,F.isPositiveAttributeFilter)(e.attributeFilter)?(0,F.newPositiveAttributeFilter)((0,F.filterObjRef)(e.attributeFilter),i):(0,F.newNegativeAttributeFilter)((0,F.filterObjRef)(e.attributeFilter),i)}}constructor(e){super(er.sanitizeConfig(e))}changeSelection=e=>{this.bridge.changeSingleSelection(e)};revertSelection=()=>{this.bridge.revertSingleSelection()};commitSelection=()=>{this.bridge.commitSingleSelection()};getWorkingSelection=()=>this.bridge.getWorkingSingleSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedSingleSelection();onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}function to(t,e,n,r={selectionMode:"multi"}){const{selectionMode:o,hiddenElements:i,staticElements:s}=r;return o==="multi"?new Bu({backend:t,workspace:e,attributeFilter:n,hiddenElements:i,staticElements:s}):new er({backend:t,workspace:e,attributeFilter:n,hiddenElements:i,staticElements:s})}const Fe=(t,e)=>()=>{throw new ie.UnexpectedSdkError(`Component: ${t} is missing in the ${e}.`)},Lg=(t,e)=>(...n)=>{throw new UnexpectedSdkError(`Callback: ${t} is missing in the ${e}.`)};function Gt(t,e){return t.formattedTitle||t.title||`(${e.formatMessage({id:"empty_value"})})`}function no(t,e){return t.map(n=>Gt(n,e)).join(", ")}function Hu(t){return t.uri}function Wu(t){const{connectToPlaceholder:e,filter:n,onApply:r,parentFilters:o,hiddenElements:i,staticElements:s,backend:a}=t;(0,Ee.kG)(!(n&&e),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,Ee.kG)(!(n&&!r),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,Ee.kG)(n||e,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,Ee.kG)(!(!a?.capabilities?.supportsElementsQueryParentFiltering&&!ee(o)),"Parent filtering is not supported by the current backend implementation."),(0,Ee.kG)(!(!a?.capabilities?.supportsElementsQueryParentFiltering&&!ee(i)&&ee(s)),"Hidden elements are not supported by the current backend implementation.")}function Vu(t,e,n,r){const o=t==="single",i=ee(n),s=(0,F.isPositiveAttributeFilter)(e)&&(0,F.attributeElementsCount)((0,F.filterAttributeElements)(e))<2;if(o){if(!s)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!i&&!r)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}const tr=(0,l.createContext)({ErrorComponent:Fe("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:Fe("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:Fe("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:Fe("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:Fe("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:Fe("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:Fe("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:Fe("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:Fe("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:Fe("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:Fe("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:Fe("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:Fe("StatusBarComponent","AttributeFilterComponentsContext")});tr.displayName="AttributeFilterComponentsContext";const nr=()=>(0,l.useContext)(tr),zu=t=>{const{children:e,...n}=t;return l.createElement(tr.Provider,{value:n},e)};var Zu=D(23279);const Ku=(t,e)=>{const[n,r]=(0,ie.usePlaceholder)(e),o=n??t,i=(0,l.useCallback)(s=>{e&&r(s)},[e,r]);return{filter:o,setConnectedPlaceholderValue:i}};var Uu=D(23560);const $u=(t,e,n)=>{const r=(0,ie.useResolveValueWithPlaceholders)(t);return(0,l.useMemo)(()=>n?Gu(r,e):_u(r),[n,r,e])},_u=t=>t?t.map(e=>({attributeFilter:e,overAttribute:null})):[],Gu=(t,e)=>{if(!t||!e)return[];const n=Uu(e)?e:()=>e;return t.map((r,o)=>({attributeFilter:r,overAttribute:n(r,o)})).filter(r=>!(0,F.filterIsEmpty)(r.attributeFilter))},ro=t=>{const{backend:e,workspace:n,filter:r,hiddenElements:o,staticElements:i}=t,[,s]=(0,l.useState)(0),a=()=>{s(E=>E+1)},c=(0,l.useRef)(),m=(0,l.useCallback)(()=>{const E=to(e.withTelemetry("AttributeFilter",{workspace:n,filter:r,hiddenElements:o,staticElements:i}),n,r,{selectionMode:"multi",hiddenElements:o,staticElements:i});c.current=E},[e,n,r,o,i]);c.current||m();const g=c.current,p=(0,ie.usePrevious)(t);return(0,l.useEffect)(()=>{const E=g.onUpdate(()=>{a()});return(e!==p.backend||n!==p.workspace||!Re((0,F.filterObjRef)(r),(0,F.filterObjRef)(g.getFilter()))||!Re(i,p.staticElements)||!Re(o,p.hiddenElements))&&(m(),a()),()=>{E()}},[e,n,r,i,o,p,g,m]),g},qu=t=>{const e=t.getWorkingSelection(),n=t.getCommittedSelection(),r=t.getInitStatus();return{attributeFilter:t.getFilter(),initialization:{status:t.getInitStatus(),error:t.getInitError()},attribute:{data:t.getAttribute(),status:t.getAttributeStatus(),error:t.getAttributeError()},elements:{data:t.getAllElements(),totalCount:t.getTotalElementsCount(),totalCountWithCurrentSettings:t.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:t.getInitialElementsPageStatus(),error:t.getInitialElementsPageError()},nextPageLoad:{status:t.getNextElementsPageStatus(),error:t.getNextElementsPageError()},options:{search:t.getSearch(),offset:t.getOffset(),limit:t.getLimit(),limitingAttributeFilters:t.getLimitingAttributeFilters(),limitingDateFilters:t.getLimitingDateFilters(),limitingMeasures:t.getLimitingMeasures(),order:t.getOrder()}},selection:{committed:{elements:r==="success"?t.getElementsByKey(n.keys):[],keys:n.keys,isInverted:n.isInverted,irrelevantElements:r==="success"?t.getElementsByKey(n.irrelevantKeys):[]},working:{elements:r==="success"?t.getElementsByKey(e.keys):[],keys:e.keys,isInverted:e.isInverted,isChanged:t.isWorkingSelectionChanged(),isEmpty:t.isWorkingSelectionEmpty(),irrelevantElements:r==="success"?t.getElementsByKey(e.irrelevantKeys):[]}}}},ju="search",io="reset",yt="parentFilters",Yu="showFilteredElements",Qu="irrelevantSelection",oo=500;function Xu(t,e,n){const r=qu(t),o=r.initialization.status,i=r.initialization.error,s=o==="loading",a=r.attribute.data,c=r.elements.initialPageLoad.status,m=r.elements.initialPageLoad.error,g=c==="loading",p=r.elements.nextPageLoad.status,E=r.elements.nextPageLoad.error,y=p==="loading",k=r.elements.data,f=r.elements.totalCount,I=r.elements.totalCountWithCurrentSettings,A=r.selection.working.isChanged,d=r.selection.working.isEmpty,b=r.selection.working.isInverted,v=r.selection.working.elements,u=r.selection.committed.isInverted,C=r.selection.committed.elements,S=r.elements.options.search,P=r.elements.options.limit,x=r.elements.options.limitingAttributeFilters,R=k.length<I?Math.min(P,I-k.length):0,M=v.length>oo||!A||!b&&d,N=Ji(x),H=n&&c==="success"&&!N,z=Ju(t),W=t.getLimitingAttributeFiltersAttributes(),K=a?.displayForms??[],re=(0,F.filterObjRef)(r.attributeFilter),oe=r.elements.options.offset,$=e?r.selection.working.irrelevantElements:[];return{attribute:a,offset:oe,limit:P,isFiltering:z,isInitializing:s,initError:i,isLoadingInitialElementsPage:g,initialElementsPageError:m,isLoadingNextElementsPage:y,nextElementsPageError:E,nextElementsPageSize:R,elements:k,totalElementsCount:f,totalElementsCountWithCurrentSettings:I,isApplyDisabled:M,isWorkingSelectionInverted:b,workingSelectionElements:v,isCommittedSelectionInverted:u,committedSelectionElements:C,searchString:S,isFilteredByParentFilters:H,parentFilterAttributes:W,displayForms:K,currentDisplayFormRef:re,enableShowingFilteredElements:e,irrelevantSelection:$}}function Ju(t){const[e,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{const r=[t.onLoadInitialElementsPageStart(o),t.onLoadInitialElementsPageSuccess(i),t.onLoadInitialElementsPageError(i),t.onLoadInitialElementsPageCancel(i),t.onInitStart(o),t.onInitSuccess(i),t.onInitError(i),t.onInitCancel(i)];function o(s){s.correlation===yt&&n(!0)}function i(s){s.correlation===yt&&n(!1)}return()=>{r.forEach(s=>{s()})}},[t]),e}const lo=t=>{const{backend:e,workspace:n,filter:r,connectToPlaceholder:o,parentFilters:i,parentFilterOverAttribute:s,resetOnParentFilterChange:a=!0,onApply:c,onError:m,hiddenElements:g,staticElements:p,elementsOptions:E,selectionMode:y="multi",selectFirst:k=!1}=t,f=(0,ie.useBackendStrict)(e,"AttributeFilter"),I=(0,ie.useWorkspaceStrict)(n,"AttributeFilter"),A=f.capabilities.supportsSettingConnectingAttributes,d=f.capabilities.supportsKeepingDependentFiltersSelection,b=f.capabilities.supportsCircularDependencyInFilters,v=f.capabilities.supportsShowingFilteredElements,u=f.capabilities.supportsSingleSelectDependentFilters,{shouldReloadElements:C,setShouldReloadElements:S}=sd(d,b),{shouldIncludeLimitingFilters:P,setShouldIncludeLimitingFilters:x}=ad(v),{filter:O,setConnectedPlaceholderValue:R}=Ku(r,o),M=$u(i,s,A),N=ro({backend:f,filter:O,workspace:I,hiddenElements:g,staticElements:p}),H=Xu(N,v,P),z=Vu(y,O,M,u)?{}:{initError:new ie.UnexpectedSdkError};ed(N,{onError:m}),td(N,{filter:O,limitingAttributeFilters:M,limit:E?.limit,onApply:c,setConnectedPlaceholderValue:R,resetOnParentFilterChange:a,selectionMode:y,setShouldReloadElements:S},d,b);const W=od(N,{onApply:c,setConnectedPlaceholderValue:R,selectionMode:y,shouldReloadElements:C,setShouldReloadElements:S,shouldIncludeLimitingFilters:P,setShouldIncludeLimitingFilters:x,limitingAttributeFilters:M},v,d);return ld(N,{selectFirst:k,onApply:W.onApply,selectionMode:y}),{...H,...W,...z}};function ed(t,e){const{onError:n}=e;(0,l.useEffect)(()=>{function r(i){n?.(i.error)}const o=[t.onInitError(r),t.onLoadAttributeError(r),t.onLoadInitialElementsPageError(r),t.onLoadNextElementsPageError(r),t.onLoadCustomElementsError(r)];return()=>{o.forEach(i=>{i()})}},[t,n])}function td(t,e,n,r){const{filter:o,limitingAttributeFilters:i,limit:s,resetOnParentFilterChange:a,setConnectedPlaceholderValue:c,onApply:m,selectionMode:g,setShouldReloadElements:p}=e;(0,l.useEffect)(()=>{i.length>0&&t.setLimitingAttributeFilters(i),s&&t.setLimit(s),t.init()},[t]),(0,l.useEffect)(()=>{const E=!Re(i,t.getLimitingAttributeFilters()),y=!Re(o,t.getFilter()),k={filter:o,limitingAttributeFilters:i,limitingAttributesChanged:E,filterChanged:y,setConnectedPlaceholderValue:c,onApply:m,selectionMode:g,setShouldReloadElements:p},f=a?rd(t,k,r):nd(t,k,n);id(t,f,n)},[o,i,a,t,m,c,g,n,r,p])}function nd(t,{filter:e,limitingAttributeFilters:n,limitingAttributesChanged:r,filterChanged:o,setConnectedPlaceholderValue:i,setShouldReloadElements:s},a){if(r||o){const c=(0,F.filterAttributeElements)(e),m=(0,F.isAttributeElementsByValue)(c)?c.values:c.uris,g=(0,F.isNegativeAttributeFilter)(e),p=t.getCommittedSelection().irrelevantKeys,E=$t(p,m),y=t.getLimitingAttributeFilters().length!==n.length,k=a&&(y||!ee(E)),f=k?{irrelevantKeys:[]}:{};t.changeSelection({keys:m,isInverted:g,...f}),t.setLimitingAttributeFilters(n),t.commitSelection();const I=t.getFilter();return i(I),k?"init-self":r?(s(!0),"init-parent"):"init-self"}}function rd(t,{filter:e,limitingAttributeFilters:n,limitingAttributesChanged:r,filterChanged:o,setConnectedPlaceholderValue:i,onApply:s,selectionMode:a},c){const m=n.length===0||!c;if((0,Ee.kG)(m,"It is not possible to automatically reset dependent filters with current backend. Please set attribute filter to not reset on parent filter change (resetOnParentFilterChange prop)."),r){t.changeSelection({keys:[],isInverted:a!=="single"}),t.setLimitingAttributeFilters(n),t.commitSelection();const g=t.getFilter(),p=t.getCommittedSelection()?.isInverted;return i(g),s?.(g,p),"init-parent"}if(o){const g=(0,F.filterAttributeElements)(e),p=(0,F.isAttributeElementsByValue)(g)?g.values:g.uris,E=(0,F.isNegativeAttributeFilter)(e);return t.changeSelection({keys:p,isInverted:E}),t.commitSelection(),"init-self"}}function id(t,e,n){if(e==="init-parent"){if(n)return;t.getInitStatus()!=="success"?t.init(yt):(t.initTotalCount(yt),t.loadInitialElementsPage(yt))}e==="init-self"&&t.init()}function od(t,e,n,r){const{onApply:o,setConnectedPlaceholderValue:i,selectionMode:s,shouldReloadElements:a,setShouldReloadElements:c,shouldIncludeLimitingFilters:m,setShouldIncludeLimitingFilters:g,limitingAttributeFilters:p}=e,E=(0,l.useCallback)((v,u)=>{const C=t.getFilter(),S=(0,F.isAttributeElementsByRef)((0,F.filterAttributeElements)(C)),P=v.map(O=>S?O.uri:O.title),x=s==="single"?{irrelevantKeys:[]}:{};t.changeSelection({keys:P,isInverted:u,...x})},[t,s]),y=(0,l.useCallback)(Zu(v=>{t.getSearch()!==v&&(t.setSearch(v),t.loadInitialElementsPage(ju))},200),[t]),k=(0,l.useCallback)(()=>{t.loadNextElementsPage()},[t]),f=(0,l.useCallback)(()=>{t.revertSelection(),t.getSearch().length>0&&(t.setSearch(""),t.loadInitialElementsPage(io)),n&&!m&&(g(!0),c(!0),t.setLimitingAttributeFilters(p))},[t,p,g,c,m,n]),I=(0,l.useCallback)(()=>{t.commitSelection();const v=t.getFilter(),u=t.getCommittedSelection()?.isInverted;i(v),o?.(v,u,s)},[o,i,t,s]),A=(0,l.useCallback)(()=>{a&&(t.loadInitialElementsPage(io),!t.isWorkingSelectionEmpty()&&t.loadIrrelevantElements(Qu),c(!1))},[t,a,c]),d=(0,l.useCallback)(()=>{n&&(g(!1),t.changeSelection({...t.getWorkingSelection(),irrelevantKeys:[]}),t.setLimitingAttributeFilters([]),t.loadInitialElementsPage(Yu))},[t,g,n]),b=(0,l.useCallback)(()=>{if(r&&n){const v=t.getWorkingSelection(),u=$t(v.keys,v.irrelevantKeys);t.changeSelection({...v,keys:u,irrelevantKeys:[]})}},[t,r,n]);return{onApply:I,onLoadNextElementsPage:k,onSearch:y,onSelect:E,onReset:f,onOpen:A,onShowFilteredElements:d,onClearIrrelevantSelection:b}}const ld=(t,e)=>{const{selectFirst:n,selectionMode:r,onApply:o}=e,i=t.getCommittedSelection().keys,s=t.getInitialElementsPageStatus(),a=t.getAllElements(),c=t.getFilter();(0,l.useEffect)(()=>{if(n&&r==="single"&&ee(i)&&s==="success"&&!ee(a)){const g=[(0,F.isAttributeElementsByRef)((0,F.filterAttributeElements)(c))?a[0].uri:a[0].title];t.changeSelection({keys:g,isInverted:!1,irrelevantKeys:[]}),t.commitSelection(),o()}},[n,r,i,s,a,c,t,o])},sd=(t,e)=>{const[n,r]=(0,l.useState)(!1),o=(0,l.useCallback)(i=>{!t||!e||r(i)},[e,t]);return{shouldReloadElements:n,setShouldReloadElements:o}},ad=t=>{const[e,n]=(0,l.useState)(!0),r=(0,l.useCallback)(o=>{t&&n(o)},[t]);return{shouldIncludeLimitingFilters:e,setShouldIncludeLimitingFilters:r}},rr=l.createContext(null);rr.displayName="AttributeFilterContext";const It=()=>(0,l.useContext)(rr),cd=t=>{const{children:e,fullscreenOnMobile:n,title:r,selectionMode:o,selectFirst:i,disabled:s,customIcon:a}=t,c=lo(t),m=r??c?.attribute?.title??"";return l.createElement(rr.Provider,{value:{...c,fullscreenOnMobile:n,title:m,selectionMode:o,selectFirst:i,disabled:s,customIcon:a}},e)};var Te=D(86896);const ud=[{align:"cr cl",offset:{x:0,y:50}}],so=({children:t})=>l.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},l.createElement(T.BubbleHoverTrigger,null,l.createElement(T.Icon.QuestionMark,{height:16,width:14,className:"s-attribute-filter-tooltip-icon"}),l.createElement(T.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:ud,arrowStyle:{display:"none"}},t))),dd=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],qt=t=>{const{isOpen:e,title:n,selectedItemsCount:r,showSelectionCount:o=!0,subtitle:i,disabled:s,customIcon:a,isFiltering:c,isLoading:m,isLoaded:g,isError:p,isDraggable:E,icon:y,TooltipContentComponent:k,titleExtension:f,onClick:I,className:A}=t,d=(0,Te.Z)(),b=(0,l.useRef)(null),[v,u]=(0,l.useState)(!1),C=p?l.createElement("i",{className:"gd-icon gd-icon-circle-cross"}):y;(0,l.useEffect)(()=>{const x=b.current;if(!x)return;const R=Math.ceil(x.getBoundingClientRect().width)<x.scrollWidth;u(R)},[i]);let S=n,P=i;return m?(S=d.formatMessage({id:"loading"}),P=d.formatMessage({id:"loading"})):c&&(P=d.formatMessage({id:"filtering"})),l.createElement("div",{className:B("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${Ge.gl(n)}`,{"gd-message":p,"gd-is-filtering":c,"gd-is-active":e,"gd-is-loaded":g,"gd-is-draggable":E,disabled:s},A),onClick:I},C?l.createElement("div",{className:"gd-attribute-filter-dropdown-button-icon__next"},C):null,l.createElement("div",{className:"gd-attribute-filter-dropdown-button-content__next"},l.createElement("div",{className:"gd-attribute-filter-dropdown_button-title-content__next"},l.createElement("div",{className:"gd-attribute-filter-dropdown-button-title__next"},l.createElement(T.ShortenedText,{tooltipAlignPoints:dd,className:"s-attribute-filter-button-title"},`${S}`)),f,l.createElement(fr,{customIcon:a,disabled:s}),k&&g?l.createElement(so,null,l.createElement(k,null)):null),l.createElement("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next"},l.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:b},P),o&&v?l.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next"},`(${r})`):null)))},ao=({onClick:t})=>l.createElement(qt,{isLoading:!0,onClick:t}),co=t=>{const{isOpen:e,isDraggable:n}=t;return l.createElement("div",{className:B("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":e,"gd-is-draggable":n})},l.createElement(U.Z,{id:"gs.filter.error"}))},md=245,uo=t=>{const{onApplyButtonClick:e,onCancelButtonClick:n,width:r=md}=t,{DropdownActionsComponent:o,ElementsSelectComponent:i}=nr(),s=(0,T.useMediaQuery)("mobileDevice"),{initialElementsPageError:a,nextElementsPageError:c,isApplyDisabled:m,isWorkingSelectionInverted:g,isLoadingInitialElementsPage:p,isLoadingNextElementsPage:E,onLoadNextElementsPage:y,elements:k,onSearch:f,onSelect:I,nextElementsPageSize:A,searchString:d,totalElementsCount:b,totalElementsCountWithCurrentSettings:v,workingSelectionElements:u,parentFilterAttributes:C,isFilteredByParentFilters:S,fullscreenOnMobile:P,selectionMode:x,title:O,enableShowingFilteredElements:R,onShowFilteredElements:M,irrelevantSelection:N,onClearIrrelevantSelection:H}=It(),z=(0,l.useMemo)(()=>C.map(oe=>oe.title),[C]),K={width:s&&P?"100%":r},re=(0,l.useCallback)((oe,$)=>{I(oe,$),x==="single"&&e()},[I,e,x]);return l.createElement("div",{className:"gd-attribute-filter-dropdown-body__next",style:K},l.createElement(i,{isInverted:g,isLoading:p,isLoadingNextPage:E,items:k,onLoadNextPage:y,onSearch:f,onSelect:re,nextPageSize:A,searchString:d,selectedItems:u,totalItemsCount:b,totalItemsCountWithCurrentSettings:v,parentFilterTitles:z,isFilteredByParentFilters:S,error:a??c,attributeTitle:O,enableShowingFilteredElements:R,onShowFilteredElements:M,irrelevantSelection:N,onClearIrrelevantSelection:H}),l.createElement(o,{onApplyButtonClick:e,onCancelButtonClick:n,isApplyDisabled:m}))},mo=({isApplyDisabled:t,onApplyButtonClick:e,onCancelButtonClick:n})=>{const r=(0,Te.Z)(),o=r.formatMessage({id:"gs.list.cancel"}),i=r.formatMessage({id:"gs.list.apply"});return l.createElement("div",{className:"gd-attribute-filter-dropdown-actions__next"},l.createElement("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),l.createElement("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next"},l.createElement(T.Button,{className:"gd-attribute-filter-cancel-button__next gd-button-secondary gd-button-small cancel-button s-cancel",onClick:n,value:o,title:o}),l.createElement(T.Button,{disabled:t,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:e,value:i,title:i})))},go=t=>{const{onSearch:e,searchString:n,isSmall:r}=t;return l.createElement(T.InvertableSelectSearchBar,{onSearch:e,searchString:n,isSmall:r})},gd=28,fd=40,pd=10,fo=t=>{const{items:e,totalItemsCount:n,totalItemsCountWithCurrentSettings:r,isInverted:o,selectedItems:i,onSelect:s,searchString:a,onSearch:c,isLoading:m,isLoadingNextPage:g,nextPageSize:p,onLoadNextPage:E,error:y,attributeTitle:k,isFilteredByParentFilters:f,parentFilterTitles:I,enableShowingFilteredElements:A,onShowFilteredElements:d,irrelevantSelection:b,onClearIrrelevantSelection:v}=t,u=(0,Te.Z)(),C=(0,T.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:S,selectionMode:P}=It(),{ElementsSelectLoadingComponent:x,ElementsSelectItemComponent:O,ElementsSelectErrorComponent:R,EmptyResultComponent:M,ElementsSearchBarComponent:N,ElementsSelectActionsComponent:H,StatusBarComponent:z}=nr(),W=S&&C?fd:gd,K=C&&S,re=(0,ie.usePrevious)(r),oe=(0,l.useMemo)(()=>Math.max((Math.min(re,pd)||1)*W,20)+32,[re,W]);return l.createElement(l.Fragment,null,l.createElement(T.InvertableSelect,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:K,isSingleSelect:P==="single",items:e,totalItemsCount:r,itemHeight:W,getItemKey:Hu,getItemTitle:$=>Gt($,u),isInverted:o,selectedItems:i,selectedItemsLimit:oo,onSelect:s,searchString:a,onSearch:c,isLoading:m,error:y,isLoadingNextPage:g,nextPageItemPlaceholdersCount:p,onLoadNextPage:E,numberOfHiddenSelectedItems:b.length,renderItem:$=>l.createElement(O,{...$,fullscreenOnMobile:S}),renderError:()=>l.createElement(R,{error:y}),renderLoading:()=>l.createElement(x,{height:oe}),renderNoData:({height:$})=>l.createElement(M,{height:$,isFilteredByParentFilters:f,searchString:a,totalItemsCount:n,parentFilterTitles:I,enableShowingFilteredElements:A}),renderSearchBar:({onSearch:$,searchString:ue})=>l.createElement(N,{onSearch:$,searchString:ue,isSmall:!(C&&S)}),renderStatusBar:({getItemTitle:$,isInverted:ue,selectedItems:pe,selectedItemsLimit:V})=>l.createElement(z,{getItemTitle:$,isFilteredByParentFilters:f,isInverted:ue,parentFilterTitles:I,selectedItems:pe,totalElementsCountWithCurrentSettings:r,selectedItemsLimit:V,attributeTitle:k,enableShowingFilteredElements:A,onShowFilteredElements:d,irrelevantSelection:b,onClearIrrelevantSelection:v}),renderActions:({checked:$,onChange:ue,onToggle:pe,isFiltered:V,totalItemsCount:L,isPartialSelection:G,isVisible:q})=>l.createElement(H,{isVisible:q,checked:$,onChange:ue,onToggle:pe,isFiltered:V,totalItemsCount:L,isPartialSelection:G})}))};var po=D(68929);const hd=[{align:"bl tc",offset:{x:7,y:0}}],ho=t=>{const{item:e,isSelected:n,onSelect:r,onSelectOnly:o,onDeselect:i}=t,s=(0,Te.Z)(),a=(0,l.useCallback)(()=>{n?i():r()},[r,i,n]),c=(0,l.useCallback)(E=>{E.stopPropagation(),o()},[o]),m=B("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${po(e.title)}`,{"is-selected":n},{"s-attribute-filter-list-item-selected":n},{"gd-attribute-filter-list-empty-item":!e.title}),g=B("input-checkbox-label",{"gd-empty-value-label":!e.title}),p=Gt(e,s);return l.createElement("div",{className:m,onClick:a,title:p},l.createElement("label",{className:g},l.createElement("input",{type:"checkbox",className:"input-checkbox",readOnly:!0,checked:n}),l.createElement("span",{className:"input-label-text"},p)),!e.title&&l.createElement("div",{className:"gd-empty-list-item-tooltip-wrapper"},l.createElement(T.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0},l.createElement("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),l.createElement(T.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:hd},l.createElement(U.Z,{id:"attributesDropdown.empty.item.tooltip"})))),l.createElement("span",{className:"gd-list-item-only",onClick:c},l.createElement(U.Z,{id:"gs.list.only"})))},bo=()=>l.createElement(T.Message,{type:"error"},l.createElement(U.Z,{id:"gs.list.error"})),vo=t=>l.createElement(T.LoadingMask,{height:t.height}),ir=()=>{const t=(0,Te.Z)();return l.createElement(T.NoData,{noDataLabel:t.formatMessage({id:"attributesDropdown.noResultsMatch"})})},Eo=()=>{const t=(0,Te.Z)();return l.createElement(T.NoData,{noDataLabel:t.formatMessage({id:"attributesDropdown.noData"})})},Co=[{align:"cr cl"}],So={"cr cl":[10,0]},yo=t=>{const{parentFilterTitles:e,searchString:n,enableShowingFilteredElements:r}=t;return r&&n.length>0?l.createElement(ir,null):r?l.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement("div",{className:"gd-filtered-message__next"},l.createElement(U.Z,{id:"attributesDropdown.noRelevantValues"}),l.createElement("span",{className:"gd-icon-circle-question"})),l.createElement(T.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Co,arrowOffsets:So},l.createElement(U.Z,{id:"attributesDropdown.noRelevantValues.tooltip",values:{break:l.createElement(l.Fragment,null,l.createElement("br",null),l.createElement("br",null))}})))):l.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement("div",{className:"gd-filtered-message__next"},l.createElement(U.Z,{id:"attributesDropdown.allItemsFiltered"}),l.createElement("span",{className:"gd-icon-circle-question"})),l.createElement(T.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Co,arrowOffsets:So},l.createElement(U.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:e.join(", "),strong:o=>l.createElement("strong",null,o)}}))))},Io=({height:t,totalItemsCount:e,searchString:n,isFilteredByParentFilters:r,parentFilterTitles:o=[],enableShowingFilteredElements:i=!1})=>{let s=null;const a=(0,l.useMemo)(()=>({height:t}),[t]);return e===0?s=l.createElement(Eo,null):r?s=l.createElement(yo,{parentFilterTitles:o,searchString:n,enableShowingFilteredElements:i}):n.length>0&&(s=l.createElement(ir,null)),l.createElement("div",{className:"gd-attribute-filter-empty-result__next",style:a},s)},bd=[{align:"cr cl"}],vd={"cr cl":[10,0]},or=t=>{const{parentFilterTitles:e}=t,n=(0,l.useMemo)(()=>e?e.join(", "):"",[e]);return l.createElement("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered"},l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement("div",{className:"gd-filtered-message__next"},"\xA0",l.createElement(U.Z,{id:"attributesDropdown.itemsFiltered"}),l.createElement("span",{className:"gd-icon-circle-question"})),l.createElement(T.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:bd,arrowOffsets:vd},l.createElement(U.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:n,strong:r=>l.createElement("strong",null,r)}}))))},lr=t=>{const{isInverted:e,selectedItems:n,getItemTitle:r,selectedItemsLimit:o}=t;return l.createElement(T.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:e,getItemTitle:r,selectedItems:n,selectedItemsLimit:o})},Ed=[{align:"bl tl"}],Cd={"bl tl":[0,8]},xo=({attributeTitle:t,onClick:e,parentFilterTitles:n,className:r})=>{const o=(0,l.useMemo)(()=>n?n.join(", "):"",[n]);return l.createElement("div",{className:B("gd-attribute-filter-status-show-all s-attribute-filter-status-show-all",r)},l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement("div",{className:"gd-relevant-values-text"},l.createElement(U.Z,{id:"attributesDropdown.relevantValues",values:{nbsp:l.createElement(l.Fragment,null,"\xA0")}})),l.createElement(T.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ed,arrowOffsets:Cd},l.createElement(U.Z,{id:"attributesDropdown.relevantValues.tooltip",values:{child:t,parents:o,strong:i=>l.createElement("strong",null,i)}}))),l.createElement("span",{className:"gd-action-show-all s-action-show-all",onClick:e},l.createElement(U.Z,{id:"attributesDropdown.showAll"})))},Sd=[{align:"bl tl"}],yd={"bl tl":[-10,12]},wo=({parentFilterTitles:t,irrelevantSelection:e,onClear:n,showClearButton:r=!0})=>{const o=(0,l.useMemo)(()=>t?t.join(", "):"",[t]);return e.length===0?null:l.createElement(T.Message,{className:"gd-attribute-filter-status-irrelevant-message s-attribute-filter-status-irrelevant-message",type:"warning"},l.createElement(T.BubbleHoverTrigger,{showDelay:0,hideDelay:0},l.createElement(U.Z,{id:"attributesDropdown.irrelevantValues",values:{nbsp:l.createElement(l.Fragment,null,"\xA0")}}),l.createElement(T.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Sd,arrowOffsets:yd},l.createElement(U.Z,{id:"attributesDropdown.irrelevantValues.tooltip",values:{parents:o,strong:i=>l.createElement("strong",null,i)}}))),r?l.createElement("span",{className:"gd-action-clear s-action-clear",onClick:n},l.createElement(U.Z,{id:"attributesDropdown.irrelevantValues.clear"})):null)},Fo=t=>{const{attributeTitle:e,isFilteredByParentFilters:n,parentFilterTitles:r,totalElementsCountWithCurrentSettings:o,getItemTitle:i,isInverted:s,selectedItems:a,selectedItemsLimit:c,enableShowingFilteredElements:m=!1,onShowFilteredElements:g=we,irrelevantSelection:p=[],onClearIrrelevantSelection:E=we}=t;return m?l.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n?l.createElement(xo,{attributeTitle:e,onClick:g,parentFilterTitles:r}):null,l.createElement(lr,{isInverted:s,getItemTitle:i,selectedItems:a,selectedItemsLimit:c}),l.createElement(wo,{parentFilterTitles:r,irrelevantSelection:p,onClear:E})):l.createElement("div",{className:"gd-attribute-filter-status-bar__next"},l.createElement(lr,{isInverted:s,getItemTitle:i,selectedItems:a,selectedItemsLimit:c}),n&&o>0?l.createElement(or,{parentFilterTitles:r}):null)},Ao=t=>{const{checked:e,isVisible:n,onChange:r,onToggle:o,isFiltered:i,totalItemsCount:s,isPartialSelection:a}=t;return l.createElement(T.InvertableSelectAllCheckbox,{isVisible:n,checked:e,onChange:r,onToggle:o,isFiltered:i,totalItemsCount:s,isPartialSelection:a})},Do=t=>{const{item:e,onSelectOnly:n,isSelected:r,fullscreenOnMobile:o=!1}=t,i=(0,Te.Z)(),s=(0,l.useCallback)(g=>{g.stopPropagation(),n()},[n]),a=(0,l.useMemo)(()=>Gt(e,i),[e,i]),c=(0,T.useMediaQuery)("mobileDevice"),m=B("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","s-attribute-filter-list-item",`s-attribute-filter-list-item-${po(e.title)}`,{"is-selected":r},{"s-attribute-filter-list-item-selected":r});return l.createElement("div",{className:m,onClick:s,title:a},l.createElement("span",null,a),r&&c&&o?l.createElement("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper"},l.createElement(T.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})):null)};function Id(){return l.createElement("div",{style:{marginTop:-5}})}const ko=t=>{const{enableShowingFilteredElements:e,isFilteredByParentFilters:n,parentFilterTitles:r,totalElementsCountWithCurrentSettings:o,attributeTitle:i,onShowFilteredElements:s,irrelevantSelection:a}=t;return e?l.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n?l.createElement(xo,{attributeTitle:i,onClick:s,parentFilterTitles:r,className:"no-divider"}):null,l.createElement(wo,{parentFilterTitles:r,irrelevantSelection:a,showClearButton:!1})):l.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n&&o>0?l.createElement(or,{parentFilterTitles:r}):null)},xd=()=>l.createElement("div",null),wd={ErrorComponent:co,LoadingComponent:ao,DropdownButtonComponent:qt,DropdownBodyComponent:uo,DropdownActionsComponent:mo,ElementsSearchBarComponent:go,ElementsSelectComponent:fo,ElementsSelectItemComponent:ho,ElementsSelectErrorComponent:bo,ElementsSelectLoadingComponent:vo,ElementsSelectActionsComponent:Ao,EmptyResultComponent:Io,StatusBarComponent:Fo},Fd=({selectionMode:t})=>({...wd,...t==="single"?{ElementsSelectItemComponent:Do,ElementsSelectActionsComponent:Id,StatusBarComponent:ko,DropdownActionsComponent:xd}:{}}),Ad=t=>{const{resetOnParentFilterChange:e=!0,children:n,locale:r,backend:o,workspace:i,title:s,filter:a,connectToPlaceholder:c,parentFilters:m,parentFilterOverAttribute:g,hiddenElements:p,staticElements:E,fullscreenOnMobile:y=!1,selectionMode:k="multi",selectFirst:f=!1,disabled:I,customIcon:A,onApply:d,onError:b,ErrorComponent:v,LoadingComponent:u,DropdownButtonComponent:C,DropdownBodyComponent:S,DropdownActionsComponent:P,ElementsSearchBarComponent:x,ElementsSelectComponent:O,ElementsSelectItemComponent:R,ElementsSelectErrorComponent:M,ElementsSelectLoadingComponent:N,ElementsSelectActionsComponent:H,EmptyResultComponent:z,StatusBarComponent:W}=t,K=Fd(t);return l.createElement(ie.IntlWrapper,{locale:r},l.createElement(zu,{ErrorComponent:v??K.ErrorComponent,LoadingComponent:u??K.LoadingComponent,DropdownButtonComponent:C??K.DropdownButtonComponent,DropdownBodyComponent:S??K.DropdownBodyComponent,DropdownActionsComponent:P??K.DropdownActionsComponent,ElementsSearchBarComponent:x??K.ElementsSearchBarComponent,ElementsSelectComponent:O??K.ElementsSelectComponent,ElementsSelectItemComponent:R??K.ElementsSelectItemComponent,ElementsSelectErrorComponent:M??K.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:N??K.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:H??K.ElementsSelectActionsComponent,EmptyResultComponent:z??K.EmptyResultComponent,StatusBarComponent:W??K.StatusBarComponent},l.createElement(cd,{backend:o,workspace:i,title:s,filter:a,connectToPlaceholder:c,resetOnParentFilterChange:e,parentFilters:m,parentFilterOverAttribute:g,onApply:d,onError:b,hiddenElements:p,staticElements:E,fullscreenOnMobile:y,selectionMode:k,selectFirst:f,disabled:I,customIcon:A},n)))};function Dd(t,e){const n=(0,Te.Z)(),r=e.length===0,o=r&&!t,i=!r&&t,s=!r&&!t;let a=n.formatMessage({id:"gs.list.all"});return i?a=`${n.formatMessage({id:"gs.list.all"})} ${n.formatMessage({id:"gs.list.except"})} ${no(e,n)}`:s?a=no(e,n):o&&(a=n.formatMessage({id:"gs.filterLabel.none"})),a}const kd=[{align:"bc tc"}],Pd=({children:t,errorMessage:e})=>e?l.createElement("div",{className:"gd-attribute-filter-button-wrapper"},l.createElement(T.BubbleHoverTrigger,null,t,l.createElement(T.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:kd},l.createElement("span",null,l.createElement(U.Z,{id:"gs.filter.error.tooltip"}))))):l.createElement(l.Fragment,null,t),Td=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}],Od=()=>{const{DropdownButtonComponent:t,DropdownBodyComponent:e,LoadingComponent:n,ErrorComponent:r}=nr(),{title:o,isInitializing:i,initError:s,isFiltering:a,committedSelectionElements:c,onReset:m,onApply:g,onOpen:p,fullscreenOnMobile:E,isCommittedSelectionInverted:y,selectionMode:k,disabled:f,customIcon:I}=It(),A=(0,T.useMediaQuery)("mobileDevice"),d=Dd(y,c),v=k!=="single"&&c.length!==0;return l.createElement(T.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:Td,fullscreenOnMobile:E,renderButton:({toggleDropdown:u,isOpen:C})=>{const S=f?we:u;return l.createElement("div",{className:B({"gd-is-mobile":E&&A&&C})},!!i&&l.createElement(n,{onClick:S,isOpen:C}),!i&&!!s&&!o&&l.createElement(r,{message:s.message,error:s}),!i&&!!o&&l.createElement(Pd,{errorMessage:s?.message},l.createElement(t,{title:o,subtitle:d,isFiltering:a,isLoaded:!i,isLoading:i,isOpen:C,selectedItemsCount:c.length,showSelectionCount:v,disabled:f,customIcon:I,onClick:S,isError:!!s})))},onOpenStateChanged:u=>{u?p():m()},renderBody:({closeDropdown:u})=>l.createElement("div",{className:B({"gd-is-mobile":E&&A}),style:{height:E&&A?"100%":"auto"}},l.createElement(e,{onApplyButtonClick:()=>{g(),u()},onCancelButtonClick:u}))})},Po=t=>{const e=(0,ie.useBackendStrict)(t.backend,"AttributeFilter");return Wu({backend:e,...t}),l.createElement(Ad,{...t},l.createElement(Od,null))},To=t=>{const{isOpen:e,title:n,isLoading:r,isFiltering:o,onClick:i}=t,s=(0,Te.Z)();let a=n;return r?a=s.formatMessage({id:"loading"}):o&&(a=s.formatMessage({id:"filtering"})),l.createElement(T.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:r,isOpen:e,value:a,onClick:i})},Oo=t=>{const{isOpen:e,subtitle:n,title:r,selectedItemsCount:o,onClick:i,isLoading:s,isFiltering:a,showSelectionCount:c=!0}=t,m=(0,Te.Z)();let g=`${r}: ${n}`;(s||a)&&(g=m.formatMessage({id:"loading"}));const p=B("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":e},{"is-active":e}),E=B("gd-button-icon",{"gd-icon-navigateup":e},{"gd-icon-navigatedown":!e}),y=c?`(${o})`:void 0;return l.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button__next"},l.createElement("button",{className:p,onClick:i,title:g},l.createElement("span",{className:"gd-button-text"},l.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-text"},l.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection"},g),y?l.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count"},y):null)),l.createElement("span",{className:E,role:"button-icon"})))},Rd=t=>{const{titleWithSelection:e,...n}=t,r=e?Oo:To;return l.createElement(Po,{...n,DropdownButtonComponent:t.DropdownButtonComponent??r})},Md=t=>{const{attributeFilterMode:e,...n}=t;return e!=="hidden"?l.createElement(Po,{...n,disabled:e==="readonly",DropdownButtonComponent:t.DropdownButtonComponent??qt}):null},Nd=({isOpened:t,text:e,toggleDropdown:n})=>{const r=(0,Te.Z)(),o=B("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":t}),i=t?"gd-icon-navigateup":"gd-icon-navigatedown",s=r.formatMessage({id:"attributesDropdown.display_as"},{title:e});return l.createElement(T.Button,{className:o,title:s,value:s,onClick:n,iconRight:i})},Ld=t=>{switch(t){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}},Bd=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}],Hd=t=>{const{displayForm:e,selected:n}=t,{title:r,type:o}=e,i=B("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${Ge.gl(r)}`,Ld(o),{"is-selected":n}),s=a=>{const{displayForm:c,onClick:m}=t;m(c.ref),a.preventDefault()};return l.createElement("div",{className:i,onClick:s},l.createElement(T.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:Bd},r))},Wd=23,Vd=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}],zd=t=>{const{displayForms:e,selectedDisplayForm:n,onSelect:r,alignPoints:o}=t,i=(0,l.useMemo)(()=>e.find(s=>(0,F.areObjRefsEqual)(s.ref,n))?.title,[e,n]);return l.createElement(T.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:o??Vd,closeOnMouseDrag:!0,closeOnParentScroll:!0,renderButton:({isOpen:s,toggleDropdown:a})=>l.createElement(Nd,{text:i,isOpened:s,toggleDropdown:a}),renderBody:({closeDropdown:s})=>l.createElement(T.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:e,itemHeight:Wd,renderItem:({item:a})=>{const c=(0,F.areObjRefsEqual)(a.ref,n),m=g=>{s(),c||r(g)};return l.createElement(Hd,{key:a.id,displayForm:a,onClick:m,selected:c})}})})},Zd=t=>{const{onSelect:e,alignPoints:n}=t,{displayForms:r,currentDisplayFormRef:o}=It();return l.createElement(zd,{displayForms:r,selectedDisplayForm:o,alignPoints:n,onSelect:e})},Kd=[{align:"bc tc",offset:{x:-1,y:5}}],Ud=t=>{const{onConfiguration:e}=t;return l.createElement("div",{className:"gd-attribute-filter-configuration-button"},l.createElement(T.BubbleHoverTrigger,null,l.createElement(T.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:e}),l.createElement(T.Bubble,{className:"bubble-primary",alignPoints:Kd},l.createElement(U.Z,{id:"attributesDropdown.configuration"}))))},$d=[{align:"bc tc",offset:{x:-1,y:5}}],_d=t=>{const{onDelete:e}=t;return l.createElement("div",{className:"gd-attribute-filter-delete-button"},l.createElement(T.BubbleHoverTrigger,null,l.createElement(T.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:e}),l.createElement(T.Bubble,{className:"bubble-primary",alignPoints:$d},l.createElement(U.Z,{id:"attributesDropdown.removeTooltip"}))))},Gd=({title:t,defaultAttributeFilterTitle:e,attributeDataSet:n})=>l.createElement("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content"},l.createElement("h3",{className:"s-attribute-filter-tooltip-header"},t??e),l.createElement("h4",null,l.createElement(U.Z,{id:"attributesDropdown.details.type"})),l.createElement("p",{className:"s-attribute-filter-tooltip-item-name"},e),l.createElement("h4",null,l.createElement(U.Z,{id:"attributesDropdown.details.dataset"})),l.createElement("p",{className:"s-attribute-filter-tooltip-item-dataset"},n.title)),qd=t=>l.createElement("div",{className:"gd-empty-select-search-bar"}),jd=(t,e)=>{const{onClick:n}=t,{isOpen:r}=(0,ie.usePrevious)(t);(0,l.useEffect)(()=>{e&&!r&&n()},[n,e,r])},Yd=(t,e)=>{const{isOpen:n}=t,{isOpen:r}=(0,ie.usePrevious)(t);(0,l.useEffect)(()=>{e&&r&&!n&&e()},[e,n,r])},Qd=t=>{const{onSearch:e,searchString:n}=t,[r,o]=(0,l.useState)(n);return(0,l.useEffect)(()=>{o(n)},[n]),{onSearch:(0,l.useCallback)(s=>{o(s),e(s)},[e]),search:r}},Xd=({tooltipContent:t})=>l.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},l.createElement(T.BubbleHoverTrigger,null,l.createElement(T.Icon.BoldHyperlink,{width:12,height:16}),l.createElement(T.Bubble,{arrowOffsets:{"bc tl":[-12,9],"bc tr":[12,9]},alignPoints:[{align:"bc tl"},{align:"bc tr"}]},t)))}}]);
